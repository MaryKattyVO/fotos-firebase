(self.webpackChunkfotosfirebase=self.webpackChunkfotosfirebase||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},7368:(t,e,n)=>{"use strict";n.d(e,{deG:()=>We,tb:()=>va,AFp:()=>da,ip1:()=>ha,CZH:()=>fa,hGG:()=>hu,z2F:()=>eu,sBO:()=>fs,Sil:()=>ka,_Vd:()=>Fo,EJc:()=>_a,SBq:()=>Vo,qLn:()=>ar,vpe:()=>Ws,gxx:()=>Li,tBr:()=>fn,XFs:()=>k,OlP:()=>Ke,zs3:()=>Wi,ZZ4:()=>os,aQg:()=>as,soG:()=>wa,YKP:()=>Ss,v3s:()=>ru,h0i:()=>_s,PXZ:()=>Qa,R0b:()=>Na,FiY:()=>dn,Lbi:()=>ya,g9A:()=>ma,Qsj:()=>Bo,FYo:()=>Go,JOm:()=>lr,Tiy:()=>Ho,q3G:()=>tr,tp0:()=>pn,EAV:()=>su,Rgc:()=>ys,dDg:()=>ja,DyG:()=>Qe,q4F:()=>Zo,GfV:()=>$o,s_b:()=>Es,ifc:()=>L,eFA:()=>Ja,G48:()=>Ka,X6Q:()=>Za,_c5:()=>cu,VLi:()=>Ga,c2e:()=>ba,zSh:()=>Ui,wAp:()=>Ro,vHH:()=>m,EiD:()=>Yn,mCW:()=>Ln,qzn:()=>En,JVY:()=>Cn,pB0:()=>Rn,eBb:()=>An,L6k:()=>xn,LAX:()=>kn,cg1:()=>xo,Tjo:()=>uu,kL8:()=>Ao,yhl:()=>In,dqk:()=>V,sIi:()=>to,CqO:()=>mo,QGY:()=>po,F4k:()=>go,RDi:()=>Et,AaK:()=>h,z3N:()=>Tn,TTD:()=>vt,xp6:()=>Zr,uIk:()=>oo,Suo:()=>ua,Xpm:()=>J,lG2:()=>it,Yz7:()=>w,cJS:()=>_,oAB:()=>et,Yjl:()=>ot,Y36:()=>ao,_UZ:()=>fo,qZA:()=>ho,TgZ:()=>lo,Ikx:()=>To,LFG:()=>cn,$8M:()=>He,NdJ:()=>yo,CRH:()=>ca,ALo:()=>Gs,lcZ:()=>Bs,xi3:()=>zs,Dn7:()=>Hs,Q6J:()=>uo,VKq:()=>js,iGM:()=>aa,LSH:()=>er,kYT:()=>nt,YNc:()=>so,_uU:()=>wo,Oqu:()=>_o,hij:()=>So});var r=n(5959),i=n(7570),o=n(8318),s=n(1906),a=n(2875),u=n(1564);function c(){return new r.xQ}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(h).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function f(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=l({__forward_ref__:l});function p(t){return t.__forward_ref__=p,t.toString=function(){return h(this())},t}function g(t){return"function"==typeof(e=t)&&e.hasOwnProperty(d)&&e.__forward_ref__===p?t():t;var e}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return T(t,I)||T(t,x)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(A))?t[C]:null}const I=l({"\u0275prov":l}),C=l({"\u0275inj":l}),x=l({ngInjectableDef:l}),A=l({ngInjectorDef:l});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let R;function O(t){const e=R;return R=t,e}function N(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void b(h(t),"Injector")}function D(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,M="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j="undefined"!=typeof global&&global,V=F||j||U||M,q={},G=[],B=l({"\u0275cmp":l}),z=l({"\u0275dir":l}),H=l({"\u0275pipe":l}),$=l({"\u0275mod":l}),Z=l({"\u0275loc":l}),K=l({"\u0275fac":l}),W=l({__NG_ELEMENT_ID__:l});let Q=0;function J(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Q++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Y):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(X):null,n})}function Y(t){return st(t)||function(t){return t[z]||null}(t)}function X(t){return function(t){return t[H]||null}(t)}const tt={};function et(t){return D(()=>{const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(tt[t.id]=t.type),e})}function nt(t,e){return D(()=>{const n=at(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function rt(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=J;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[B]||null}function at(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${h(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty(K)?t[K]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=_t),wt}function wt(){const t=St(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function _t(t,e,n,r){const i=St(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===q),t[r]=e}function St(t){return t.__ngSimpleChanges__||null}let Tt;function Et(t){Tt=t}function It(t){return!!t.listen}vt.ngInherit=!0;const Ct={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return xt(e[t.index])}function kt(t,e){return t.data[e]}function Rt(t,e){return t[e]}function Ot(t,e){const n=e[t];return lt(n)?n:n[0]}function Nt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Pt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ut={lFrame:re(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Mt(){return Ut.bindingsEnabled}function jt(){return Ut.lFrame.lView}function Vt(){return Ut.lFrame.tView}function qt(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return Ut.lFrame.currentTNode}function Bt(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function zt(){return Ut.lFrame.isParent}function Ht(){return Ut.isInCheckNoChangesMode}function $t(t){Ut.isInCheckNoChangesMode=t}function Zt(){const t=Ut.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Kt(){return Ut.lFrame.bindingIndex++}function Wt(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qt(e)}function Qt(t){Ut.lFrame.currentDirectiveIndex=t}function Jt(){return Ut.lFrame.currentQueryIndex}function Yt(t){Ut.lFrame.currentQueryIndex=t}function Xt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function te(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=Xt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ut.lFrame=ne();return r.currentTNode=e,r.lView=t,!0}function ee(t){const e=ne(),n=t[1];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ne(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?re(t):e}function re(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ie(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const oe=ie;function se(){const t=ie();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ae(){return Ut.lFrame.selectedIndex}function ue(t){Ut.lFrame.selectedIndex=t}function ce(){const t=Ut.lFrame;return kt(t.tView,t.selectedIndex)}function le(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function he(t,e,n){pe(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&pe(t,e,n,r)}function de(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function pe(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ge(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ge(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const me=-1;class ye{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ve(t,e,n){const r=It(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];we(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function be(t){return 3===t||4===t||6===t}function we(t){return 64===t.charCodeAt(0)}function _e(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Se(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Se(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Te(t){return t!==me}function Ee(t){return 32767&t}function Ie(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ce=!0;function xe(t){const e=Ce;return Ce=t,e}let Ae=0;function ke(t,e){const n=Oe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Re(r.data,t),Re(e,null),Re(r.blueprint,null));const i=Ne(t,e),o=t.injectorIndex;if(Te(i)){const t=Ee(i),n=Ie(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Re(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Oe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ne(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return me;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return me}function De(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=Ae++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Pe(t,e,n){if(n&k.Optional)return t;b(e,"NodeInjector")}function Le(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=O(void 0);try{return i?i.get(e,r,n&k.Optional):N(e,r,n&k.Optional)}finally{O(o)}}return Pe(r,e,n)}function Fe(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e?e>=0?255&e:Me:e}(n);if("function"==typeof o){if(!te(e,t,r))return r&k.Host?Pe(i,n,r):Le(e,n,r,i);try{const t=o(r);if(null!=t||r&k.Optional)return t;b(n)}finally{oe()}}else if("number"==typeof o){let i=null,s=Oe(t,e),a=me,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?Ne(t,e):e[s+8],a!==me&&Be(r,!1)?(i=e[1],s=Ee(a),e=Ie(a,e)):s=-1);-1!==s;){const t=e[1];if(Ge(o,s,t.data)){const t=je(s,e,n,i,r,u);if(t!==Ue)return t}a=e[s+8],a!==me&&Be(r,e[1].data[s+8]===u)&&Ge(o,s,e)?(i=t,s=Ee(a),e=Ie(a,e)):s=-1}}}return Le(e,n,r,i)}const Ue={};function Me(){return new ze(qt(),jt())}function je(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ve(a,s,n,null==r?dt(a)&&Ce:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?qe(e,s,u,a):Ue}function Ve(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function qe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ye){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=xe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?O(s.injectImpl):null;te(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&O(u),xe(a),s.resolving=!1,oe()}}return i}function Ge(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Be(t,e){return!(t&k.Self||t&k.Host&&e)}class ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Fe(this._tNode,this._lView,t,void 0,e)}}function He(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(be(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(qt(),t)}const $e="__parameters__";function Ze(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty($e)?t[$e]:Object.defineProperty(t,$e,{value:[]})[$e];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ke{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const We=new Ke("AnalyzeForEntryComponents"),Qe=Function;function Je(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Je(r,e)):e!==t&&e.push(r)}return e}function Ye(t,e){t.forEach(t=>Array.isArray(t)?Ye(t,e):e(t))}function Xe(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function tn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const en={},nn=/\n/gm,rn="__source",on=l({provide:String,useValue:l});let sn;function an(t){const e=sn;return sn=t,e}function un(t,e=k.Default){if(void 0===sn)throw new Error("inject() must be called from an injection context");return null===sn?N(t,void 0,e):sn.get(t,e&k.Optional?null:void 0,e)}function cn(t,e=k.Default){return(R||un)(g(t),e)}function ln(t){const e=[];for(let n=0;n<t.length;n++){const r=g(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(cn(t,n))}else e.push(cn(r))}return e}function hn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const fn=hn(Ze("Inject",t=>({token:t})),-1),dn=hn(Ze("Optional"),8),pn=hn(Ze("SkipSelf"),4);let gn;function mn(t){var e;return(null===(e=function(){if(void 0===gn&&(gn=null,V.trustedTypes))try{gn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return gn}())||void 0===e?void 0:e.createHTML(t))||t}class yn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class vn extends yn{getTypeName(){return"HTML"}}class bn extends yn{getTypeName(){return"Style"}}class wn extends yn{getTypeName(){return"Script"}}class _n extends yn{getTypeName(){return"URL"}}class Sn extends yn{getTypeName(){return"ResourceURL"}}function Tn(t){return t instanceof yn?t.changingThisBreaksApplicationSecurity:t}function En(t,e){const n=In(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function In(t){return t instanceof yn&&t.getTypeName()||null}function Cn(t){return new vn(t)}function xn(t){return new bn(t)}function An(t){return new wn(t)}function kn(t){return new _n(t)}function Rn(t){return new Sn(t)}class On{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(mn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Nn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=mn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=mn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Dn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Pn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ln(t){return(t=String(t)).match(Dn)||t.match(Pn)?t:"unsafe:"+t}function Fn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Un(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Mn=Fn("area,br,col,hr,img,wbr"),jn=Fn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vn=Fn("rp,rt"),qn=Un(Vn,jn),Gn=Un(Mn,Un(jn,Fn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Un(Vn,Fn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qn),Bn=Fn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zn=Fn("srcset"),Hn=Un(Bn,zn,Fn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$n=Fn("script,style,template");class Zn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Gn.hasOwnProperty(e))return this.sanitizedSomething=!0,!$n.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Hn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Bn[o]&&(s=Ln(s)),zn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Ln(t.trim())).join(", ")),this.buf.push(" ",e,'="',Qn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Gn.hasOwnProperty(e)&&!Mn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Qn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Kn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wn=/([^\#-~ |!])/g;function Qn(t){return t.replace(/&/g,"&amp;").replace(Kn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Wn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jn;function Yn(t,e){let n=null;try{Jn=Jn||function(t){const e=new Nn(t);return function(){try{return!!(new window.DOMParser).parseFromString(mn(""),"text/html")}catch(t){return!1}}()?new On(e):e}(t);let r=e?String(e):"";n=Jn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Jn.getInertBodyElement(r)}while(r!==o);return mn((new Zn).sanitizeChildren(Xn(n)||n))}finally{if(n){const t=Xn(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Xn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var tr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function er(t){const e=function(){const t=jt();return t&&t[12]}();return e?e.sanitize(tr.URL,t)||"":En(t,"URL")?Tn(t):Ln(y(t))}function nr(t,e){t.__ngContext__=e}function rr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ir(t){return t.ngDebugContext}function or(t){return t.ngOriginalError}function sr(t,...e){t.error(...e)}class ar{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||sr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?ir(t)?ir(t):this._findContext(or(t)):null}_findOriginalError(t){let e=or(t);for(;e&&or(e);)e=or(e);return e}}const ur=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function cr(t){return t instanceof Function?t():t}var lr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function hr(t,e){return(void 0)(t,e)}function fr(t){const e=t[3];return ht(e)?e[3]:e}function dr(t){return gr(t[13])}function pr(t){return gr(t[4])}function gr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function mr(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Tr(e,n,a):Sr(e,n,a,i||null,!0):1===t&&null!==n?Sr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Ir(t,e);r&&function(t,e,n,r){It(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&mr(e,t,r,o,i);for(let s=ct;s<n.length;s++){const i=n[s];Or(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function yr(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function vr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function br(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&vr(o,r),e>0&&(t[n-1][4]=r[4]);const s=tn(t,ct+e);Or(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function wr(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&Or(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return _r(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&_r(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&_r(e[1],e),n=e&&e[4]}e=n}}(e)}}function _r(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ye)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&vr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Sr(t,e,n,r,i){It(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Tr(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function Er(t,e,n,r,i){null!==r?Sr(t,e,n,r,i):Tr(t,e,n)}function Ir(t,e){return It(t)?t.parentNode(e):e.parentNode}function Cr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return At(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?At(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Er(o,i,n[a],s,!1);else Er(o,i,n,s,!1)}function xr(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return kr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return xr(t,n);{const n=t[e.index];return ht(n)?kr(-1,n):xt(n)}}if(32&n)return hr(e,t)()||xt(t[e.index]);{const n=Ar(t,e);return null!==n?Array.isArray(n)?n[0]:xr(fr(t[16]),n):xr(t,e.next)}}return null}function Ar(t,e){return null!==e?t[16][6].projection[e.projection]:null}function kr(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return xr(t,r)}return e[7]}function Rr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&nr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Rr(t,e,n.child,r,i,o,!1),mr(e,t,i,a,o);else if(32&u){const s=hr(n,r);let u;for(;u=s();)mr(e,t,i,u,o);mr(e,t,i,a,o)}else 16&u?Nr(t,e,r,n,i,o):mr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Or(t,e,n,r,i,o){Rr(n,r,t.firstChild,e,i,o,!1)}function Nr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)mr(e,t,i,a[u],o);else Rr(t,e,a,s[3],i,o,!0)}function Dr(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Pr(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Lr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Fr="ng-template";function Ur(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Lr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Mr(t){return 4===t.type&&t.value!==Fr}function jr(t,e,n){return e===(4!==t.type||n?t.value:Fr)}function Vr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(be(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!jr(t,u,n)||""===u&&1===e.length){if(qr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Ur(t.attrs,c,n)){if(qr(r))return!1;s=!0}continue}const l=Gr(8&r?"class":u,i,Mr(t),n);if(-1===l){if(qr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Lr(e,c,0)||2&r&&c!==t){if(qr(r))return!1;s=!0}}}}else{if(!s&&!qr(r)&&!qr(u))return!1;if(s&&qr(u))continue;s=!1,r=u|1&r}}return qr(r)||s}function qr(t){return 0==(1&t)}function Gr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Br(t,e,n=!1){for(let r=0;r<e.length;r++)if(Vr(t,e[r],n))return!0;return!1}function zr(t,e){return t?":not("+e.trim()+")":e}function Hr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||qr(s)||(e+=zr(o,i),i=""),r=s,o=o||!qr(r);n++}return""!==i&&(e+=zr(o,i)),e}const $r={};function Zr(t){Kr(Vt(),jt(),ae()+t,Ht())}function Kr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&he(e,r,n)}else{const r=t.preOrderHooks;null!==r&&fe(e,r,0,n)}ue(n)}function Wr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Yt(i),n.contentQueries(2,e[o],o)}}}function Qr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Jr(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Gt(),s=zt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ut.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Bt(o,!0),o}function Yr(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xr(t,e,n){ee(e);try{const r=t.viewQuery;null!==r&&Ai(1,r,n);const i=t.template;null!==i&&ni(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Wr(t,e),t.staticViewQueries&&Ai(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ti(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,se()}}function ti(t,e,n,r){const i=e[2];if(256==(256&i))return;ee(e);const o=Ht();try{Lt(e),Ut.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ni(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&he(e,n,null)}else{const n=t.preOrderHooks;null!==n&&fe(e,n,0,null),de(e,0)}if(function(t){for(let e=dr(t);null!==e;e=pr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=dr(t);null!==e;e=pr(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&ti(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Wr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&he(e,n)}else{const n=t.contentHooks;null!==n&&fe(e,n,1),de(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ue(~r);else{const i=r,o=n[++t],s=n[++t];Wt(o,i),s(2,e[i])}}}finally{ue(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)_i(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ai(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&he(e,n)}else{const n=t.viewHooks;null!==n&&fe(e,n,2),de(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{se()}}function ei(t,e,n,r){const i=e[10],o=!Ht(),s=Nt(e);try{o&&!s&&i.begin&&i.begin(),s&&Xr(t,e,r),ti(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function ni(t,e,n,r,i){const o=ae(),s=2&r;try{ue(-1),s&&e.length>ut&&Kr(t,e,ut,Ht()),n(r,i)}finally{ue(o)}}function ri(t,e,n){Mt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||ke(n,e),nr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&yi(e,n,r);const u=qe(e,t,a,n);nr(u,e),null!==s&&vi(0,a-i,u,r,0,s),o&&(Ot(n.index,e)[8]=u)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ut.lFrame.currentDirectiveIndex;try{ue(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Qt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||fi(r,i)}}finally{ue(-1),Qt(s)}}(t,e,n))}function ii(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function oi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=si(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function si(t,e,n,r,i,o,s,a,u,c){const l=ut+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:$r);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function ai(t,e,n,r){const i=Ri(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Oi(t).push(r,i.length-1))}function ui(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ci(t,e,n,r,i,o,s,a){const u=At(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Di(t,n,c,r,i),dt(e)&&function(t,e){const n=Ot(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,It(o)?o.setProperty(u,r,i):we(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function li(t,e,n,r){let i=!1;if(Mt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Br(n,s.selectors,!1)&&(i||(i=[]),De(ke(n,e),t,s.type),gt(s)?(di(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,gi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Yr(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=_e(n.mergedAttrs,c.hostAttrs),mi(t,n,e,u,c),pi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Mr(e)?null:bi(n,i);o.push(c),s=ui(n,u,s),a=ui(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=_e(n.mergedAttrs,n.attrs),i}function hi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function fi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function di(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function pi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function gi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function mi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new ye(o,gt(i),null);t.blueprint[r]=s,n[r]=s,hi(t,e,0,r,Yr(t,n,i.hostVars,$r),i)}function yi(t,e,n){const r=At(e,t),i=oi(n),o=t[10],s=Ei(t,Qr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function vi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function bi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function _i(t,e){const n=Ot(e,t);if(Dt(n)){const t=n[1];80&n[2]?ti(t,n,t.template,n[8]):n[5]>0&&Si(n)}}function Si(t){for(let n=dr(t);null!==n;n=pr(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];ti(t,e,t.template,e[8])}else e[5]>0&&Si(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ot(e[n],t);Dt(r)&&r[5]>0&&Si(r)}}function Ti(t,e){const n=Ot(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Xr(r,n,n[8])}function Ei(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ii(t){for(;t;){t[2]|=64;const e=fr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ci(t,e,n){const r=e[10];r.begin&&r.begin();try{ti(t,e,t.template,n)}catch(i){throw Ni(e,i),i}finally{r.end&&r.end()}}function xi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=rr(n),i=r[1];ei(i,r,i.template,n)}}(t[8])}function Ai(t,e,n){Yt(0),e(t,n)}const ki=(()=>Promise.resolve(null))();function Ri(t){return t[7]||(t[7]=[])}function Oi(t){return t.cleanup||(t.cleanup=[])}function Ni(t,e){const n=t[9],r=n?n.get(ar,null):null;r&&r.handleError(e)}function Di(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Pi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=f(i,t):2==o&&(r=f(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Li=new Ke("INJECTOR",-1);class Fi{get(t,e=en){if(e===en){const e=new Error(`NullInjectorError: No provider for ${h(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ui=new Ke("Set Injector scope."),Mi={},ji={};let Vi;function qi(){return void 0===Vi&&(Vi=new Fi),Vi}function Gi(t,e=null,n=null,r){return new Bi(t,n,e||qi(),r)}class Bi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Ye(e,n=>this.processProvider(n,t,e)),Ye([t],t=>this.processInjectorType(t,[],i)),this.records.set(Li,Hi(void 0,this));const o=this.records.get(Ui);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:h(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=en,n=k.Default){this.assertNotDestroyed();const r=an(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Ke)&&S(t);e=n&&this.injectableDefInScope(n)?Hi(zi(t),Mi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?qi():this.parent).get(t,e=n&k.Optional&&e===en?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(h(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[rn]&&i.unshift(e[rn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=h(e);if(Array.isArray(e))i=e.map(h).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):h(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(nn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{an(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(h(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=g(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Ye(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Ye(r,t=>this.processProvider(t,n,r||G))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,Hi(a,Mi));const u=r.providers;if(null!=u&&!s){const e=t;Ye(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Zi(t=g(t))?t:g(t&&t.provide);const i=function(t,e,n){return $i(t)?Hi(void 0,t.useValue):Hi(function(t,e,n){let r;if(Zi(t)){const e=g(t);return mt(e)||zi(e)}if($i(t))r=()=>g(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...ln(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>cn(g(t.useExisting));else{const e=g(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||zi(e);r=()=>new e(...ln(t.deps))}var i;return r}(t),Mi)}(t);if(Zi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Hi(void 0,Mi,!0),e.factory=()=>ln(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Mi&&(e.value=ji,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=g(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function zi(t){const e=S(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof Ke)throw new Error(`Token ${h(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${h(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Hi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $i(t){return null!==t&&"object"==typeof t&&on in t}function Zi(t){return"function"==typeof t}const Ki=function(t,e,n){return function(t,e=null,n=null,r){const i=Gi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Wi=(()=>{class t{static create(t,e){return Array.isArray(t)?Ki(t,e,""):Ki(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=en,t.NULL=new Fi,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>cn(Li)}),t.__NG_ELEMENT_ID__=-1,t})();function Qi(t,e){le(rr(t)[1],qt())}let Ji=null;function Yi(){if(!Ji){const t=V.Symbol;if(t&&t.iterator)Ji=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ji=n)}}}return Ji}class Xi{constructor(t){this.wrapped=t}static wrap(t){return new Xi(t)}static unwrap(t){return Xi.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Xi}}function to(t){return!!eo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Yi()in t)}function eo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function no(t,e,n){return t[e]=n}function ro(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function io(t,e,n,r){const i=ro(t,e,n);return ro(t,e+1,r)||i}function oo(t,e,n,r){const i=jt();return ro(i,Kt(),e)&&(Vt(),function(t,e,n,r,i,o){const s=At(t,e);!function(t,e,n,r,i,o,s){if(null==o)It(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);It(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ce(),i,t,e,n,r)),oo}function so(t,e,n,r,i,o,s,a){const u=jt(),c=Vt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Jr(e,t,4,s||null,Pt(c,a));li(e,n,l,Pt(c,u)),le(e,l);const h=l.tViews=si(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Bt(h,!1);const f=u[11].createComment("");Cr(c,u,f,h),nr(f,u),Ei(u,u[l]=wi(f,u,f,h)),pt(h)&&ri(c,u,h),null!=s&&ii(u,h,a)}function ao(t,e=k.Default){const n=jt();return null===n?cn(t,e):Fe(qt(),n,g(t),e)}function uo(t,e,n){const r=jt();return ro(r,Kt(),e)&&ci(Vt(),ce(),r,t,e,r[11],n,!1),uo}function co(t,e,n,r,i){const o=i?"class":"style";Di(t,n,e.inputs[o],o,r)}function lo(t,e,n,r){const i=jt(),o=Vt(),s=ut+t,a=i[11],u=i[s]=yr(a,e,Ut.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Jr(e,t,2,i,Pt(a,o));return li(e,n,u,Pt(a,s)),null!==u.attrs&&Pi(u,u.attrs,!1),null!==u.mergedAttrs&&Pi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Bt(c,!0);const l=c.mergedAttrs;null!==l&&ve(a,u,l);const h=c.classes;null!==h&&Pr(a,u,h);const f=c.styles;null!==f&&Dr(a,u,f),64!=(64&c.flags)&&Cr(o,i,u,c),0===Ut.lFrame.elementDepthCount&&nr(u,i),Ut.lFrame.elementDepthCount++,pt(c)&&(ri(o,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&ii(i,c)}function ho(){let t=qt();zt()?Ut.lFrame.isParent=!1:(t=t.parent,Bt(t,!1));const e=t;Ut.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(le(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&co(n,e,jt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&co(n,e,jt(),e.stylesWithoutHost,!1)}function fo(t,e,n,r){lo(t,e,n,r),ho()}function po(t){return!!t&&"function"==typeof t.then}function go(t){return!!t&&"function"==typeof t.subscribe}const mo=go;function yo(t,e,n,r){const i=jt(),o=Vt(),s=qt();return function(t,e,n,r,i,o,s,a){const u=pt(r),c=t.firstCreatePass&&Oi(t),l=Ri(e);let h=!0;if(3&r.type||a){const f=At(r,e),d=a?a(f):f,p=l.length,g=a?t=>a(xt(t[r.index])):r.index;if(It(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=bo(r,e,0,o,!1);const t=n.listen(d,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=bo(r,e,0,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=bo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),yo}function vo(t,e,n,r){try{return!1!==n(r)}catch(i){return Ni(t,i),!1}}function bo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Ot(t.index,e):e;0==(32&e[2])&&Ii(s);let a=vo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=vo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function wo(t,e=""){const n=jt(),r=Vt(),i=t+ut,o=r.firstCreatePass?Jr(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return It(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Cr(r,n,s,o),Bt(o,!1)}function _o(t){return So("",t,""),_o}function So(t,e,n){const r=jt(),i=function(t,e,n,r){return ro(t,Kt(),n)?e+y(n)+r:$r}(r,t,e,n);return i!==$r&&function(t,e,n){const r=function(t,e){return xt(e[t])}(e,t);!function(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ae(),i),So}function To(t,e,n){const r=jt();return ro(r,Kt(),e)&&ci(Vt(),ce(),r,t,e,r[11],n,!0),To}const Eo=void 0;var Io=["en",[["a","p"],["AM","PM"],Eo],[["AM","PM"],Eo,Eo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Eo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Eo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Eo,"{1} 'at' {0}",Eo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Co={};function xo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ko(e);if(n)return n;const r=e.split("-")[0];if(n=ko(r),n)return n;if("en"===r)return Io;throw new Error(`Missing locale data for the locale "${t}".`)}function Ao(t){return xo(t)[Ro.PluralCase]}function ko(t){return t in Co||(Co[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),Co[t]}var Ro=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Oo="en-US";let No=Oo;function Do(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(No=t.toLowerCase().replace(/_/g,"-"))}class Po{}class Lo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${h(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Fo=(()=>{class t{}return t.NULL=new Lo,t})();function Uo(...t){}function Mo(t,e){return new Vo(At(t,e))}const jo=function(){return Mo(qt(),jt())};let Vo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=jo,t})();function qo(t){return t instanceof Vo?t.nativeElement:t}class Go{}let Bo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>zo(),t})();const zo=function(){const t=jt(),e=Ot(qt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let Ho=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class $o{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Zo=new $o("12.0.5");class Ko{constructor(){}supports(t){return to(t)}create(t){return new Qo(t)}}const Wo=(t,e)=>e;class Qo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Wo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ts(n,r,i)?e:n,s=ts(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!to(t))throw new Error(`Error trying to diff '${h(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Yi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Jo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Xo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Xo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Jo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Xo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Yo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ts(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class es{constructor(){}supports(t){return t instanceof Map||eo(t)}create(){return new ns}}class ns{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||eo(t)))throw new Error(`Error trying to diff '${h(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new rs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class rs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function is(){return new os([new Ko])}let os=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||is()),deps:[[t,new pn,new dn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:is}),t})();function ss(){return new as([new es])}let as=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ss()),deps:[[t,new pn,new dn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:ss}),t})();function us(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),ht(o))for(let t=ct;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&us(e[1],e,n,r)}const s=n.type;if(8&s)us(t,e,n.child,r);else if(32&s){const t=hr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Ar(e,n);if(Array.isArray(t))r.push(...t);else{const n=fr(e[16]);us(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class cs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return us(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(br(t,n),tn(e,n))}this._attachedToViewContainer=!1}wr(this._lView[1],this._lView)}onDestroy(t){ai(this._lView[1],this._lView,null,t)}markForCheck(){Ii(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ci(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){$t(!0);try{Ci(t,e,n)}finally{$t(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Or(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ls extends cs{constructor(t){super(t),this._view=t}detectChanges(){xi(this._view)}checkNoChanges(){!function(t){$t(!0);try{xi(t)}finally{$t(!1)}}(this._view)}get context(){return null}}const hs=function(t){return function(t,e,n){if(dt(t)&&!n){const n=Ot(t.index,e);return new cs(n,n)}return 47&t.type?new cs(e[16],e):null}(qt(),jt(),16==(16&t))};let fs=(()=>{class t{}return t.__NG_ELEMENT_ID__=hs,t})();const ds=[new es],ps=new os([new Ko]),gs=new as(ds),ms=function(){return ws(qt(),jt())};let ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=ms,t})();const vs=ys,bs=class extends vs{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Qr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Xr(e,n,t),new cs(n)}};function ws(t,e){return 4&t.type?new bs(e,t,Mo(t,e)):null}class _s{}class Ss{}const Ts=function(){return ks(qt(),jt())};let Es=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ts,t})();const Is=Es,Cs=class extends Is{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Mo(this._hostTNode,this._hostLView)}get injector(){return new ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ne(this._hostTNode,this._hostLView);if(Te(t)){const e=Ie(t,this._hostLView),n=Ee(t);return new ze(e[1].data[n+8],e)}return new ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=xs(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(_s,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Cs(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ct+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ct?(e[4]=n[i],Xe(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=kr(i,o),a=n[11],u=Ir(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Or(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),Xe(As(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=xs(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=br(this._lContainer,e);n&&(tn(As(this._lContainer),e),wr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=br(this._lContainer,e);return n&&null!=tn(As(this._lContainer),e)?new cs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function xs(t){return t[8]}function As(t){return t[8]||(t[8]=[])}function ks(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);Sr(n,Ir(n,r),i,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=wi(r,e,i,t),Ei(e,n)}return new Cs(n,t,e)}const Rs={};class Os extends Fo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new Ps(e,this.ngModule)}}function Ns(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ds=new Ke("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ur});class Ps extends Po{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Hr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ns(this.componentDef.inputs)}get outputs(){return Ns(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Rs,i);return o!==Rs||r===Rs?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Go,Ct),s=i.get(Ho,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):yr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:ur,clean:ki,playerHandler:null,flags:0},f=si(0,null,null,1,0,null,null,null,null,null),d=Qr(null,f,h,l,null,null,o,a,s,i);let p,g;ee(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Jr(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Pi(a,u,!0),null!==t&&(ve(i,t,u),null!==a.classes&&Pr(i,t,a.classes),null!==a.styles&&Dr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Qr(n,oi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(De(ke(a,n),s,e.type),di(s,a),gi(a,n.length,1)),Ei(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)ve(a,c,["ng-version",Zo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!qr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ve(a,c,t),e&&e.length>0&&Pr(a,c,e.join(" "))}if(g=kt(f,ut),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=qt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),mi(t,r,e,Yr(t,e,1,null),n));const i=qe(e,t,r.directiveStart,r);nr(i,e);const o=At(r,e);return o&&nr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=qt();e.contentQueries(1,s,t.directiveStart)}const a=qt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ue(a.index),hi(n[1],a,0,a.directiveStart,a.directiveEnd,e),fi(e,s)),s}(t,this.componentDef,d,h,[Qi]),Xr(f,d,null)}finally{se()}return new Ls(this.componentType,p,Mo(g,d),d,g)}}class Ls extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ls(r),this.componentType=t}get injector(){return new ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Fs=new Map;class Us extends _s{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Os(this);const n=at(t),r=t[Z]||null;r&&Do(r),this._bootstrapComponents=cr(n.bootstrap),this._r3Injector=Gi(t,e,[{provide:_s,useValue:this},{provide:Fo,useValue:this.componentFactoryResolver}],h(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Wi.THROW_IF_NOT_FOUND,n=k.Default){return t===Wi||t===_s||t===Li?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ms extends Ss{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${h(e)} vs ${h(e.name)}`)}(i,Fs.get(i),n),Fs.set(i,n));const o=cr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Us(this.moduleType,t)}}function js(t,e,n,r){return qs(jt(),Zt(),t,e,n,r)}function Vs(t,e){const n=t[e];return n===$r?void 0:n}function qs(t,e,n,r,i,o){const s=e+n;return ro(t,s,i)?no(t,s+1,o?r.call(o,i):r(i)):Vs(t,s+1)}function Gs(t,e){const n=Vt();let r;const i=t+ut;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=mt(r.type)),s=O(ao);try{const t=xe(!1),e=o();return xe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,jt(),i,e),e}finally{O(s)}}function Bs(t,e,n){const r=t+ut,i=jt(),o=Rt(i,r);return Zs(i,$s(i,r)?qs(i,Zt(),e,o.transform,n,o):o.transform(n))}function zs(t,e,n,r){const i=t+ut,o=jt(),s=Rt(o,i);return Zs(o,$s(o,i)?function(t,e,n,r,i,o,s){const a=e+n;return io(t,a,i,o)?no(t,a+2,s?r.call(s,i,o):r(i,o)):Vs(t,a+2)}(o,Zt(),e,s.transform,n,r,s):s.transform(n,r))}function Hs(t,e,n,r,i){const o=t+ut,s=jt(),a=Rt(s,o);return Zs(s,$s(s,o)?function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=io(t,e,n,r);return ro(t,e+2,i)||o}(t,u,i,o,s)?no(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):Vs(t,u+3)}(s,Zt(),e,a.transform,n,r,i,a):a.transform(n,r,i))}function $s(t,e){return t[1].data[e].pure}function Zs(t,e){return Xi.isWrapped(e)&&(e=Xi.unwrap(e),t[Ut.lFrame.bindingIndex]=$r),e}function Ks(t){return e=>{setTimeout(t,void 0,e)}}const Ws=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Ks(u),a&&(a=Ks(a)),c&&(c=Ks(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Qs(){return this._results[Yi()]()}class Js{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Yi(),n=Js.prototype;n[e]||(n[e]=Qs)}get changes(){return this._changes||(this._changes=new Ws)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Je(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ys{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ys(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xs{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Xs(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==la(t,e).matches&&this.queries[e].setDirty()}}class ta{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class ea{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new ea(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class na{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new na(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,ra(e,i)),this.matchTNodeWithReadOption(t,e,Ve(e,t,i,!1,!1))}else n===ys?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ve(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Vo||r===Es||r===ys&&4&e.type)this.addMatch(e.index,-2);else{const n=Ve(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function ra(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function ia(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Mo(t,e):4&t.type?ws(t,e):null}(e,t):-2===n?function(t,e,n){return n===Vo?Mo(e,t):n===ys?ws(e,t):n===Es?ks(e,t):void 0}(t,e,r):qe(t,t[1],n,e)}function oa(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:ia(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function sa(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=oa(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ct;t<s.length;t++){const e=s[t];e[17]===e[3]&&sa(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];sa(n[1],n,i,r)}}}}}return r}function aa(t){const e=jt(),n=Vt(),r=Jt();Yt(r+1);const i=la(n,r);if(t.dirty&&Nt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?sa(n,e,r,[]):oa(n,e,i,r);t.reset(o,qo),t.notifyOnChanges()}return!0}return!1}function ua(t,e,n,r){const i=Vt();if(i.firstCreatePass){const o=qt();(function(t,e,n){null===t.queries&&(t.queries=new ea),t.queries.track(new na(e,n))})(i,new ta(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Js(4==(4&n));ai(t,e,r,r.destroy),null===e[19]&&(e[19]=new Xs),e[19].queries.push(new Ys(r))}(i,jt(),n)}function ca(){return t=jt(),e=Jt(),t[19].queries[e].queryList;var t,e}function la(t,e){return t.queries.getByIndex(e)}const ha=new Ke("Application Initializer");let fa=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Uo,this.reject=Uo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(po(e))t.push(e);else if(mo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(cn(ha,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const da=new Ke("AppId"),pa={provide:da,useFactory:function(){return`${ga()}${ga()}${ga()}`},deps:[]};function ga(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ma=new Ke("Platform Initializer"),ya=new Ke("Platform ID"),va=new Ke("appBootstrapListener");let ba=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const wa=new Ke("LocaleId"),_a=new Ke("DefaultCurrencyCode");class Sa{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Ta=function(t){return new Ms(t)},Ea=Ta,Ia=function(t){return Promise.resolve(Ta(t))},Ca=function(t){const e=Ta(t),n=cr(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new Ps(n)),t},[]);return new Sa(e,n)},xa=Ca,Aa=function(t){return Promise.resolve(Ca(t))};let ka=(()=>{class t{constructor(){this.compileModuleSync=Ea,this.compileModuleAsync=Ia,this.compileModuleAndAllComponentsSync=xa,this.compileModuleAndAllComponentsAsync=Aa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Ra=(()=>Promise.resolve(0))();function Oa(t){"undefined"==typeof Zone?Ra.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Na{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ws(!1),this.onMicrotaskEmpty=new Ws(!1),this.onStable=new Ws(!1),this.onError=new Ws(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,La(t),t.isCheckStableRunning=!0,Pa(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),La(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Fa(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Ua(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Fa(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ua(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,La(t),Pa(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Na.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Na.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Da,Uo,Uo);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Da={};function Pa(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function La(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Fa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ua(t){t._nesting--,Pa(t)}class Ma{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ws,this.onMicrotaskEmpty=new Ws,this.onStable=new Ws,this.onError=new Ws}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ja=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Na.assertNotInAngularZone(),Oa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Oa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(cn(Na))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),Va=(()=>{class t{constructor(){this._applications=new Map,za.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return za.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class qa{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Ga(t){za=t}let Ba,za=new qa,Ha=!0,$a=!1;function Za(){return $a=!0,Ha}function Ka(){if($a)throw new Error("Cannot enable prod mode after platform setup.");Ha=!1}const Wa=new Ke("AllowMultipleToken");class Qa{constructor(t,e){this.name=t,this.token=e}}function Ja(t,e,n=[]){const r=`Platform: ${e}`,i=new Ke(r);return(e=[])=>{let o=Ya();if(!o||o.injector.get(Wa,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ui,useValue:"platform"});!function(t){if(Ba&&!Ba.destroyed&&!Ba.injector.get(Wa,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ba=t.get(Xa);const e=t.get(ma,null);e&&e.forEach(t=>t())}(Wi.create({providers:t,name:r}))}return function(t){const e=Ya();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Ya(){return Ba&&!Ba.destroyed?Ba:null}let Xa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ma:("zone.js"===t?void 0:t)||new Na({enableLongStackTrace:Za(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Na,useValue:n}];return n.run(()=>{const e=Wi.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(ar,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{nu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return po(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(fa);return t.runInitializers(),t.donePromise.then(()=>(Do(i.injector.get(wa,Oo)||Oo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=tu({},e);return function(t,e,n){const r=new Ms(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(eu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${h(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(cn(Wi))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function tu(t,e){return Array.isArray(e)?e.reduce(tu,t):Object.assign(Object.assign({},t),e)}let eu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Na.assertNotInAngularZone(),Oa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Na.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(l,h.pipe(t=>{return(0,u.x)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Po?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(_s),i=n.create(Wi.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ja,null),a=s&&i.injector.get(Va);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),nu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;nu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(va,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(cn(Na),cn(Wi),cn(ar),cn(Fo),cn(fa))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function nu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ru{}class iu{}const ou={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let su=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||ou}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>au(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>au(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(cn(ka),cn(iu,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function au(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const uu=function(t){return null},cu=Ja(null,"core",[{provide:ya,useValue:"unknown"},{provide:Xa,deps:[Wi]},{provide:Va,deps:[]},{provide:ba,deps:[]}]),lu=[{provide:eu,useClass:eu,deps:[Na,Wi,ar,Fo,fa]},{provide:Ds,deps:[Na],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:fa,useClass:fa,deps:[[new dn,ha]]},{provide:ka,useClass:ka,deps:[]},pa,{provide:os,useFactory:function(){return ps},deps:[]},{provide:as,useFactory:function(){return gs},deps:[]},{provide:wa,useFactory:function(t){return Do(t=t||"undefined"!=typeof $localize&&$localize.locale||Oo),t},deps:[[new fn(wa),new dn,new pn]]},{provide:_a,useValue:"USD"}];let hu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(cn(eu))},t.\u0275mod=et({type:t}),t.\u0275inj=_({providers:lu}),t})()},2346:(t,e,n)=>{"use strict";n.d(e,{hO:()=>x,xv:()=>b,Dh:()=>v,Ot:()=>w,HU:()=>d,GT:()=>y,sI:()=>I,on:()=>S,ss:()=>p,pX:()=>m,yq:()=>T});var r=n(8489),i=n(8569),o=n(6599),s=n(4187),a=n(9098),u=n(7368),c=n(1858);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig");class w{}const _=new u.GfV("6.1.5");function S(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const T=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function I(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:w,useFactory:S,deps:[v,u.R0b,[new u.FiY,b]]};let x=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",_.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[C]}),t})()},1062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,o=n(4762),s=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.28",void 0),t.registerVersion("fire-js","")}(w);const _=w},5119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u});var r=n(4762),i=n(250),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>f,Am:()=>d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>S,ZR:()=>_,zI:()=>w,$s:()=>k,r3:()=>I,Sg:()=>u,ne:()=>C,p$:()=>o,ZB:()=>s,m9:()=>R,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>g,w1:()=>m,hl:()=>v,uI:()=>l,UG:()=>h,b$:()=>p,Mn:()=>y,eu:()=>b});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}function v(){return"indexedDB"in self&&null!=indexedDB}function b(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function w(){return!(!navigator||!navigator.cookieEnabled)}var _=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new _(i,a,r);return u},t}();function T(t,e){return t.replace(E,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var E=/\{\$([^}]+)}/g;function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function C(t,e){var n=new x(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var x=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function A(){}function k(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function R(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(1062),i="8.7.1";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),o=n(7498),s=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(1484),i=n(4294);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),o=n(7570),s=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),o=n(7570),s=n(5331),a=n(1484),u=n(4294);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),o=n(5024);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,o.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),o=n(6015);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2875:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),o=n(7570),s=n(1564);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},653:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(8318);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),o=n(7570),s=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(8318),i=n(625),o=n(2570);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),o=n(7471),s=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(6163),i=n(9342),o=n(2570);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},7471:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(3982),i=n(3392);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},3982:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(9996),i=n(9764),o=n(6882);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9098:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),o=n(878),s=n(8318);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1564:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(6673);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},4187:(t,e,n)=>{"use strict";n.d(e,{R:()=>m});var r=n(8318);let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(8277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(1098);class f extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n(8470);class g extends r.y{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,p.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},6599:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(6673);function i(){}var o=n(5024);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(8318),i=n(7570);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>o});var r=n(8277);const i=new(n(1098).v)(r.o),o=i},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n(1098);class s extends o.v{}const a=new s(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),o=n(5686),s=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},7212:(t,e,n)=>{"use strict";var r=n(7368);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l((0,r.LFG)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(s).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(T(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,T(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new _((0,r.LFG)(m),(0,r.LFG)(a))}function T(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),I=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),C=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function x(t,e){const n=(0,r.cg1)(t),i=n[r.wAp.NumberSymbols][e];if(void 0===i){if(e===C.CurrencyDecimal)return n[r.wAp.NumberSymbols][C.Decimal];if(e===C.CurrencyGroup)return n[r.wAp.NumberSymbols][C.Group]}return i}const A=r.kL8,k=/^(\d+)?\.((\d+)(-(\d+))?)?$/,R=".",O="0";function N(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class D{}let P=(()=>{class t extends D{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(A(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),L=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class F{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let U=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(nv){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new F(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new M(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new M(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class M{constructor(t,e){this.record=t,this.view=e}}let j=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.aQg),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})();function V(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,r.AaK)(t)}'`)}class q{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class G{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const B=new G,z=new q;let H=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if((0,r.QGY)(e))return B;if((0,r.F4k)(e))return z;throw V(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO,16))},t.\u0275pipe=r.Yjl({name:"async",type:t,pure:!1}),t})(),$=(()=>{class t{constructor(t){this._locale=t}transform(e,n,i){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;i=i||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,o,s=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf(R))>-1&&(s=s.replace(R,"")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;s.charAt(r)===O;r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;s.charAt(o)===O;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,f=e.maxFrac;if(o){const t=o.match(k);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(l=N(e)),null!=n&&(h=N(n)),null!=r?f=N(r):null!=n&&h>f&&(f=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const c=e+t.integerLen,l=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0},0);l&&(r.unshift(l),t.integerLen++)}(c,h,f);let d=c.digits,p=c.integerLen;const g=c.exponent;let m=[];for(u=d.every(t=>!t);p<l;p++)d.unshift(0);for(;p<0;p++)d.unshift(0);p>0?m=d.splice(p,d.length):(m=d,d=[0]);const y=[];for(d.length>=e.lgSize&&y.unshift(d.splice(-e.lgSize,d.length).join(""));d.length>e.gSize;)y.unshift(d.splice(-e.gSize,d.length).join(""));d.length&&y.unshift(d.join("")),a=y.join(x(n,r)),m.length&&(a+=x(n,i)+m.join("")),g&&(a+=x(n,C.Exponential)+"+"+g)}else a=x(n,C.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(R)?i.split(R):[i.substring(0,i.lastIndexOf(O)+1),i.substring(i.lastIndexOf(O)+1)],a=s[0],u=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);t===O?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return(0,r.cg1)(t)[r.wAp.NumberFormats][e]}(e,E.Decimal),x(e,C.MinusSign)),e,C.Group,C.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),i,n)}catch(o){throw V(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.soG,16))},t.\u0275pipe=r.Yjl({name:"number",type:t,pure:!0}),t})(),Z=(()=>{class t{transform(e,n,r){if(null==e)return null;if(!this.supports(e))throw V(t,e);return e.slice(n,r)}supports(t){return"string"==typeof t||Array.isArray(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Yjl({name:"slice",type:t,pure:!1}),t})(),K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:D,useClass:P}]}),t})();function W(t){return"browser"===t}function Q(t){return"server"===t}let J=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new Y((0,r.LFG)(s),window)}),t})();class Y{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=X(this.window.history)||X(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(nv){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(nv){return!1}}}function X(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class tt extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new tt,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(nt=nt||document.querySelector("base"),nt?nt.getAttribute("href"):null);return null==e?null:function(t){et=et||document.createElement("a"),et.setAttribute("href",t);const e=et.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){nt=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let et,nt=null;const rt=new r.OlP("TRANSITION_ID"),it=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[rt,s,r.zs3],multi:!0}];class ot{static init(){(0,r.VLi)(new ot)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let st=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const at=new r.OlP("EventManagerPlugins");let ut=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(at),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ct{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let lt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ht=(()=>{class t extends lt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(ft),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ft))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function ft(t){o().remove(t)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pt=/%COMP%/g;function gt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?gt(t,i,n):(i=i.replace(pt,t),n.push(i))}return n}function mt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let yt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new vt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new bt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new wt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=gt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ut),r.LFG(ht),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class vt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(dt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=dt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=dt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,mt(n)):this.eventManager.addEventListener(t,e,mt(n))}}class bt extends vt{constructor(t,e,n,r){super(t),this.component=n;const i=gt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(pt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(pt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class wt extends vt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=gt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let _t=(()=>{class t extends ct{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const St=["alt","control","meta","shift"],Tt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Et={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},It={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ct=(()=>{class t extends ct{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(St.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Et.hasOwnProperty(e)&&(e=Et[e]))}return Tt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),St.forEach(r=>{r!=n&&(0,It[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const xt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){tt.makeCurrent(),ot.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),At=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:at,useClass:_t,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:at,useClass:Ct,multi:!0,deps:[s]},[],{provide:yt,useClass:yt,deps:[ut,ht,r.AFp]},{provide:r.FYo,useExisting:yt},{provide:lt,useExisting:ht},{provide:ht,useClass:ht,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:ut,useClass:ut,deps:[at,r.R0b]},{provide:class{},useClass:st,deps:[]},[]];let kt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:rt,useExisting:r.AFp},it]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:At,imports:[K,r.hGG]}),t})();function Rt(){return new Ot((0,r.LFG)(s))}let Ot=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:Rt,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var Nt=n(9764),Dt=n(878),Pt=n(5959),Lt=n(3895);class Ft extends Pt.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Lt.N;return this._value}next(t){super.next(this._value=t)}}var Ut=n(6163),Mt=n(8470),jt=n(6673);class Vt extends jt.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class qt extends jt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Gt=n(6015),Bt=n(8318);function zt(t,e,n,r,i=new qt(t,n,r)){if(!i.closed)return e instanceof Bt.y?e.subscribe(i):(0,Gt.s)(e)(i)}var Ht=n(9342);const $t={};class Zt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Kt(t,this.resultSelector))}}class Kt extends Vt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push($t),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(zt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===$t?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Wt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Qt=n(7471);function Jt(...t){return(0,Qt.J)(1)((0,Dt.of)(...t))}var Yt=n(653);function Xt(t){return new Bt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,Nt.D)(n):(0,Yt.c)()).subscribe(e)})}var te=n(2875),ee=n(9996),ne=n(6882);function re(t,e){return"function"==typeof e?n=>n.pipe(re((n,r)=>(0,Nt.D)(t(n,r)).pipe((0,ee.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new ie(t))}class ie{constructor(t){this.project=t}call(t,e){return e.subscribe(new oe(t,this.project))}}class oe extends ne.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new ne.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,ne.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const se=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function ae(t){return e=>0===t?(0,Yt.c)():e.lift(new ue(t))}class ue{constructor(t){if(this.total=t,this.total<0)throw new se}call(t,e){return e.subscribe(new ce(t,this.total))}}class ce extends jt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function le(...t){const e=t[t.length-1];return(0,Ut.K)(e)?(t.pop(),n=>Jt(t,n,e)):e=>Jt(t,e)}function he(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new fe(t,e,n))}}class fe{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new de(t,this.accumulator,this.seed,this.hasSeed))}}class de extends jt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function pe(t,e){return function(n){return n.lift(new ge(t,e))}}class ge{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new me(t,this.predicate,this.thisArg))}}class me extends jt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function ye(t){return function(e){const n=new ve(t),r=e.lift(n);return n.caught=r}}class ve{constructor(t){this.selector=t}call(t,e){return e.subscribe(new be(t,this.selector,this.caught))}}class be extends ne.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new ne.IY(this);this.add(r);const i=(0,ne.ft)(n,r);i!==r&&this.add(i)}}}var we=n(3982);function _e(t,e){return(0,we.zg)(t,e,1)}function Se(t){return function(e){return 0===t?(0,Yt.c)():e.lift(new Te(t))}}class Te{constructor(t){if(this.total=t,this.total<0)throw new se}call(t,e){return e.subscribe(new Ee(t,this.total))}}class Ee extends jt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ie(t=Ae){return e=>e.lift(new Ce(t))}class Ce{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new xe(t,this.errorFactory))}}class xe extends jt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(yb){t=yb}this.destination.error(t)}}}function Ae(){return new Wt}function ke(t=null){return e=>e.lift(new Re(t))}class Re{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Oe(t,this.defaultValue))}}class Oe extends jt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Ne=n(3392);function De(t,e){const n=arguments.length>=2;return r=>r.pipe(t?pe((e,n)=>t(e,n,r)):Ne.y,ae(1),n?ke(e):Ie(()=>new Wt))}var Pe=n(6599),Le=n(1564),Fe=n(7570);function Ue(t){return e=>e.lift(new Me(t))}class Me{constructor(t){this.callback=t}call(t,e){return e.subscribe(new je(t,this.callback))}}class je extends jt.L{constructor(t,e){super(t),this.add(new Fe.w(e))}}class Ve{constructor(t,e){this.id=t,this.url=e}}class qe extends Ve{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ge extends Ve{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Be extends Ve{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ze extends Ve{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class He extends Ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $e extends Ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ze extends Ve{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ke extends Ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class We extends Ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qe{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Je{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ye{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xe{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class en{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const rn="primary";class on{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function sn(t){return new on(t)}function an(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function un(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function cn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ln(t[i],e[i]))return!1;return!0}function ln(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function hn(t){return Array.prototype.concat.apply([],t)}function fn(t){return t.length>0?t[t.length-1]:null}function dn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function pn(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,Nt.D)(Promise.resolve(t)):(0,Dt.of)(t)}const gn={exact:function t(e,n,r){if(!En(e.segments,n.segments))return!1;if(!wn(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:vn},mn={exact:function(t,e){return cn(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ln(t[n],e[n]))},ignored:()=>!0};function yn(t,e,n){return gn[n.paths](t.root,e.root,n.matrixParams)&&mn[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function vn(t,e,n){return bn(t,e,e.segments,n)}function bn(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!En(i,n)&&!e.hasChildren()&&!!wn(i,n,r)}if(t.segments.length===n.length){if(!En(t.segments,n))return!1;if(!wn(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!vn(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!En(t.segments,i)&&!!wn(t.segments,i,r)&&!!t.children.primary&&bn(t.children.primary,e,o,r)}}function wn(t,e,n){return e.every((e,r)=>mn[n](t[r].parameters,e.parameters))}class _n{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sn(this.queryParams)),this._queryParamMap}toString(){return xn.serialize(this)}}class Sn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,dn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return An(this)}}class Tn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=sn(this.parameters)),this._parameterMap}toString(){return Ln(this)}}function En(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class In{}class Cn{parse(t){const e=new Vn(t);return new _n(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${kn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${On(e)}=${On(t)}`).join("&"):`${On(e)}=${On(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const xn=new Cn;function An(t){return t.segments.map(t=>Ln(t)).join("/")}function kn(t,e){if(!t.hasChildren())return An(t);if(e){const e=t.children.primary?kn(t.children.primary,!1):"",n=[];return dn(t.children,(t,e)=>{e!==rn&&n.push(`${e}:${kn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return dn(t.children,(t,r)=>{r===rn&&(n=n.concat(e(t,r)))}),dn(t.children,(t,r)=>{r!==rn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===rn?[kn(t.children.primary,!1)]:[`${n}:${kn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${An(t)}/${e[0]}`:`${An(t)}/(${e.join("//")})`}}function Rn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function On(t){return Rn(t).replace(/%3B/gi,";")}function Nn(t){return Rn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dn(t){return decodeURIComponent(t)}function Pn(t){return Dn(t.replace(/\+/g,"%20"))}function Ln(t){return`${Nn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Nn(t)}=${Nn(e[t])}`).join("")}`;var e}const Fn=/^[^\/()?;=#]+/;function Un(t){const e=t.match(Fn);return e?e[0]:""}const Mn=/^[^=?&#]+/,jn=/^[^?&#]+/;class Vn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Sn([],{}):new Sn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Sn(t,e)),n}parseSegment(){const t=Un(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Tn(Dn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Un(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Un(this.remaining);t&&(n=t,this.capture(n))}t[Dn(e)]=Dn(n)}parseQueryParam(t){const e=function(t){const e=t.match(Mn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(jn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Pn(e),i=Pn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Un(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=rn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Sn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class qn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Gn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Gn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Bn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Bn(t,this._root).map(t=>t.value)}}function Gn(t,e){if(t===e.value)return e;for(const n of e.children){const e=Gn(t,n);if(e)return e}return null}function Bn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Bn(t,n);if(r.length)return r.unshift(e),r}return[]}class zn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Hn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class $n extends qn{constructor(t,e){super(t),this.snapshot=e,Yn(this,t)}toString(){return this.snapshot.toString()}}function Zn(t,e){const n=function(t,e){const n=new Qn([],{},{},"",{},rn,e,null,t.root,-1,{});return new Jn("",new zn(n,[]))}(t,e),r=new Ft([new Tn("",{})]),i=new Ft({}),o=new Ft({}),s=new Ft({}),a=new Ft(""),u=new Kn(r,i,s,a,o,rn,e,n.root);return u.snapshot=n.root,new $n(new zn(u,[]),n)}class Kn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ee.U)(t=>sn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ee.U)(t=>sn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Wn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Qn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jn extends qn{constructor(t,e){super(e),this.url=t,Yn(this,e)}toString(){return Xn(this._root)}}function Yn(t,e){e.value._routerState=t,e.children.forEach(e=>Yn(t,e))}function Xn(t){const e=t.children.length>0?` { ${t.children.map(Xn).join(", ")} } `:"";return`${t.value}${e}`}function tr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,cn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),cn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!cn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),cn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function er(t,e){return cn(t.params,e.params)&&function(t,e){return En(t,e)&&t.every((t,n)=>cn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||er(t.parent,e.parent))}function nr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return nr(t,e,r);return nr(t,e)})}(t,e,n);return new zn(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return rr(e,t),t}}const n=new Kn(new Ft((r=e.value).url),new Ft(r.params),new Ft(r.queryParams),new Ft(r.fragment),new Ft(r.data),r.outlet,r.component,r),i=e.children.map(e=>nr(t,e));return new zn(n,i)}var r}function rr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)rr(t.children[n],e.children[n])}function ir(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function or(t){return"object"==typeof t&&null!=t&&t.outlets}function sr(t,e,n,r,i){let o={};return r&&dn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new _n(n.root===t?e:ar(n.root,t,e),o,i)}function ar(t,e,n){const r={};return dn(t.children,(t,i)=>{r[i]=t===e?n:ar(t,e,n)}),new Sn(t.segments,r)}class ur{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ir(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(or);if(r&&r!==fn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function lr(t,e,n){if(t||(t=new Sn([],{})),0===t.segments.length&&t.hasChildren())return hr(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(or(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!gr(a,u,e))return o;r+=2}else{if(!gr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Sn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Sn(t.segments.slice(r.pathIndex),t.children),hr(e,0,i)}return r.match&&0===i.length?new Sn(t.segments,{}):r.match&&!t.hasChildren()?fr(t,e,n):r.match?hr(t,0,i):fr(t,e,n)}function hr(t,e,n){if(0===n.length)return new Sn(t.segments,{});{const r=function(t){return or(t[0])?t[0].outlets:{[rn]:t}}(n),i={};return dn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=lr(t.children[r],e,n))}),dn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Sn(t.segments,i)}}function fr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(or(o)){const t=dr(o.outlets);return new Sn(r,t)}if(0===i&&ir(n[0])){r.push(new Tn(t.segments[e].path,pr(n[0]))),i++;continue}const s=or(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ir(a)?(r.push(new Tn(s,pr(a))),i+=2):(r.push(new Tn(s,{})),i++)}return new Sn(r,{})}function dr(t){const e={};return dn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=fr(new Sn([],{}),0,t))}),e}function pr(t){const e={};return dn(t,(t,n)=>e[n]=`${t}`),e}function gr(t,e,n){return t==n.path&&cn(e,n.parameters)}class mr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),tr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Hn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),dn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Hn(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Hn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new en(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Xe(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(tr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),yr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function yr(t){tr(t.value),t.children.forEach(yr)}class vr{constructor(t,e){this.routes=t,this.module=e}}function br(t){return"function"==typeof t}function wr(t){return t instanceof _n}const _r=Symbol("INITIAL_VALUE");function Sr(){return re(t=>function(...t){let e,n;return(0,Ut.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Mt.k)(t[0])&&(t=t[0]),(0,Ht.n)(t,n).lift(new Zt(e))}(t.map(t=>t.pipe(ae(1),le(_r)))).pipe(he((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==_r)return t;if(r===_r&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||wr(r))return r}return t},t)},_r),pe(t=>t!==_r),(0,ee.U)(t=>wr(t)?t:!0===t),ae(1)))}let Tr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[_i]},encapsulation:2}),t})();function Er(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Ir(r,Cr(e,r))}}function Ir(t,e){t.children&&Er(t.children,e)}function Cr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function xr(t){const e=t.children&&t.children.map(xr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==rn&&(n.component=Tr),n}function Ar(t){return t.outlet||rn}function kr(t,e){const n=t.filter(t=>Ar(t)===e);return n.push(...t.filter(t=>Ar(t)!==e)),n}const Rr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Or(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Rr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||un)(n,t,e);if(!i)return Object.assign({},Rr);const o={};dn(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Nr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Dr(t,e,n)&&Ar(n)!==rn)}(t,n,r)){const i=new Sn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Ar(o)!==rn){const n=new Sn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ar(o)]=n}return i}(t,e,r,new Sn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Dr(t,e,n))}(t,n,r)){const o=new Sn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Dr(t,n,a)&&!i[Ar(a)]){const n=new Sn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Ar(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Sn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Dr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Pr(t,e,n,r){return!!(Ar(t)===r||r!==rn&&Dr(e,n,t))&&("**"===t.path||Or(e,t,n).matched)}function Lr(t,e,n){return 0===e.length&&!t.children[n]}class Fr{constructor(t){this.segmentGroup=t||null}}class Ur{constructor(t){this.urlTree=t}}function Mr(t){return new Bt.y(e=>e.error(new Fr(t)))}function jr(t){return new Bt.y(e=>e.error(new Ur(t)))}function Vr(t){return new Bt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class qr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=Nr(this.urlTree.root,[],[],this.config).segmentGroup,e=new Sn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,rn).pipe((0,ee.U)(t=>this.createUrlTree(Gr(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ye(t=>{if(t instanceof Ur)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Fr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,rn).pipe((0,ee.U)(e=>this.createUrlTree(Gr(e),t.queryParams,t.fragment))).pipe(ye(t=>{if(t instanceof Fr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Sn([],{[rn]:t}):t;return new _n(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,ee.U)(t=>new Sn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Nt.D)(r).pipe(_e(r=>{const i=n.children[r],o=kr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,ee.U)(t=>({segment:t,outlet:r})))}),he((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?pe((e,n)=>t(e,n,r)):Ne.y,Se(1),n?ke(e):Ie(()=>new Wt))}())}expandSegment(t,e,n,r,i,o){return(0,Nt.D)(n).pipe(_e(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(ye(t=>{if(t instanceof Fr)return(0,Dt.of)(null);throw t}))),De(t=>!!t),ye((t,n)=>{if(t instanceof Wt||"EmptyError"===t.name){if(Lr(e,r,i))return(0,Dt.of)(new Sn([],{}));throw new Fr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Pr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Mr(e):Mr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?jr(i):this.lineralizeSegments(n,i).pipe((0,we.zg)(n=>{const i=new Sn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Or(e,r,i);if(!s)return Mr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?jr(l):this.lineralizeSegments(r,l).pipe((0,we.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Dt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,ee.U)(t=>(n._loadedConfig=t,new Sn(r,{})))):(0,Dt.of)(new Sn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Or(e,n,r);if(!o)return Mr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,we.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Nr(e,s,u,o),l=new Sn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,ee.U)(t=>new Sn(s,t)));if(0===o.length&&0===c.length)return(0,Dt.of)(new Sn(s,{}));const h=Ar(n)===i;return this.expandSegment(r,l,o,c,h?rn:i,!0).pipe((0,ee.U)(t=>new Sn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,Dt.of)(new vr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Dt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,we.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,ee.U)(t=>(e._loadedConfig=t,t))):function(t){return new Bt.y(e=>e.error(an(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,Dt.of)(new vr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,Dt.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&br(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!br(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return pn(o)});return(0,Dt.of)(i).pipe(Sr(),(0,Pe.b)(t=>{if(!wr(t))return;const e=an(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,ee.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Dt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Vr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new _n(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return dn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return dn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Sn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Gr(t){const e={};for(const n of Object.keys(t.children)){const r=Gr(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Sn(t.segments.concat(e.segments),e.children)}return t}(new Sn(t.segments,e))}class Br{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class zr{constructor(t,e){this.component=t,this.route=e}}function Hr(t,e,n){const r=t._root;return Zr(r,e?e._root:null,n,[r.value])}function $r(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Zr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Hn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!En(t.url,e.url);case"pathParamsOrQueryParamsChange":return!En(t.url,e.url)||!cn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!er(t,e)||!cn(t.queryParams,e.queryParams);case"paramsChange":default:return!er(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Br(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Zr(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zr(a.outlet.component,s))}else s&&Kr(e,a,i),i.canActivateChecks.push(new Br(r)),Zr(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),dn(o,(t,e)=>Kr(t,n.getContext(e),i)),i}function Kr(t,e,n){const r=Hn(t),i=t.value;dn(r,(t,r)=>{Kr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new zr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Wr{}function Qr(t){return new Bt.y(e=>e.error(t))}class Jr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Nr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,rn);if(null===e)return null;const n=new Qn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},rn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new zn(n,e),i=new Jn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Wn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=kr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Xr(n);return r.sort((t,e)=>t.value.outlet===rn?-1:e.value.outlet===rn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Lr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Pr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?fn(n).parameters:{};i=new Qn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ni(t),Ar(t),t.component,t,ti(e),ei(e)+n.length,ri(t))}else{const r=Or(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Qn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ni(t),Ar(t),t.component,t,ti(e),ei(e)+o.length,ri(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Nr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new zn(i,t)]}if(0===a.length&&0===c.length)return[new zn(i,[])];const l=Ar(t)===r,h=this.processSegment(a,u,c,l?rn:r);return null===h?null:[new zn(i,h)]}}function Yr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Xr(t){const e=[],n=new Set;for(const r of t){if(!Yr(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Xr(r.children);e.push(new zn(r.value,t))}return e.filter(t=>!n.has(t))}function ti(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ei(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ni(t){return t.data||{}}function ri(t){return t.resolve||{}}function ii(t){return re(e=>{const n=t(e);return n?(0,Nt.D)(n).pipe((0,ee.U)(()=>e)):(0,Dt.of)(e)})}class oi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const si=new r.OlP("ROUTES");class ai{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,ee.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new vr(hn(i.injector.get(si,void 0,r.XFs.Self|r.XFs.Optional)).map(xr),i)}),ye(t=>{throw e._loader$=void 0,t}));return e._loader$=new te.c(n,()=>new Pt.xQ).pipe((0,Le.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Nt.D)(this.loader.load(t)):pn(t()).pipe((0,we.zg)(t=>t instanceof r.YKP?(0,Dt.of)(t):(0,Nt.D)(this.compiler.compileModuleAsync(t))))}}class ui{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ci,this.attachRef=null}}class ci{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new ui,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class li{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function hi(t){throw t}function fi(t,e,n){return e.parse("/")}function di(t,e){return(0,Dt.of)(null)}const pi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mi=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Pt.xQ,this.errorHandler=hi,this.malformedUriErrorHandler=fi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:di,afterPreactivation:di},this.urlHandlingStrategy=new li,this.routeReuseStrategy=new oi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new _n(new Sn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ai(s,a,t=>this.triggerEvent(new Qe(t)),t=>this.triggerEvent(new Je(t))),this.routerState=Zn(this.currentUrlTree,this.rootComponentType),this.transitions=new Ft({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(pe(t=>0!==t.id),(0,ee.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),re(t=>{let n=!1,r=!1;return(0,Dt.of)(t).pipe((0,Pe.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),re(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,Dt.of)(t).pipe(re(t=>{const n=this.transitions.getValue();return e.next(new qe(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Yt.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,re(t=>function(t,e,n,r,i){return new qr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,ee.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,Pe.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,we.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Jr(t,e,n,r,i,o).recognize();return null===s?Qr(new Wr):(0,Dt.of)(s)}catch(yb){return Qr(yb)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,ee.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Pe.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new He(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new qe(n,this.serializeUrl(r),i,o);e.next(a);const u=Zn(r,this.rootComponentType).snapshot;return(0,Dt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Yt.E}),ii(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Pe.b)(t=>{const e=new $e(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,ee.U)(t=>Object.assign(Object.assign({},t),{guards:Hr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,we.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,Dt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Nt.D)(t).pipe((0,we.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,Dt.of)(!0);const s=o.map(o=>{const s=$r(o,e,i);let a;if(function(t){return t&&br(t.canDeactivate)}(s))a=pn(s.canDeactivate(t,e,n,r));else{if(!br(s))throw new Error("Invalid CanDeactivate guard");a=pn(s(t,e,n,r))}return a.pipe(De())});return(0,Dt.of)(s).pipe(Sr())}(t.component,t.route,n,e,r)),De(t=>!0!==t,!0))}(s,r,i,t).pipe((0,we.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,Nt.D)(e).pipe(_e(e=>Jt(function(t,e){return null!==t&&e&&e(new Ye(t)),(0,Dt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new tn(t)),(0,Dt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Xt(()=>{const i=e.guards.map(i=>{const o=$r(i,e.node,n);let s;if(function(t){return t&&br(t.canActivateChild)}(o))s=pn(o.canActivateChild(r,t));else{if(!br(o))throw new Error("Invalid CanActivateChild guard");s=pn(o(r,t))}return s.pipe(De())});return(0,Dt.of)(i).pipe(Sr())}));return(0,Dt.of)(i).pipe(Sr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Dt.of)(!0);const i=r.map(r=>Xt(()=>{const i=$r(r,e,n);let o;if(function(t){return t&&br(t.canActivate)}(i))o=pn(i.canActivate(e,t));else{if(!br(i))throw new Error("Invalid CanActivate guard");o=pn(i(e,t))}return o.pipe(De())}));return(0,Dt.of)(i).pipe(Sr())}(t,e.route,n))),De(t=>!0!==t,!0))}(r,o,t,e):(0,Dt.of)(n)),(0,ee.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,Pe.b)(t=>{if(wr(t.guardsResult)){const e=an(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Ze(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),pe(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),ii(t=>{if(t.guards.canActivateChecks.length)return(0,Dt.of)(t).pipe((0,Pe.b)(t=>{const e=new Ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),re(t=>{let e=!1;return(0,Dt.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,we.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Dt.of)(t);let o=0;return(0,Nt.D)(i).pipe(_e(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,Dt.of)({});const o={};return(0,Nt.D)(i).pipe((0,we.zg)(i=>function(t,e,n,r){const i=$r(t,e,r);return pn(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,Pe.b)(t=>{o[i]=t}))),Se(1),(0,we.zg)(()=>Object.keys(o).length===i.length?(0,Dt.of)(o):Yt.E))}(t._resolve,t,e,r).pipe((0,ee.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Wn(t,n).resolve),null)))}(t.route,e,n,r)),(0,Pe.b)(()=>o++),Se(1),(0,we.zg)(e=>o===i.length?(0,Dt.of)(t):Yt.E))})),(0,Pe.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,Pe.b)(t=>{const e=new We(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),ii(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,ee.U)(t=>{const e=function(t,e,n){const r=nr(t,e._root,n?n._root:void 0);return new $n(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,Pe.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),(0,ee.U)(t=>(new mr(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),(0,Pe.b)({next(){n=!0},complete(){n=!0}}),Ue(()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null}),ye(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=wr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Be(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new ze(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(ql){t.reject(ql)}}var i;return Yt.E}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Er(t),this.config=t.map(xr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return sr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ur(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return dn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new ur(n,e,r)}(n);if(o.toRoot())return sr(e.root,new Sn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new cr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new cr(t,t===e.root,0)}const r=ir(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new cr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?hr(s.segmentGroup,s.index,o.commands):lr(s.segmentGroup,s.index,o.commands);return sr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=wr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(yb){e=this.malformedUriErrorHandler(yb,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},pi):!1===e?Object.assign({},gi):e,wr(t))return yn(this.currentUrlTree,t,n);const r=this.parseUrl(t);return yn(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ge(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let f;return f="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:f,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Be(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(In),r.LFG(ci),r.LFG(_),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),yi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Pt.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:bi(this.skipLocationChange),replaceUrl:bi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:bi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(mi),r.Y36(Kn),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})(),vi=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new Pt.xQ,this.subscription=t.events.subscribe(t=>{t instanceof Ge&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:bi(this.skipLocationChange),replaceUrl:bi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:bi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(mi),r.Y36(Kn),r.Y36(m))},t.\u0275dir=r.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ikx("href",e.href,r.LSH),r.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function bi(t){return""===t||!!t}let wi=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof Ge&&this.update()})}ngAfterContentInit(){(0,Dt.of)(this.links.changes,this.linksWithHrefs.changes,(0,Dt.of)(null)).pipe((0,Qt.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=(0,Nt.D)(e).pipe((0,Qt.J)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){const e="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>t.isActive(n.urlTree,e)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(mi),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(yi,8),r.Y36(vi,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Suo(n,yi,5),r.Suo(n,vi,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.links=t),r.iGM(t=r.CRH())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.TTD]}),t})(),_i=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||rn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Si(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ci),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Si{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Kn?this.route:t===ci?this.childContexts:this.parent.get(t,e)}}class Ti{}class Ei{preload(t,e){return(0,Dt.of)(null)}}let Ii=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ai(e,n,e=>t.triggerEvent(new Qe(e)),e=>t.triggerEvent(new Je(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(pe(t=>t instanceof Ge),_e(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,Nt.D)(n).pipe((0,Qt.J)(),(0,ee.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,Dt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,we.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(mi),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(Ti))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Ci=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ge&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof nn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new nn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(mi),r.LFG(J),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const xi=new r.OlP("ROUTER_CONFIGURATION"),Ai=new r.OlP("ROUTER_FORROOT_GUARD"),ki=[_,{provide:In,useClass:Cn},{provide:mi,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new mi(null,t,e,n,r,i,o,hn(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[In,ci,_,r.zs3,r.v3s,r.Sil,si,xi,[class{},new r.FiY],[class{},new r.FiY]]},ci,{provide:Kn,useFactory:function(t){return t.routerState.root},deps:[mi]},{provide:r.v3s,useClass:r.EAV},Ii,Ei,class{preload(t,e){return e().pipe(ye(()=>(0,Dt.of)(null)))}},{provide:xi,useValue:{enableTracing:!1}}];function Ri(){return new r.PXZ("Router",mi)}let Oi=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ki,Li(e),{provide:Ai,useFactory:Pi,deps:[[mi,new r.FiY,new r.tp0]]},{provide:xi,useValue:n||{}},{provide:m,useFactory:Di,deps:[a,[new r.tBr(v),new r.FiY],xi]},{provide:Ci,useFactory:Ni,deps:[mi,J,xi]},{provide:Ti,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ei},{provide:r.PXZ,multi:!0,useFactory:Ri},[Fi,{provide:r.ip1,multi:!0,useFactory:Ui,deps:[Fi]},{provide:ji,useFactory:Mi,deps:[Fi]},{provide:r.tb,multi:!0,useExisting:ji}]]}}static forChild(e){return{ngModule:t,providers:[Li(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ai,8),r.LFG(mi,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function Ni(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Ci(t,e,n)}function Di(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function Pi(t){return"guarded"}function Li(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:si,multi:!0,useValue:t}]}let Fi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Pt.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(mi),r=this.injector.get(xi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Dt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(xi),n=this.injector.get(Ii),i=this.injector.get(Ci),o=this.injector.get(mi),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Ui(t){return t.appInitializer.bind(t)}function Mi(t){return t.bootstrapListener.bind(t)}const ji=new r.OlP("Router Initializer");let Vi=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-navbar"]],decls:14,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],["routerLinkActive","active",1,"nav-item"],["aria-current","page","routerLink","/fotos",1,"nav-link"],["routerLink","/carga",1,"nav-link"]],template:function(t,e){1&t&&(r.TgZ(0,"nav",0),r.TgZ(1,"div",1),r.TgZ(2,"a",2),r._uU(3,"FotosFirebase"),r.qZA(),r.TgZ(4,"button",3),r._UZ(5,"span",4),r.qZA(),r.TgZ(6,"div",5),r.TgZ(7,"ul",6),r.TgZ(8,"li",7),r.TgZ(9,"a",8),r._uU(10,"Fotos"),r.qZA(),r.qZA(),r.TgZ(11,"li",7),r.TgZ(12,"a",9),r._uU(13,"CargarFotos"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA())},directives:[wi,vi],styles:[""]}),t})(),qi=(()=>{class t{constructor(){this.title="fotosfirebase"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container","mt-4"]],template:function(t,e){1&t&&(r._UZ(0,"app-navbar"),r.TgZ(1,"div",0),r._UZ(2,"router-outlet"),r.qZA())},directives:[Vi,_i],styles:[""]}),t})();var Gi=n(8569);function Bi(){return t=>t.lift(new zi)}class zi{call(t,e){return e.subscribe(new Hi(t))}}class Hi extends jt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function $i(t,e){return n=>n.lift(new Zi(t,e))}class Zi{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ki(t,this.compare,this.keySelector))}}class Ki extends jt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Wi=n(9098),Qi=n(2346),Ji=n(1858),Yi=n(1062),Xi=n(4762),to=n(250),eo=n(308),no=function(t,e){return(no=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ro(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var io,oo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},so=so||{},ao=oo||self;function uo(){}function co(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function lo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ho="closure_uid_"+(1e9*Math.random()>>>0),fo=0;function po(t,e,n){return t.call.apply(t.bind,arguments)}function go(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function mo(t,e,n){return(mo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?po:go).apply(null,arguments)}function yo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function vo(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function bo(){this.s=this.s,this.o=this.o}var wo={};bo.prototype.s=!1,bo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,ho)&&t[ho]||(t[ho]=++fo)}(this);delete wo[t]}},bo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var _o=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},So=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function To(t){return Array.prototype.concat.apply([],arguments)}function Eo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Io(t){return/^[\s\xa0]*$/.test(t)}var Co,xo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ao(t,e){return-1!=t.indexOf(e)}function ko(t,e){return t<e?-1:t>e?1:0}t:{var Ro=ao.navigator;if(Ro){var Oo=Ro.userAgent;if(Oo){Co=Oo;break t}}Co=""}function No(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Do(t){var e={};for(var n in t)e[n]=t[n];return e}var Po="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lo(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Po.length;o++)n=Po[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Fo(t){return Fo[" "](t),t}Fo[" "]=uo;var Uo,Mo,jo=Ao(Co,"Opera"),Vo=Ao(Co,"Trident")||Ao(Co,"MSIE"),qo=Ao(Co,"Edge"),Go=qo||Vo,Bo=Ao(Co,"Gecko")&&!(Ao(Co.toLowerCase(),"webkit")&&!Ao(Co,"Edge"))&&!(Ao(Co,"Trident")||Ao(Co,"MSIE"))&&!Ao(Co,"Edge"),zo=Ao(Co.toLowerCase(),"webkit")&&!Ao(Co,"Edge");function Ho(){var t=ao.document;return t?t.documentMode:void 0}t:{var $o="",Zo=(Mo=Co,Bo?/rv:([^\);]+)(\)|;)/.exec(Mo):qo?/Edge\/([\d\.]+)/.exec(Mo):Vo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mo):zo?/WebKit\/(\S+)/.exec(Mo):jo?/(?:Version)[ \/]?(\S+)/.exec(Mo):void 0);if(Zo&&($o=Zo?Zo[1]:""),Vo){var Ko=Ho();if(null!=Ko&&Ko>parseFloat($o)){Uo=String(Ko);break t}}Uo=$o}var Wo={};var Qo=ao.document&&Vo&&(Ho()||parseInt(Uo,10))||void 0,Jo=function(){if(!ao.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ao.addEventListener("test",uo,e),ao.removeEventListener("test",uo,e)}catch(n){}return t}();function Yo(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Xo(t,e){if(Yo.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Bo){t:{try{Fo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ts[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Xo.Z.h.call(this)}}Yo.prototype.h=function(){this.defaultPrevented=!0},vo(Xo,Yo);var ts={2:"touch",3:"pen",4:"mouse"};Xo.prototype.h=function(){Xo.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var es="closure_listenable_"+(1e6*Math.random()|0),ns=0;function rs(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ns,this.ca=this.fa=!1}function is(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function os(t){this.src=t,this.g={},this.h=0}function ss(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=_o(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(is(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function as(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}os.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=as(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new rs(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var us="closure_lm_"+(1e6*Math.random()|0),cs={};function ls(t,e,n,r,i){if(r&&r.once)return fs(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ls(t,e[o],n,r,i);return null}return n=bs(n),t&&t[es]?t.N(e,n,lo(r)?!!r.capture:!!r,i):hs(t,e,n,!1,r,i)}function hs(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=lo(i)?!!i.capture:!!i,a=ys(t);if(a||(t[us]=a=new os(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ms;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Jo||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gs(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function fs(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)fs(t,e[o],n,r,i);return null}return n=bs(n),t&&t[es]?t.O(e,n,lo(r)?!!r.capture:!!r,i):hs(t,e,n,!0,r,i)}function ds(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ds(t,e[o],n,r,i);else r=lo(r)?!!r.capture:!!r,n=bs(n),t&&t[es]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=as(o=t.g[e],n,r,i))&&(is(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=ys(t))&&(e=t.g[e.toString()],t=-1,e&&(t=as(e,n,r,i)),(n=-1<t?e[t]:null)&&ps(n))}function ps(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[es])ss(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gs(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ys(e))?(ss(n,t),0==n.h&&(n.src=null,e[us]=null)):is(t)}}}function gs(t){return t in cs?cs[t]:cs[t]="on"+t}function ms(t,e){if(t.ca)t=!0;else{e=new Xo(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&ps(t),t=n.call(r,e)}return t}function ys(t){return(t=t[us])instanceof os?t:null}var vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function bs(t){return"function"==typeof t?t:(t[vs]||(t[vs]=function(e){return t.handleEvent(e)}),t[vs])}function ws(){bo.call(this),this.i=new os(this),this.P=this,this.I=null}function _s(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Yo(e,t);else if(e instanceof Yo)e.target=e.target||t;else{var i=e;Lo(e=new Yo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Ss(s,r,!0,e)&&i}if(i=Ss(s=e.g=t,r,!0,e)&&i,i=Ss(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ss(s=e.g=n[o],r,!1,e)&&i}function Ss(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&ss(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}vo(ws,bo),ws.prototype[es]=!0,ws.prototype.removeEventListener=function(t,e,n,r){ds(this,t,e,n,r)},ws.prototype.M=function(){if(ws.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)is(n[r]);delete e.g[t],e.h--}}this.I=null},ws.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ws.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ts=ao.JSON.stringify;function Es(){var t=Ns,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Is,Cs=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=xs.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),xs=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new As},function(t){return t.reset()}),As=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function ks(t){ao.setTimeout(function(){throw t},0)}function Rs(t,e){Is||function(){var t=ao.Promise.resolve(void 0);Is=function(){t.then(Ds)}}(),Os||(Is(),Os=!0),Ns.add(t,e)}var Os=!1,Ns=new Cs;function Ds(){for(var t;t=Es();){try{t.h.call(t.g)}catch(n){ks(n)}var e=xs;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Os=!1}function Ps(t,e){ws.call(this),this.h=t||1,this.g=e||ao,this.j=mo(this.kb,this),this.l=Date.now()}function Ls(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Fs(t,e,n){if("function"==typeof t)n&&(t=mo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=mo(t.handleEvent,t)}return 2147483647<Number(e)?-1:ao.setTimeout(t,e||0)}function Us(t){t.g=Fs(function(){t.g=null,t.i&&(t.i=!1,Us(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}vo(Ps,ws),(io=Ps.prototype).da=!1,io.S=null,io.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_s(this,"tick"),this.da&&(Ls(this),this.start()))}},io.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},io.M=function(){Ps.Z.M.call(this),Ls(this),delete this.g};var Ms=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}no(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Us(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(ao.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(bo);function js(t){bo.call(this),this.h=t,this.g={}}vo(js,bo);var Vs=[];function qs(t,e,n,r){Array.isArray(n)||(n&&(Vs[0]=n.toString()),n=Vs);for(var i=0;i<n.length;i++){var o=ls(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Gs(t){No(t.g,function(t,e){this.g.hasOwnProperty(e)&&ps(t)},t),t.g={}}function Bs(){this.g=!0}function zs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ts(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}js.prototype.M=function(){js.Z.M.call(this),Gs(this)},js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bs.prototype.Aa=function(){this.g=!1},Bs.prototype.info=function(){};var Hs={},$s=null;function Zs(){return $s=$s||new ws}function Ks(t){Yo.call(this,Hs.Ma,t)}function Ws(t){var e=Zs();_s(e,new Ks(e,t))}function Qs(t,e){Yo.call(this,Hs.STAT_EVENT,t),this.stat=e}function Js(t){var e=Zs();_s(e,new Qs(e,t))}function Ys(t,e){Yo.call(this,Hs.Na,t),this.size=e}function Xs(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ao.setTimeout(function(){t()},e)}Hs.Ma="serverreachability",vo(Ks,Yo),Hs.STAT_EVENT="statevent",vo(Qs,Yo),Hs.Na="timingevent",vo(Ys,Yo);var ta={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ea={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function na(){}function ra(){}na.prototype.h=null;var ia,oa={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function sa(){Yo.call(this,"d")}function aa(){Yo.call(this,"c")}function ua(){}function ca(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new js(this),this.P=ha,this.W=new Ps(t=Go?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new la}function la(){this.i=null,this.g="",this.h=!1}vo(sa,Yo),vo(aa,Yo),vo(ua,na),ua.prototype.g=function(){return new XMLHttpRequest},ua.prototype.i=function(){return{}},ia=new ua;var ha=45e3,fa={},da={};function pa(t,e,n){t.K=1,t.v=Ua(Oa(e)),t.s=n,t.U=!0,ga(t,null)}function ga(t,e){t.F=Date.now(),ba(t),t.A=Oa(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Qa(n.h,"t",r),t.C=0,n=t.l.H,t.h=new la,t.g=Ju(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ms(mo(t.Ia,t,t.g),t.O)),qs(t.V,t.g,"readystatechange",t.gb),e=t.H?Do(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ws(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function ma(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function ya(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=va(t,n))==da){4==e&&(t.o=4,Js(14),i=!1),zs(t.j,t.m,null,"[Incomplete Response]");break}if(r==fa){t.o=4,Js(15),zs(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}zs(t.j,t.m,r,null),Ea(t,r)}ma(t)&&r!=da&&r!=fa&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Js(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bu(e),e.L=!0,Js(11))):(zs(t.j,t.m,n,"[Invalid Chunked Response]"),Ta(t),Sa(t))}function va(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?da:(n=Number(e.substring(n,r)),isNaN(n)?fa:(r+=1)+n>e.length?da:(e=e.substr(r,n),t.C=r+n,e))}function ba(t){t.Y=Date.now()+t.P,wa(t,t.P)}function wa(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Xs(mo(t.eb,t),e)}function _a(t){t.B&&(ao.clearTimeout(t.B),t.B=null)}function Sa(t){0==t.l.G||t.I||$u(t.l,t)}function Ta(t){_a(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ls(t.W),Gs(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ea(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ru(n.i,t)))if(n.I=t.N,!t.J&&ru(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Hu(n),Pu(n)}Gu(n),Js(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Xs(mo(n.ab,n),6e3));if(1>=nu(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Ku(n,11)}else if((t.J||n.g==t)&&Hu(n),!Io(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Ao(l,"spdy")||Ao(l,"quic")||Ao(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(iu(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Fa(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=Qu(r,r.H?r.la:null,r.W),d.J){ou(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(_a(p),ba(p)),r.g=d}else qu(r);0<n.l.length&&Uu(n)}else"stop"!=o[0]&&"close"!=o[0]||Ku(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Ku(n,7):Du(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Ws(4)}catch(o){}}function Ia(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(co(t)||"string"==typeof t)So(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(co(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(co(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ca(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ca)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xa(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Aa(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Aa(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Aa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(io=ca.prototype).setTimeout=function(t){this.P=t},io.gb=function(t){t=t.target;var e=this.L;e&&3==Au(t)?e.l():this.Ia(t)},io.Ia=function(t){try{if(t==this.g)t:{var e=Au(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Go||this.g&&(this.h.h||this.g.ga()||ku(this.g)))){this.I||4!=e||7==n||Ws(8==n||0>=r?3:2),_a(this);var i=this.g.ba();this.N=i;e:if(ma(this)){var o=ku(this.g);t="";var s=o.length,a=4==Au(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ta(this),Sa(this);var u="";break e}this.h.i=new ao.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Io(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Js(12),Ta(this),Sa(this);break t}zs(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ea(this,i)}this.U?(ya(this,e,u),Go&&this.i&&3==e&&(qs(this.V,this.W,"tick",this.fb),this.W.start())):(zs(this.j,this.m,u,null),Ea(this,u)),4==e&&Ta(this),this.i&&!this.I&&(4==e?$u(this.l,this):(this.i=!1,ba(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Js(12)):(this.o=0,Js(13)),Ta(this),Sa(this)}}}catch(e){}},io.fb=function(){if(this.g){var t=Au(this.g),e=this.g.ga();this.C<e.length&&(_a(this),ya(this,t,e),this.i&&4!=t&&ba(this))}},io.cancel=function(){this.I=!0,Ta(this)},io.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ws(3),Js(17)),Ta(this),this.o=2,Sa(this)):wa(this,this.Y-t)},(io=Ca.prototype).R=function(){xa(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},io.T=function(){return xa(this),this.g.concat()},io.get=function(t,e){return Aa(this.h,t)?this.h[t]:e},io.set=function(t,e){Aa(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},io.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ka=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ra(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ra){this.g=void 0!==e?e:t.g,Na(this,t.j),this.s=t.s,Da(this,t.i),Pa(this,t.m),this.l=t.l,e=t.h;var n=new $a;n.i=e.i,e.g&&(n.g=new Ca(e.g),n.h=e.h),La(this,n),this.o=t.o}else t&&(n=String(t).match(ka))?(this.g=!!e,Na(this,n[1]||"",!0),this.s=Ma(n[2]||""),Da(this,n[3]||"",!0),Pa(this,n[4]),this.l=Ma(n[5]||"",!0),La(this,n[6]||"",!0),this.o=Ma(n[7]||"")):(this.g=!!e,this.h=new $a(null,this.g))}function Oa(t){return new Ra(t)}function Na(t,e,n){t.j=n?Ma(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Da(t,e,n){t.i=n?Ma(e,!0):e}function Pa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function La(t,e,n){e instanceof $a?(t.h=e,function(t,e){e&&!t.j&&(Za(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ka(this,e),Qa(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=ja(e,za)),t.h=new $a(e,t.g))}function Fa(t,e,n){t.h.set(e,n)}function Ua(t){return Fa(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ma(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ja(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Va),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Va(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ra.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ja(e,qa,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ja(e,qa,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(ja(n,"/"==n.charAt(0)?Ba:Ga,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ja(n,Ha)),t.join("")};var qa=/[#\/\?@]/g,Ga=/[#\?:]/g,Ba=/[#\?]/g,za=/[#\?@]/g,Ha=/#/g;function $a(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Za(t){t.g||(t.g=new Ca,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ka(t,e){Za(t),e=Ja(t,e),Aa(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Aa((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&xa(t)))}function Wa(t,e){return Za(t),e=Ja(t,e),Aa(t.g.h,e)}function Qa(t,e,n){Ka(t,e),0<n.length&&(t.i=null,t.g.set(Ja(t,e),Eo(n)),t.h+=n.length)}function Ja(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(io=$a.prototype).add=function(t,e){Za(this),this.i=null,t=Ja(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},io.forEach=function(t,e){Za(this),this.g.forEach(function(n,r){So(n,function(n){t.call(e,n,r,this)},this)},this)},io.T=function(){Za(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},io.R=function(t){Za(this);var e=[];if("string"==typeof t)Wa(this,t)&&(e=To(e,this.g.get(Ja(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=To(e,t[n])}return e},io.set=function(t,e){return Za(this),this.i=null,Wa(this,t=Ja(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},io.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},io.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Ya=function(){return function(t,e){this.h=t,this.g=e}}();function Xa(t){this.l=t||tu,t=ao.PerformanceNavigationTiming?0<(t=ao.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ao.g&&ao.g.Ea&&ao.g.Ea()&&ao.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tu=10;function eu(t){return!!t.h||!!t.g&&t.g.size>=t.j}function nu(t){return t.h?1:t.g?t.g.size:0}function ru(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function iu(t,e){t.g?t.g.add(e):t.h=e}function ou(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function su(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=ro(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Eo(t.i)}function au(){}function uu(){this.g=new au}function cu(t,e,n){var r=n||"";try{Ia(t,function(t,n){var i=t;lo(t)&&(i=Ts(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(yb){throw e.push(r+"type="+encodeURIComponent("_badmap")),yb}}function lu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function hu(t){this.l=t.$b||null,this.j=t.ib||!1}function fu(t,e){ws.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=du,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xa.prototype.cancel=function(){var t,e;if(this.i=su(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=ro(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},au.prototype.stringify=function(t){return ao.JSON.stringify(t,void 0)},au.prototype.parse=function(t){return ao.JSON.parse(t,void 0)},vo(hu,na),hu.prototype.g=function(){return new fu(this.l,this.j)},hu.prototype.i=function(t){return function(){return t}}({}),vo(fu,ws);var du=0;function pu(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function gu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,mu(t)}function mu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(io=fu.prototype).open=function(t,e){if(this.readyState!=du)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,mu(this)},io.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ao).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},io.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gu(this)),this.readyState=du},io.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,mu(this)),this.g&&(this.readyState=3,mu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ao.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pu(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},io.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?gu(this):mu(this),3==this.readyState&&pu(this)}},io.Ua=function(t){this.g&&(this.response=this.responseText=t,gu(this))},io.Ta=function(t){this.g&&(this.response=t,gu(this))},io.ha=function(){this.g&&gu(this)},io.setRequestHeader=function(t,e){this.v.append(t,e)},io.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},io.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var yu=ao.JSON.parse;function vu(t){ws.call(this),this.headers=new Ca,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bu,this.K=this.L=!1}vo(vu,ws);var bu="",wu=/^https?$/i,_u=["POST","PUT"];function Su(t){return"content-type"==t.toLowerCase()}function Tu(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Eu(t),Cu(t)}function Eu(t){t.D||(t.D=!0,_s(t,"complete"),_s(t,"error"))}function Iu(t){if(t.h&&void 0!==so&&(!t.C[1]||4!=Au(t)||2!=t.ba()))if(t.v&&4==Au(t))Fs(t.Fa,0,t);else if(_s(t,"readystatechange"),4==Au(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(ka)[1]||null;if(!o&&ao.self&&ao.self.location){var s=ao.self.location.protocol;o=s.substr(0,s.length-1)}i=!wu.test(o?o.toLowerCase():"")}e=i}if(e)_s(t,"complete"),_s(t,"success");else{t.m=6;try{var a=2<Au(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Eu(t)}}finally{Cu(t)}}}function Cu(t,e){if(t.g){xu(t);var n=t.g,r=t.C[0]?uo:null;t.g=null,t.C=null,e||_s(t,"ready");try{n.onreadystatechange=r}catch(yb){}}}function xu(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ao.clearTimeout(t.A),t.A=null)}function Au(t){return t.g?t.g.readyState:0}function ku(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case bu:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ru(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return No(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Fa(t,e,n))}function Ou(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Nu(t){this.za=0,this.l=[],this.h=new Bs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ou("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ou("baseRetryDelayMs",5e3,t),this.$a=Ou("retryDelaySeedMs",1e4,t),this.Ya=Ou("forwardChannelMaxRetries",2,t),this.ra=Ou("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Xa(t&&t.concurrentRequestLimit),this.Ca=new uu,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Du(t){if(Lu(t),3==t.G){var e=t.V++,n=Oa(t.F);Fa(n,"SID",t.J),Fa(n,"RID",e),Fa(n,"TYPE","terminate"),ju(t,n),(e=new ca(t,t.h,e,void 0)).K=2,e.v=Ua(Oa(n)),n=!1,ao.navigator&&ao.navigator.sendBeacon&&(n=ao.navigator.sendBeacon(e.v.toString(),"")),!n&&ao.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ju(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ba(e)}Wu(t)}function Pu(t){t.g&&(Bu(t),t.g.cancel(),t.g=null)}function Lu(t){Pu(t),t.u&&(ao.clearTimeout(t.u),t.u=null),Hu(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ao.clearTimeout(t.m),t.m=null)}function Fu(t,e){t.l.push(new Ya(t.Za++,e)),3==t.G&&Uu(t)}function Uu(t){eu(t.i)||t.m||(t.m=!0,Rs(t.Ha,t),t.C=0)}function Mu(t,e){var n;n=e?e.m:t.V++;var r=Oa(t.F);Fa(r,"SID",t.J),Fa(r,"RID",n),Fa(r,"AID",t.U),ju(t,r),t.o&&t.s&&Ru(r,t.o,t.s),n=new ca(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Vu(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),iu(t.i,n),pa(n,r,e)}function ju(t,e){t.j&&Ia({},function(t,n){Fa(e,n,t)})}function Vu(t,e,n){n=Math.min(t.l.length,n);var r=t.j?mo(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{cu(l,s,"req"+c+"_")}catch(Oc){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function qu(t){t.g||t.u||(t.Y=1,Rs(t.Ga,t),t.A=0)}function Gu(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Xs(mo(t.Ga,t),Zu(t,t.A)),t.A++,0))}function Bu(t){null!=t.B&&(ao.clearTimeout(t.B),t.B=null)}function zu(t){t.g=new ca(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Oa(t.oa);Fa(e,"RID","rpc"),Fa(e,"SID",t.J),Fa(e,"CI",t.N?"0":"1"),Fa(e,"AID",t.U),ju(t,e),Fa(e,"TYPE","xmlhttp"),t.o&&t.s&&Ru(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ua(Oa(e)),n.s=null,n.U=!0,ga(n,t)}function Hu(t){null!=t.v&&(ao.clearTimeout(t.v),t.v=null)}function $u(t,e){var n=null;if(t.g==e){Hu(t),Bu(t),t.g=null;var r=2}else{if(!ru(t.i,e))return;n=e.D,ou(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;_s(r=Zs(),new Ys(r,n,e,i)),Uu(t)}else qu(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(nu(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Xs(mo(t.Ha,t,e),Zu(t,t.C)),t.C++,0)))}(t,e)||2==r&&Gu(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ku(t,5);break;case 4:Ku(t,10);break;case 3:Ku(t,6);break;default:Ku(t,2)}}function Zu(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ku(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=mo(t.jb,t);n||(n=new Ra("//www.google.com/images/cleardot.gif"),ao.location&&"http"==ao.location.protocol||Na(n,"https"),Ua(n)),function(t,e){var n=new Bs;if(ao.Image){var r=new Image;r.onload=yo(lu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=yo(lu,n,r,"TestLoadImage: error",!1,e),r.onabort=yo(lu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=yo(lu,n,r,"TestLoadImage: timeout",!1,e),ao.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Js(2);t.G=0,t.j&&t.j.va(e),Wu(t),Lu(t)}function Wu(t){t.G=0,t.I=-1,t.j&&(0==su(t.i).length&&0==t.l.length||(t.i.i.length=0,Eo(t.l),t.l.length=0),t.j.ua())}function Qu(t,e,n){var r=function(t){return t instanceof Ra?Oa(t):new Ra(t,void 0)}(n);if(""!=r.i)e&&Da(r,e+"."+r.i),Pa(r,r.m);else{var i=ao.location;r=function(t,e,n,r){var i=new Ra(null,void 0);return t&&Na(i,t),e&&Da(i,e),n&&Pa(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&No(t.aa,function(t,e){Fa(r,e,t)}),n=t.sa,(e=t.D)&&n&&Fa(r,e,n),Fa(r,"VER",t.ma),ju(t,r),r}function Ju(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vu(n&&t.Ba&&!t.qa?new hu({ib:!0}):t.qa)).L=t.H,e}function Yu(){}function Xu(){if(Vo&&!(10<=Number(Qo)))throw Error("Environmental error: no available transport.")}function tc(t,e){ws.call(this),this.g=new Nu(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Io(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Io(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new rc(this)}function ec(t){sa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function nc(){aa.call(this),this.status=1}function rc(t){this.g=t}(io=vu.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ia.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:ia),this.g.onreadystatechange=mo(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Tu(this,o)}t=n||"";var i=new Ca(this.headers);r&&Ia(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Su,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=ao.FormData&&t instanceof ao.FormData,!(0<=_o(_u,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xu(this),0<this.B&&((this.K=function(t){return Vo&&function(){return t=Wo,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=xo(String(Uo)).split("."),n=xo("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ko(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ko(0==o[2].length,0==s[2].length)||ko(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mo(this.pa,this)):this.A=Fs(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Tu(this,o)}},io.pa=function(){void 0!==so&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_s(this,"timeout"),this.abort(8))},io.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,_s(this,"complete"),_s(this,"abort"),Cu(this))},io.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cu(this,!0)),vu.Z.M.call(this)},io.Fa=function(){this.s||(this.F||this.v||this.l?Iu(this):this.cb())},io.cb=function(){Iu(this)},io.ba=function(){try{return 2<Au(this)?this.g.status:-1}catch(Mo){return-1}},io.ga=function(){try{return this.g?this.g.responseText:""}catch(Mo){return""}},io.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),yu(e)}},io.Da=function(){return this.m},io.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(io=Nu.prototype).ma=8,io.G=1,io.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},io.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ca(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Lo(n=Do(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Vu(this,e,r),Fa(i=Oa(this.F),"RID",t),Fa(i,"CVER",22),this.D&&Fa(i,"X-HTTP-Session-Id",this.D),ju(this,i),this.o&&n&&Ru(i,this.o,n),iu(this.i,e),this.Ra&&Fa(i,"TYPE","init"),this.ja?(Fa(i,"$req",r),Fa(i,"SID","null"),e.$=!0,pa(e,i,null)):pa(e,i,r),this.G=2}}else 3==this.G&&(t?Mu(this,t):0==this.l.length||eu(this.i)||Mu(this))},io.Ga=function(){if(this.u=null,zu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Xs(mo(this.bb,this),t)}},io.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Js(10),Pu(this),zu(this))},io.ab=function(){null!=this.v&&(this.v=null,Pu(this),Gu(this),Js(19))},io.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Js(2)):(this.h.info("Failed to ping google.com"),Js(1))},(io=Yu.prototype).xa=function(){},io.wa=function(){},io.va=function(){},io.ua=function(){},io.Oa=function(){},Xu.prototype.g=function(t,e){return new tc(t,e)},vo(tc,ws),tc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Rs(mo(t.hb,t,e))),Js(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Qu(t,null,t.W),Uu(t)},tc.prototype.close=function(){Du(this.g)},tc.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Fu(this.g,e)}else this.v?((e={}).__data__=Ts(t),Fu(this.g,e)):Fu(this.g,t)},tc.prototype.M=function(){this.g.j=null,delete this.j,Du(this.g),delete this.g,tc.Z.M.call(this)},vo(ec,sa),vo(nc,aa),vo(rc,Yu),rc.prototype.xa=function(){_s(this.g,"a")},rc.prototype.wa=function(t){_s(this.g,new ec(t))},rc.prototype.va=function(t){_s(this.g,new nc(t))},rc.prototype.ua=function(){_s(this.g,"b")},Xu.prototype.createWebChannel=Xu.prototype.g,tc.prototype.send=tc.prototype.u,tc.prototype.open=tc.prototype.m,tc.prototype.close=tc.prototype.close,ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,ea.COMPLETE="complete",ra.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",ws.prototype.listen=ws.prototype.N,vu.prototype.listenOnce=vu.prototype.O,vu.prototype.getLastError=vu.prototype.La,vu.prototype.getLastErrorCode=vu.prototype.Da,vu.prototype.getStatus=vu.prototype.ba,vu.prototype.getResponseJson=vu.prototype.Qa,vu.prototype.getResponseText=vu.prototype.ga,vu.prototype.send=vu.prototype.ea;var ic=ta,oc=ea,sc=Hs,ac=hu,uc=ra,cc=vu,lc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();lc.o=-1;var hc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Xi.ZT)(e,t),e}(Error),dc=new eo.Yd("@firebase/firestore");function pc(){return dc.logLevel}function gc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dc.logLevel<=eo.in.DEBUG){var r=e.map(vc);dc.debug.apply(dc,(0,Xi.ev)(["Firestore (8.7.0): "+t],r))}}function mc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dc.logLevel<=eo.in.ERROR){var r=e.map(vc);dc.error.apply(dc,(0,Xi.ev)(["Firestore (8.7.0): "+t],r))}}function yc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dc.logLevel<=eo.in.WARN){var r=e.map(vc);dc.warn.apply(dc,(0,Xi.ev)(["Firestore (8.7.0): "+t],r))}}function vc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(yb){return t}}function bc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw mc(e),new Error(e)}function wc(t,e){t||bc()}function _c(t,e){return t}function Sc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Tc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Sc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ec(t,e){return t<e?-1:t>e?1:0}function Ic(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Cc(t){return t+"\0"}var xc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new fc(hc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new fc(hc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new fc(hc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fc(hc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ec(this.nanoseconds,t.nanoseconds):Ec(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ac=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new xc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function kc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Oc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Nc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&bc(),void 0===n?n=t.length-e:n>t.length-e&&bc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Dc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Xi.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new fc(hc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Nc),Pc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Xi.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Pc.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new fc(hc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new fc(hc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new fc(hc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new fc(hc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Nc),Fc=function(){function t(t){this.fields=t,t.sort(Lc.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ic(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Uc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ec(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Uc.EMPTY_BYTE_STRING=new Uc("");var Mc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jc(t){if(wc(!!t),"string"==typeof t){var e=0,n=Mc.exec(t);if(wc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vc(t.seconds),nanos:Vc(t.nanos)}}function Vc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function qc(t){return"string"==typeof t?Uc.fromBase64String(t):Uc.fromUint8Array(t)}function Gc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bc(t){var e=t.mapValue.fields.__previous_value__;return Gc(e)?Bc(e):e}function zc(t){var e=jc(t.mapValue.fields.__local_write_time__.timestampValue);return new xc(e.seconds,e.nanos)}function Hc(t){return null==t}function $c(t){return 0===t&&1/t==-1/0}function Zc(t){return"number"==typeof t&&Number.isInteger(t)&&!$c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Kc=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Dc.fromString(e))},t.fromName=function(e){return new t(Dc.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Dc.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Dc.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Dc(e.slice()))},t}();function Wc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gc(t)?4:10:bc()}function Qc(t,e){var n=Wc(t);if(n!==Wc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zc(t).isEqual(zc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=jc(t.timestampValue),r=jc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return qc(t.bytesValue).isEqual(qc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Vc(t.geoPointValue.latitude)===Vc(e.geoPointValue.latitude)&&Vc(t.geoPointValue.longitude)===Vc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Vc(t.integerValue)===Vc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Vc(t.doubleValue),r=Vc(e.doubleValue);return n===r?$c(n)===$c(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ic(t.arrayValue.values||[],e.arrayValue.values||[],Qc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(kc(n)!==kc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qc(n[i],r[i])))return!1;return!0}(t,e);default:return bc()}}function Jc(t,e){return void 0!==(t.values||[]).find(function(t){return Qc(t,e)})}function Yc(t,e){var n=Wc(t),r=Wc(e);if(n!==r)return Ec(n,r);switch(n){case 0:return 0;case 1:return Ec(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Vc(t.integerValue||t.doubleValue),r=Vc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Xc(t.timestampValue,e.timestampValue);case 4:return Xc(zc(t),zc(e));case 5:return Ec(t.stringValue,e.stringValue);case 6:return function(t,e){var n=qc(t),r=qc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ec(n[i],r[i]);if(0!==o)return o}return Ec(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ec(Vc(t.latitude),Vc(e.latitude));return 0!==n?n:Ec(Vc(t.longitude),Vc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Yc(n[i],r[i]);if(o)return o}return Ec(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ec(r[s],o[s]);if(0!==a)return a;var u=Yc(n[r[s]],i[o[s]]);if(0!==u)return u}return Ec(r.length,o.length)}(t.mapValue,e.mapValue);default:throw bc()}}function Xc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ec(t,e);var n=jc(t),r=jc(e),i=Ec(n.seconds,r.seconds);return 0!==i?i:Ec(n.nanos,r.nanos)}function tl(t){return el(t)}function el(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=jc(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?qc(t.bytesValue).toBase64():"referenceValue"in t?Kc.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=el(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+el(t.fields[o])}return e+"}"}(t.mapValue):bc();var e}function nl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function rl(t){return!!t&&"integerValue"in t}function il(t){return!!t&&"arrayValue"in t}function ol(t){return!!t&&"nullValue"in t}function sl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function al(t){return!!t&&"mapValue"in t}function ul(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},jc(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Rc(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=ul(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ul(t.arrayValue.values[r]);return n}return Object.assign({},t)}var cl=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!al(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ul(e)},t.prototype.setAll=function(t){var e=this,n=Lc.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ul(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());al(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Qc(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];al(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Rc(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(ul(this.value))},t}();function ll(t){var e=[];return Rc(t.fields,function(t,n){var r=new Lc([t]);if(al(n)){var i=ll(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Fc(e)}var hl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Ac.min(),cl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,cl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,cl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=cl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=cl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),fl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function dl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new fl(t,e,n,r,i,o,s)}function pl(t){var e=_c(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+tl(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Hc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=xl(e.startAt)),e.endAt&&(n+="|ub:",n+=xl(e.endAt)),e.h=n}return e.h}function gl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!kl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Qc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ol(t.startAt,e.startAt)&&Ol(t.endAt,e.endAt)}function ml(t){return Kc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var yl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Xi.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new vl(t,n,r):"array-contains"===n?new Sl(t,r):"in"===n?new Tl(t,r):"not-in"===n?new El(t,r):"array-contains-any"===n?new Il(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new bl(t,n):new wl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Yc(e,this.value)):null!==e&&Wc(this.value)===Wc(e)&&this.m(Yc(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return bc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),vl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Kc.fromName(r.referenceValue),i}return(0,Xi.ZT)(e,t),e.prototype.matches=function(t){var e=Kc.comparator(t.key,this.key);return this.m(e)},e}(yl),bl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=_l(0,n),r}return(0,Xi.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(yl),wl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=_l(0,n),r}return(0,Xi.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(yl);function _l(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Kc.fromName(t.referenceValue)})}var Sl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Xi.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return il(e)&&Jc(e.arrayValue,this.value)},e}(yl),Tl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Xi.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Jc(this.value.arrayValue,e)},e}(yl),El=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Xi.ZT)(e,t),e.prototype.matches=function(t){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Jc(this.value.arrayValue,e)},e}(yl),Il=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Xi.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!il(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Jc(e.value.arrayValue,t)})},e}(yl),Cl=function(t,e){this.position=t,this.before=e};function xl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return tl(t)}).join(",")}var Al=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function kl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Rl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Kc.comparator(Kc.fromName(s.referenceValue),n.key):Yc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ol(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Qc(t.position[n],e.position[n]))return!1;return!0}var Nl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Dl(t,e,n,r,i,o,s,a){return new Nl(t,e,n,r,i,o,s,a)}function Pl(t){return new Nl(t)}function Ll(t){return!Hc(t.limit)&&"F"===t.limitType}function Fl(t){return!Hc(t.limit)&&"L"===t.limitType}function Ul(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ml(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function jl(t){return null!==t.collectionGroup}function Vl(t){var e=_c(t);if(null===e.p){e.p=[];var n=Ml(e),r=Ul(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Al(n)),e.p.push(new Al(Lc.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Al(Lc.keyField(),u))}}}return e.p}function ql(t){var e=_c(t);if(!e.T)if("F"===e.limitType)e.T=dl(e.path,e.collectionGroup,Vl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Vl(e);r<i.length;r++){var o=i[r];n.push(new Al(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Cl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Cl(e.startAt.position,!e.startAt.before):null;e.T=dl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Gl(t,e,n){return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bl(t,e){return gl(ql(t),ql(e))&&t.limitType===e.limitType}function zl(t){return pl(ql(t))+"|lt:"+t.limitType}function Hl(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+tl(e.value);var e}).join(", ")+"]"),Hc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+xl(t.startAt)),t.endAt&&(e+=", endAt: "+xl(t.endAt)),"Target("+e+")"}(ql(t))+"; limitType="+t.limitType+")"}function $l(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Kc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Rl(t.startAt,Vl(t),e)||t.endAt&&Rl(t.endAt,Vl(t),e))}(t,e)}function Zl(t){return function(e,n){for(var r=!1,i=0,o=Vl(t);i<o.length;i++){var s=o[i],a=Kl(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Kl(t,e,n){var r=t.field.isKeyField()?Kc.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Yc(r,i):bc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return bc()}}function Wl(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function Ql(t){return{integerValue:""+t}}function Jl(t,e){return Zc(e)?Ql(e):Wl(t,e)}var Yl=function(){this._=void 0};function Xl(t,e,n){return t instanceof nh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof rh?ih(t,e):t instanceof oh?sh(t,e):function(t,e){var n=eh(t,e),r=uh(n)+uh(t.A);return rl(n)&&rl(t.A)?Ql(r):Wl(t.R,r)}(t,e)}function th(t,e,n){return t instanceof rh?ih(t,e):t instanceof oh?sh(t,e):n}function eh(t,e){return t instanceof ah?rl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Xi.ZT)(e,t),e}(Yl),rh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Xi.ZT)(e,t),e}(Yl);function ih(t,e){for(var n=ch(e),r=function(t){n.some(function(e){return Qc(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var oh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Xi.ZT)(e,t),e}(Yl);function sh(t,e){for(var n=ch(e),r=function(t){n=n.filter(function(e){return!Qc(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ah=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Xi.ZT)(e,t),e}(Yl);function uh(t){return Vc(t.integerValue||t.doubleValue)}function ch(t){return il(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var lh=function(t,e){this.field=t,this.transform=e},hh=function(t,e){this.version=t,this.transformResults=e},fh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function dh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ph=function(){};function gh(t,e,n){t instanceof wh?function(t,e,n){var r=t.value.clone(),i=Th(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof _h?function(t,e,n){if(dh(t.precondition,e)){var r=Th(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Sh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function mh(t,e,n){t instanceof wh?function(t,e,n){if(dh(t.precondition,e)){var r=t.value.clone(),i=Eh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(bh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof _h?function(t,e,n){if(dh(t.precondition,e)){var r=Eh(t.fieldTransforms,n,e),i=e.data;i.setAll(Sh(t)),i.setAll(r),e.convertToFoundDocument(bh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){dh(t.precondition,e)&&e.convertToNoDocument(Ac.min())}(t,e)}function yh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=eh(o.transform,s||null);null!=a&&(null==n&&(n=cl.empty()),n.set(o.field,a))}return n||null}function vh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ic(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof rh&&e instanceof rh||t instanceof oh&&e instanceof oh?Ic(t.elements,e.elements,Qc):t instanceof ah&&e instanceof ah?Qc(t.A,e.A):t instanceof nh&&e instanceof nh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function bh(t){return t.isFoundDocument()?t.version:Ac.min()}var wh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Xi.ZT)(e,t),e}(ph),_h=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Xi.ZT)(e,t),e}(ph);function Sh(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Th(t,e,n){var r=new Map;wc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,th(s,a,n[i]))}return r}function Eh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Xl(a,u,e))}return r}var Ih,Ch,xh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Xi.ZT)(e,t),e}(ph),Ah=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Xi.ZT)(e,t),e}(ph),kh=function(t){this.count=t};function Rh(t){switch(t){case hc.OK:return bc();case hc.CANCELLED:case hc.UNKNOWN:case hc.DEADLINE_EXCEEDED:case hc.RESOURCE_EXHAUSTED:case hc.INTERNAL:case hc.UNAVAILABLE:case hc.UNAUTHENTICATED:return!1;case hc.INVALID_ARGUMENT:case hc.NOT_FOUND:case hc.ALREADY_EXISTS:case hc.PERMISSION_DENIED:case hc.FAILED_PRECONDITION:case hc.ABORTED:case hc.OUT_OF_RANGE:case hc.UNIMPLEMENTED:case hc.DATA_LOSS:return!0;default:return bc()}}function Oh(t){if(void 0===t)return mc("GRPC error has no .code"),hc.UNKNOWN;switch(t){case Ih.OK:return hc.OK;case Ih.CANCELLED:return hc.CANCELLED;case Ih.UNKNOWN:return hc.UNKNOWN;case Ih.DEADLINE_EXCEEDED:return hc.DEADLINE_EXCEEDED;case Ih.RESOURCE_EXHAUSTED:return hc.RESOURCE_EXHAUSTED;case Ih.INTERNAL:return hc.INTERNAL;case Ih.UNAVAILABLE:return hc.UNAVAILABLE;case Ih.UNAUTHENTICATED:return hc.UNAUTHENTICATED;case Ih.INVALID_ARGUMENT:return hc.INVALID_ARGUMENT;case Ih.NOT_FOUND:return hc.NOT_FOUND;case Ih.ALREADY_EXISTS:return hc.ALREADY_EXISTS;case Ih.PERMISSION_DENIED:return hc.PERMISSION_DENIED;case Ih.FAILED_PRECONDITION:return hc.FAILED_PRECONDITION;case Ih.ABORTED:return hc.ABORTED;case Ih.OUT_OF_RANGE:return hc.OUT_OF_RANGE;case Ih.UNIMPLEMENTED:return hc.UNIMPLEMENTED;case Ih.DATA_LOSS:return hc.DATA_LOSS;default:return bc()}}(Ch=Ih||(Ih={}))[Ch.OK=0]="OK",Ch[Ch.CANCELLED=1]="CANCELLED",Ch[Ch.UNKNOWN=2]="UNKNOWN",Ch[Ch.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ch[Ch.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ch[Ch.NOT_FOUND=5]="NOT_FOUND",Ch[Ch.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ch[Ch.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ch[Ch.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ch[Ch.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ch[Ch.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ch[Ch.ABORTED=10]="ABORTED",Ch[Ch.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ch[Ch.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ch[Ch.INTERNAL=13]="INTERNAL",Ch[Ch.UNAVAILABLE=14]="UNAVAILABLE",Ch[Ch.DATA_LOSS=15]="DATA_LOSS";var Nh=function(){function t(t,e){this.comparator=t,this.root=e||Ph.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ph.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ph.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Dh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Dh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Dh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Dh(this.root,t,this.comparator,!0)},t}(),Dh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ph=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw bc();if(this.right.isRed())throw bc();var t=this.left.check();if(t!==this.right.check())throw bc();return t+(this.isRed()?0:1)},t}();Ph.EMPTY=null,Ph.RED=!0,Ph.BLACK=!1,Ph.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw bc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ph(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Lh=function(){function t(t){this.comparator=t,this.data=new Nh(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Fh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Fh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Fh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Uh=new Nh(Kc.comparator);function Mh(){return Uh}var jh=new Nh(Kc.comparator);function Vh(){return jh}var qh=new Nh(Kc.comparator);function Gh(){return qh}var Bh=new Lh(Kc.comparator);function zh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Bh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Hh=new Lh(Ec);function $h(){return Hh}var Zh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Kh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Ac.min(),r,$h(),Mh(),zh())},t}(),Kh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Uc.EMPTY_BYTE_STRING,n,zh(),zh(),zh())},t}(),Wh=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Qh=function(t,e){this.targetId=t,this.V=e},Jh=function(t,e,n,r){void 0===n&&(n=Uc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Yh=function(){function t(){this.S=0,this.D=ef(),this.C=Uc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=zh(),e=zh(),n=zh();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:bc()}}),new Kh(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=ef()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Xh=function(){function t(t){this.W=t,this.G=new Map,this.H=Mh(),this.J=tf(),this.Y=new Lh(Ec)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:bc()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ml(i))if(0===n){var o=new Kc(i.path);this.tt(e,o,hl.newNoDocument(o,Ac.min()))}else wc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&ml(o.target)){var s=new Kc(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,hl.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=zh();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Zh(t,n,this.Y,this.H,r);return this.H=Mh(),this.J=tf(),this.Y=new Lh(Ec),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Yh,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Lh(Ec),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||gc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Yh),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function tf(){return new Nh(Kc.comparator)}function ef(){return new Nh(Kc.comparator)}var nf={asc:"ASCENDING",desc:"DESCENDING"},rf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},of=function(t,e){this.databaseId=t,this.I=e};function sf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function af(t,e){return t.I?e.toBase64():e.toUint8Array()}function uf(t,e){return sf(t,e.toTimestamp())}function cf(t){return wc(!!t),Ac.fromTimestamp(function(t){var e=jc(t);return new xc(e.seconds,e.nanos)}(t))}function lf(t,e){return function(t){return new Dc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function hf(t){var e=Dc.fromString(t);return wc(Lf(e)),e}function ff(t,e){return lf(t.databaseId,e.path)}function df(t,e){var n=hf(e);if(n.get(1)!==t.databaseId.projectId)throw new fc(hc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fc(hc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Kc(yf(n))}function pf(t,e){return lf(t.databaseId,e)}function gf(t){var e=hf(t);return 4===e.length?Dc.emptyPath():yf(e)}function mf(t){return new Dc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yf(t){return wc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function vf(t,e,n){return{name:ff(t,e),fields:n.value.mapValue.fields}}function bf(t,e,n){var r=df(t,e.name),i=cf(e.updateTime),o=new cl({mapValue:{fields:e.fields}}),s=hl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function wf(t,e){var n;if(e instanceof wh)n={update:vf(t,e.key,e.value)};else if(e instanceof xh)n={delete:ff(t,e.key)};else if(e instanceof _h)n={update:vf(t,e.key,e.data),updateMask:Pf(e.fieldMask)};else{if(!(e instanceof Ah))return bc();n={verify:ff(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof nh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof oh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ah)return{fieldPath:e.field.canonicalString(),increment:n.A};throw bc()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:uf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:bc()}(t,e.precondition)),n}function _f(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?fh.updateTime(cf(t.updateTime)):void 0!==t.exists?fh.exists(t.exists):fh.none()}(e.currentDocument):fh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(wc("REQUEST_TIME"===e.setToServerValue),n=new nh):"appendMissingElements"in e?n=new rh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new oh(e.removeAllFromArray.values||[]):"increment"in e?n=new ah(t,e.increment):bc();var r=Lc.fromServerFormat(e.fieldPath);return new lh(r,n)}(t,e)}):[];if(e.update){var i=df(t,e.update.name),o=new cl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Fc((t.fieldPaths||[]).map(function(t){return Lc.fromServerFormat(t)}))}(e.updateMask);return new _h(i,o,s,n,r)}return new wh(i,o,n,r)}if(e.delete){var a=df(t,e.delete);return new xh(a,n)}if(e.verify){var u=df(t,e.verify);return new Ah(u,n)}return bc()}function Sf(t,e){return{documents:[pf(t,e.path)]}}function Tf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=pf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=pf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(sl(t.value))return{unaryFilter:{field:Rf(t.field),op:"IS_NAN"}};if(ol(t.value))return{unaryFilter:{field:Rf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(sl(t.value))return{unaryFilter:{field:Rf(t.field),op:"IS_NOT_NAN"}};if(ol(t.value))return{unaryFilter:{field:Rf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rf(t.field),op:kf(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Rf(t.field),direction:Af(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Hc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Cf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Cf(e.endAt)),n}function Ef(t){var e=gf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){wc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=If(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Al(Of(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Hc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=xf(n.startAt));var l=null;return n.endAt&&(l=xf(n.endAt)),Dl(e,i,a,s,u,"F",c,l)}function If(t){return t?void 0!==t.unaryFilter?[Df(t)]:void 0!==t.fieldFilter?[Nf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return If(t)}).reduce(function(t,e){return t.concat(e)}):bc():[]}function Cf(t){return{before:t.before,values:t.position}}function xf(t){return new Cl(t.values||[],!!t.before)}function Af(t){return nf[t]}function kf(t){return rf[t]}function Rf(t){return{fieldPath:t.canonicalString()}}function Of(t){return Lc.fromServerFormat(t.fieldPath)}function Nf(t){return yl.create(Of(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return bc()}}(t.fieldFilter.op),t.fieldFilter.value)}function Df(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Of(t.unaryFilter.field);return yl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Of(t.unaryFilter.field);return yl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Of(t.unaryFilter.field);return yl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Of(t.unaryFilter.field);return yl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return bc()}}function Pf(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Lf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ff(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Mf(e)),e=Uf(t.get(n),e);return Mf(e)}function Uf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Mf(t){return t+"\x01\x01"}function jf(t){var e=t.length;if(wc(e>=2),2===e)return wc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Dc.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&bc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:bc()}o=s+2}return new Dc(r)}var Vf=function(t,e){this.seconds=t,this.nanoseconds=e},qf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};qf.store="owner",qf.key="owner";var Gf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Gf.store="mutationQueues",Gf.keyPath="userId";var Bf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bf.store="mutations",Bf.keyPath="batchId",Bf.userMutationsIndex="userMutationsIndex",Bf.userMutationsKeyPath=["userId","batchId"];var zf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ff(e)]},t.key=function(t,e,n){return[t,Ff(e),n]},t}();zf.store="documentMutations",zf.PLACEHOLDER=new zf;var Hf=function(t,e){this.path=t,this.readTime=e},$f=function(t,e){this.path=t,this.version=e},Zf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Zf.store="remoteDocuments",Zf.readTimeIndex="readTimeIndex",Zf.readTimeIndexPath="readTime",Zf.collectionReadTimeIndex="collectionReadTimeIndex",Zf.collectionReadTimeIndexPath=["parentPath","readTime"];var Kf=function(t){this.byteSize=t};Kf.store="remoteDocumentGlobal",Kf.key="remoteDocumentGlobalKey";var Wf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Wf.store="targets",Wf.keyPath="targetId",Wf.queryTargetsIndexName="queryTargetsIndex",Wf.queryTargetsKeyPath=["canonicalId","targetId"];var Qf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Qf.store="targetDocuments",Qf.keyPath=["targetId","path"],Qf.documentTargetsIndex="documentTargetsIndex",Qf.documentTargetsKeyPath=["path","targetId"];var Jf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Jf.key="targetGlobalKey",Jf.store="targetGlobal";var Yf=function(t,e){this.collectionId=t,this.parent=e};Yf.store="collectionParents",Yf.keyPath=["collectionId","parent"];var Xf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Xf.store="clientMetadata",Xf.keyPath="clientId";var td=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};td.store="bundles",td.keyPath="bundleId";var ed=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ed.store="namedQueries",ed.keyPath="name";var nd=(0,Xi.ev)((0,Xi.ev)([],(0,Xi.ev)((0,Xi.ev)([],(0,Xi.ev)((0,Xi.ev)([],(0,Xi.ev)((0,Xi.ev)([],[Gf.store,Bf.store,zf.store,Zf.store,Wf.store,qf.store,Jf.store,Qf.store]),[Xf.store])),[Kf.store])),[Yf.store])),[td.store,ed.store]),rd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",id=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),od=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},sd=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&bc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),ad=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new od,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ld(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=gd(e.target.error);n.ft.reject(new ld(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ld(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(gc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new fd(e)},t}(),ud=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,to.z$)())&&mc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return gc("SimpleDb","Removing database:",t),dd(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,to.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(gc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new ld(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new fc(hc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new ld(t,n))},i.onupgradeneeded=function(t){gc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){gc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Xi.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Xi.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Xi.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=ad.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),sd.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return gc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),cd=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return dd(this.Pt.delete())},t}(),ld=function(t){function e(e,n){var r=this;return(r=t.call(this,hc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Xi.ZT)(e,t),e}(fc);function hd(t){return"IndexedDbTransactionError"===t.name}var fd=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(gc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(gc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),dd(n)},t.prototype.add=function(t){return gc("SimpleDb","ADD",this.store.name,t,t),dd(this.store.add(t))},t.prototype.get=function(t){var e=this;return dd(this.store.get(t)).next(function(n){return void 0===n&&(n=null),gc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return gc("SimpleDb","DELETE",this.store.name,t),dd(this.store.delete(t))},t.prototype.count=function(){return gc("SimpleDb","COUNT",this.store.name),dd(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){gc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new sd(function(n,r){e.onerror=function(t){var e=gd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new sd(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new cd(i),s=e(i.primaryKey,i.value,o);if(s instanceof sd){var a=s.catch(function(t){return o.done(),sd.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return sd.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function dd(t){return new sd(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=gd(t.target.error);n(e)}})}var pd=!1;function gd(t){var e=ud._t((0,to.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new fc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pd||(pd=!0,setTimeout(function(){throw r},0)),r}}return t}var md=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Xi.ZT)(e,t),e}(id);function yd(t,e){var n=_c(t);return ud.It(n.Mt,e)}var vd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&gh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&mh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&mh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ac.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},zh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ic(this.mutations,t.mutations,function(t,e){return vh(t,e)})&&Ic(this.baseMutations,t.baseMutations,function(t,e){return vh(t,e)})},t}(),bd=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){wc(e.mutations.length===r.length);for(var i=Gh(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),wd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ac.min()),void 0===o&&(o=Ac.min()),void 0===s&&(s=Uc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),_d=function(t){this.Lt=t};function Sd(t,e){if(e.document)return bf(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Kc.fromSegments(e.noDocument.path),r=xd(e.noDocument.readTime),i=hl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Kc.fromSegments(e.unknownDocument.path);return r=xd(e.unknownDocument.version),hl.newUnknownDocument(o,r)}return bc()}function Td(t,e,n){var r=Ed(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:ff(t,e.key),fields:e.data.value.mapValue.fields,updateTime:sf(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Zf(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Cd(e.version);return s=e.hasCommittedMutations,new Zf(null,new Hf(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Cd(e.version);return new Zf(new $f(c,l),null,null,!0,r,i)}return bc()}function Ed(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Id(t){var e=new xc(t[0],t[1]);return Ac.fromTimestamp(e)}function Cd(t){var e=t.toTimestamp();return new Vf(e.seconds,e.nanoseconds)}function xd(t){var e=new xc(t.seconds,t.nanoseconds);return Ac.fromTimestamp(e)}function Ad(t,e){for(var n=(e.baseMutations||[]).map(function(e){return _f(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return _f(t.Lt,e)}),o=xc.fromMillis(e.localWriteTimeMs);return new vd(e.batchId,o,n,i)}function kd(t){var e,n,r=xd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?xd(t.lastLimboFreeSnapshotVersion):Ac.min();return void 0!==t.query.documents?(wc(1===(n=t.query).documents.length),e=ql(Pl(gf(n.documents[0])))):e=function(t){return ql(Ef(t))}(t.query),new wd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Uc.fromBase64String(t.resumeToken))}function Rd(t,e){var n,r=Cd(e.snapshotVersion),i=Cd(e.lastLimboFreeSnapshotVersion);n=ml(e.target)?Sf(t.Lt,e.target):Tf(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Wf(e.targetId,pl(e.target),r,o,e.sequenceNumber,i,n)}function Od(t){var e=Ef({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Gl(e,e.limit,"L"):e}var Nd=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Dd(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:xd(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Dd(t).put({bundleId:(n=e).id,createTime:Cd(cf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Pd(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Od(e.bundledQuery),readTime:xd(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Pd(t).put(function(t){return{name:t.name,readTime:Cd(cf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Dd(t){return yd(t,td.store)}function Pd(t){return yd(t,ed.store)}var Ld=function(){function t(){this.Bt=new Fd}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),sd.resolve()},t.prototype.getCollectionParents=function(t,e){return sd.resolve(this.Bt.getEntries(e))},t}(),Fd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Lh(Dc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Lh(Dc.comparator)).toArray()},t}(),Ud=function(){function t(){this.qt=new Fd}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Ff(i)};return Md(t).put(o)}return sd.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Cc(e),""],!1,!0);return Md(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(jf(o.parent))}return n})},t}();function Md(t){return yd(t,Yf.store)}var jd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vd=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function qd(t,e,n){var r=t.store(Bf.store),i=t.store(zf.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){wc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=zf.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return sd.waitFor(o).next(function(){return c})}function Gd(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw bc();e=t.noDocument}return JSON.stringify(e).length}Vd.DEFAULT_COLLECTION_PERCENTILE=10,Vd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vd.DEFAULT=new Vd(41943040,Vd.DEFAULT_COLLECTION_PERCENTILE,Vd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vd.DISABLED=new Vd(-1,0,0);var Bd=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return wc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hd(t).$t({index:Bf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=$d(t),s=Hd(t);return s.add({}).next(function(a){wc("number"==typeof a);for(var u=new vd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return wf(t.Lt,e)}),i=n.mutations.map(function(e){return wf(t.Lt,e)});return new Bf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Lh(function(t,e){return Ec(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=zf.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,zf.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),sd.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Hd(t).get(e).next(function(t){return t?(wc(t.userId===n.userId),Ad(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?sd.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Hd(t).$t({index:Bf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(wc(e.batchId>=r),o=Ad(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Hd(t).$t({index:Bf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hd(t).Nt(Bf.userMutationsIndex,n).next(function(t){return t.map(function(t){return Ad(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=zf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return $d(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=jf(r[1]);if(a===n.userId&&e.path.isEqual(c))return Hd(t).get(u).next(function(t){if(!t)throw bc();wc(t.userId===n.userId),o.push(Ad(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Lh(Ec),i=[];return e.forEach(function(e){var o=zf.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=$d(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=jf(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),sd.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=zf.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Lh(Ec);return $d(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=jf(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Hd(t).get(e).next(function(t){if(null===t)throw bc();wc(t.userId===n.userId),r.push(Ad(n.R,t))}))}),sd.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return qd(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),sd.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return sd.resolve();var r=IDBKeyRange.lowerBound(zf.prefixForUser(e.userId)),i=[];return $d(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=jf(t[1]);i.push(o)}else r.done()}).next(function(){wc(0===i.length)})})},t.prototype.containsKey=function(t,e){return zd(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Zd(t).get(this.userId).next(function(t){return t||new Gf(e.userId,-1,"")})},t}();function zd(t,e,n){var r=zf.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return $d(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Hd(t){return yd(t,Bf.store)}function $d(t){return yd(t,zf.store)}function Zd(t){return yd(t,Gf.store)}var Kd=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Wd=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Kd(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Ac.fromTimestamp(new xc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Qd(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return wc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Qd(t).$t(function(s,a){var u=kd(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return sd.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Qd(t).$t(function(t,n){var r=kd(n);e(r)})},t.prototype.Xt=function(t){return Jd(t).get(Jf.key).next(function(t){return wc(null!==t),t})},t.prototype.Zt=function(t,e){return Jd(t).put(Jf.key,e)},t.prototype.te=function(t,e){return Qd(t).put(Rd(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=pl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Qd(t).$t({range:r,index:Wf.queryTargetsIndexName},function(t,n,r){var o=kd(n);gl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Yd(t);return e.forEach(function(e){var s=Ff(e.path);i.push(o.put(new Qf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),sd.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Yd(t);return sd.forEach(e,function(e){var o=Ff(e.path);return sd.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Yd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Yd(t),i=zh();return r.$t({range:n,kt:!0},function(t,e,n){var r=jf(t[1]),o=new Kc(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Ff(e.path),r=IDBKeyRange.bound([n],[Cc(n)],!1,!0),i=0;return Yd(t).$t({index:Qf.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Qd(t).get(e).next(function(t){return t?kd(t):null})},t}();function Qd(t){return yd(t,Wf.store)}function Jd(t){return yd(t,Jf.store)}function Yd(t){return yd(t,Qf.store)}function Xd(t){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){if(t.code!==hc.FAILED_PRECONDITION||t.message!==rd)throw t;return gc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function tp(t,e){var n=t[1],r=e[1],i=Ec(t[0],e[0]);return 0===i?Ec(n,r):i}var ep=function(){function t(t){this.ne=t,this.buffer=new Lh(tp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();tp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),np=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;gc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Xi.mG)(e,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return hd(e=n.sent())?(gc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Xd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),rp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return sd.resolve(lc.o);var r=new ep(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(gc("LruGarbageCollector","Garbage collection skipped; disabled"),sd.resolve(jd)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(gc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),jd):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(gc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),pc()<=eo.in.DEBUG&&gc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),sd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),ip=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new rp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return op(t,n)},t.prototype.removeReference=function(t,e,n){return op(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return op(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Zd(t).Ot(function(r){return zd(t,r,e).next(function(t){return t&&(n=!0),sd.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Yd(t).delete([0,Ff(s.path)])})});i.push(u)}}).next(function(){return sd.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return op(t,e)},t.prototype.we=function(t,e){var n,r=Yd(t),i=lc.o;return r.$t({index:Qf.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==lc.o&&e(new Kc(jf(n)),i),i=s,n=o):i=lc.o}).next(function(){i!==lc.o&&e(new Kc(jf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function op(t,e){return Yd(t).put(function(t,e){return new Qf(0,Ff(t.path),e)}(e,t.currentSequenceNumber))}var sp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Rc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Oc(this.inner)},t}(),ap=function(){function t(){this.changes=new sp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Ac.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:hl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?sd.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),up=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return hp(t).put(fp(e),n)},t.prototype.removeEntry=function(t,e){var n=hp(t),r=fp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return hp(t).get(fp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return hp(t).get(fp(e)).next(function(t){return{document:n.ye(e,t),size:Gd(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Mh();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Mh(),i=new Nh(Kc.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Gd(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return sd.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return hp(t).$t({range:r},function(t,e,r){for(var s=Kc.fromSegments(t);o&&Kc.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Mh(),o=e.path.length+1,s={};if(n.isEqual(Ac.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Ed(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Zf.collectionReadTimeIndex}return hp(t).$t(s,function(t,n,s){if(t.length===o){var a=Sd(r.R,n);e.path.isPrefixOf(a.key.path)?$l(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new cp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return lp(t).get(Kf.key).next(function(t){return wc(!!t),t})},t.prototype.me=function(t,e){return lp(t).put(Kf.key,e)},t.prototype.ye=function(t,e){if(e){var n=Sd(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Ac.min()))return n}return hl.newInvalidDocument(t)},t}(),cp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new sp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Xi.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Lh(function(t,e){return Ec(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Td(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Gd(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Td(e.Ie.R,hl.newNoDocument(o,Ac.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),sd.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(ap);function lp(t){return yd(t,Kf.store)}function hp(t){return yd(t,Zf.store)}function fp(t){return t.path.toArray()}var dp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;wc(n<r&&n>=0&&r<=11);var o=new ad("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(qf.store)}(t),function(t){t.createObjectStore(Gf.store,{keyPath:Gf.keyPath}),t.createObjectStore(Bf.store,{keyPath:Bf.keyPath,autoIncrement:!0}).createIndex(Bf.userMutationsIndex,Bf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(zf.store)}(t),pp(t),function(t){t.createObjectStore(Zf.store)}(t));var s=sd.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Qf.store),t.deleteObjectStore(Wf.store),t.deleteObjectStore(Jf.store)}(t),pp(t)),s=s.next(function(){return function(t){var e=t.store(Jf.store),n=new Jf(0,0,Ac.min().toTimestamp(),0);return e.put(Jf.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Bf.store).Nt().next(function(n){t.deleteObjectStore(Bf.store),t.createObjectStore(Bf.store,{keyPath:Bf.keyPath,autoIncrement:!0}).createIndex(Bf.userMutationsIndex,Bf.userMutationsKeyPath,{unique:!0});var r=e.store(Bf.store),i=n.map(function(t){return r.put(t)});return sd.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Xf.store,{keyPath:Xf.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Kf.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Zf.store);e.createIndex(Zf.readTimeIndex,Zf.readTimeIndexPath,{unique:!1}),e.createIndex(Zf.collectionReadTimeIndex,Zf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(td.store,{keyPath:td.keyPath})}(t),function(t){t.createObjectStore(ed.store,{keyPath:ed.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Zf.store).$t(function(t,n){e+=Gd(n)}).next(function(){var n=new Kf(e);return t.store(Kf.store).put(Kf.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Gf.store),r=t.store(Bf.store);return n.Nt().next(function(n){return sd.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Bf.userMutationsIndex,i).next(function(r){return sd.forEach(r,function(r){wc(r.userId===n.userId);var i=Ad(e.R,r);return qd(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Qf.store),n=t.store(Zf.store);return t.store(Jf.store).get(Jf.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new Dc(n),s=function(t){return[0,Ff(t)]}(o);r.push(e.get(s).next(function(n){return n?sd.resolve():function(n){return e.put(new Qf(0,Ff(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return sd.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Yf.store,{keyPath:Yf.keyPath});var n=e.store(Yf.store),r=new Fd,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ff(i)})}};return e.store(Zf.store).$t({kt:!0},function(t,e){var n=new Dc(t);return i(n.popLast())}).next(function(){return e.store(zf.store).$t({kt:!0},function(t,e){var n=jf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Wf.store);return n.$t(function(t,r){var i=kd(r),o=Rd(e.R,i);return n.put(o)})},t}();function pp(t){t.createObjectStore(Qf.store,{keyPath:Qf.keyPath}).createIndex(Qf.documentTargetsIndex,Qf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Wf.store,{keyPath:Wf.keyPath}).createIndex(Wf.queryTargetsIndexName,Wf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Jf.store)}var gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new fc(hc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ip(this,i),this.Le=n+"main",this.R=new _d(u),this.Be=new ud(this.Le,11,new dp(this.R)),this.qe=new Wd(this.referenceDelegate,this.R),this.Ut=new Ud,this.Ue=function(t,e){return new up(t,e)}(this.R,this.Ut),this.Ke=new Nd,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&mc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new fc(hc.FAILED_PRECONDITION,gp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new lc(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Xi.mG)(e,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Xi.mG)(e,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Xi.mG)(e,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return vp(e).put(new Xf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(hd(e))return gc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return gc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return yp(t).get(qf.key).next(function(t){return sd.resolve(e.tn(t))})},t.prototype.en=function(t){return vp(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=yd(t,Xf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return sd.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?sd.resolve(!0):yp(t).get(qf.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new fc(hc.FAILED_PRECONDITION,gp);return!1}}return!(!e.networkEnabled||!e.inForeground)||vp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&gc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t=this;return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[qf.store,Xf.store],function(e){var n=new md(e,lc.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return vp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Bd.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return gc("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",nd,function(o){return r=new md(o,i.Ne?i.Ne.next():lc.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw mc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new fc(hc.FAILED_PRECONDITION,rd);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return yp(t).get(qf.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new fc(hc.FAILED_PRECONDITION,gp)})},t.prototype.Ze=function(t){var e=new qf(this.clientId,this.allowTabSynchronization,Date.now());return yp(t).put(qf.key,e)},t.yt=function(){return ud.yt()},t.prototype.Xe=function(t){var e=this,n=yp(t);return n.get(qf.key).next(function(t){return e.tn(t)?(gc("IndexedDbPersistence","Releasing primary lease."),n.delete(qf.key)):sd.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(mc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return gc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return mc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){mc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function yp(t){return yd(t,qf.store)}function vp(t){return yd(t,Xf.store)}function bp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var wp=function(t,e){this.progress=t,this.wn=e},_p=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Kc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):jl(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Kc(e)).next(function(t){var e=Vh();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Vh();return this.Ut.getCollectionParents(t,i).next(function(s){return sd.forEach(s,function(s){var a=function(t,e){return new Nl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=hl.newInvalidDocument(c),r=r.insert(c,l)),mh(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){$l(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=zh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof _h&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Sp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=zh(),i=zh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Tp=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ac.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Ll(e)||Fl(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(pc()<=eo.in.DEBUG&&gc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Hl(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Lh(Zl(t));return e.forEach(function(e,r){$l(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return pc()<=eo.in.DEBUG&&gc("QueryEngine","Using full collection scan to execute query:",Hl(e)),this.Sn.getDocumentsMatchingQuery(t,e,Ac.min())},t}(),Ep=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Nh(Ec),this.kn=new sp(function(t){return pl(t)},gl),this.$n=Ac.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new _p(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Ip(t,e,n,r){return new Ep(t,e,n,r)}function Cp(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Xi.Jh)(this,function(s){switch(s.label){case 0:return n=_c(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new _p(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=zh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function xp(t,e){var n=_c(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=sd.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);wc(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Ap(t){var e=_c(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function kp(t,e){var n=_c(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return wc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Mh();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Rp(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Ac.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return sd.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Rp(t,e,n,r,i){var o=zh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Mh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Ac.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):gc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Op(t,e){var n=_c(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Np(t,e){var n=_c(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?sd.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new wd(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Dp(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Xi.Jh)(this,function(a){switch(a.label){case 0:r=_c(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!hd(s=a.sent()))throw s;return gc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Pp(t,e,n){var r=_c(t),i=Ac.min(),o=zh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=_c(t),i=r.kn.get(n);return void 0!==i?sd.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ql(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Ac.min(),n?o:zh())}).next(function(t){return{documents:t,Bn:o}})})}function Lp(t,e){var n=_c(t),r=_c(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Fp(t){var e=_c(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=_c(t),i=Mh(),o=Ed(n),s=hp(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Zf.readTimeIndex,range:a},function(t,e){var n=Sd(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Id(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function Up(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){return[2,(e=_c(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=hp(t),n=Ac.min();return e.$t({index:Zf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Id(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function Mp(t,e,n,r){return(0,Xi.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return(0,Xi.Jh)(this,function(p){switch(p.label){case 0:for(i=_c(t),o=zh(),s=Mh(),a=Gh(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Np(i,function(t){return ql(Pl(Dc.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Rp(t,f,s,Ac.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function jp(t,e,n){return void 0===n&&(n=zh()),(0,Xi.mG)(this,void 0,void 0,function(){var r,i;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return[4,Np(t,ql(Od(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=_c(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=cf(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Uc.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var Vp=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return sd.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:cf(n.createTime)}),sd.resolve()},t.prototype.getNamedQuery=function(t,e){return sd.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Od(t.bundledQuery),readTime:cf(t.readTime)}}(e)),sd.resolve()},t}(),qp=function(){function t(){this.Wn=new Lh(Gp.Gn),this.zn=new Lh(Gp.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Gp(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Gp(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Kc(new Dc([])),r=new Gp(n,t),i=new Gp(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Kc(new Dc([])),n=new Gp(e,t),r=new Gp(e,t+1),i=zh();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Gp(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Gp=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Kc.comparator(t.key,e.key)||Ec(t.ns,e.ns)},t.Hn=function(t,e){return Ec(t.ns,e.ns)||Kc.comparator(t.key,e.key)},t}(),Bp=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Lh(Gp.Gn)}return t.prototype.checkEmpty=function(t){return sd.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new vd(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Gp(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return sd.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return sd.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return sd.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return sd.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return sd.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Gp(e,0),i=new Gp(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),sd.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Lh(Ec);return e.forEach(function(t){var e=new Gp(t,0),i=new Gp(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),sd.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Kc.isDocumentKey(i)||(i=i.child(""));var o=new Gp(new Kc(i),0),s=new Lh(Ec);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),sd.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;wc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return sd.forEach(e.mutations,function(i){var o=new Gp(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Gp(e,0),r=this.rs.firstAfterOrEqual(n);return sd.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return sd.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),zp=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Nh(Kc.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return sd.resolve(n?n.document.clone():hl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Mh();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():hl.newInvalidDocument(t))}),sd.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Mh(),i=new Kc(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||$l(e,u)&&(r=r.insert(u.key,u.clone()))}return sd.resolve(r)},t.prototype.fs=function(t,e){return sd.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Hp(this)},t.prototype.getSize=function(t){return sd.resolve(this.size)},t}(),Hp=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Xi.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),sd.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ap),$p=function(){function t(t){this.persistence=t,this.ds=new sp(function(t){return pl(t)},gl),this.lastRemoteSnapshotVersion=Ac.min(),this.highestTargetId=0,this.ws=0,this._s=new qp,this.targetCount=0,this.ys=Kd.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),sd.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return sd.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return sd.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),sd.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),sd.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Kd(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,sd.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),sd.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,sd.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),sd.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return sd.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return sd.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),sd.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),sd.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),sd.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return sd.resolve(n)},t.prototype.containsKey=function(t,e){return sd.resolve(this._s.containsKey(e))},t}(),Zp=function(){function t(t,e){var n=this;this.gs={},this.Ne=new lc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new $p(this),this.Ut=new Ld,this.Ue=function(t,e){return new zp(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new _d(e),this.Ke=new Vp(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Bp(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;gc("MemoryPersistence","Starting transaction:",t);var i=new Kp(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return sd.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Kp=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Xi.ZT)(e,t),e}(id),Wp=function(){function t(t){this.persistence=t,this.As=new qp,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw bc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),sd.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),sd.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),sd.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sd.forEach(this.vs,function(r){var i=Kc.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return sd.or([function(){return sd.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Qp=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Jp(t,e){return"firestore_clients_"+t+"_"+e}function Yp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Xp(t,e){return"firestore_targets_"+t+"_"+e}Qp.UNAUTHENTICATED=new Qp(null),Qp.GOOGLE_CREDENTIALS=new Qp("google-credentials-uid"),Qp.FIRST_PARTY=new Qp("first-party-uid");var tg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new fc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(mc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),eg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fc(i.error.code,i.error.message)),o?new t(e,i.state,r):(mc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ng=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=$h(),s=0;i&&s<r.activeTargetIds.length;++s)i=Zc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(mc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),rg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(mc("SharedClientState","Failed to parse online state: "+e),null)},t}(),ig=function(){function t(){this.activeTargetIds=$h()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),og=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Nh(Ec),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Jp(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new ig),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Xi.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Jp(this.persistenceKey,r)))&&(o=ng.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Xp(this.persistenceKey,t));if(n){var r=eg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Xp(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return gc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){gc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){gc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(gc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void mc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Xi.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Xi.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=lc.o;if(null!=t)try{var n=JSON.parse(t);wc("number"==typeof n),e=n}catch(t){mc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==lc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new tg(this.currentUser,t,e,n),i=Yp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Yp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Xp(this.persistenceKey,t),i=new eg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ng.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return tg.Vs(new Qp(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return eg.Vs(r,e)},t.prototype.js=function(t){return rg.Vs(t)},t.prototype.ii=function(t){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(gc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=$h();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),sg=function(){function t(){this.li=new ig,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new ig,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),ag=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),ug=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){gc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){gc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),cg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},lg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),hg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Xi.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new cc;s.listenOnce(oc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case ic.NO_ERROR:var e=s.getResponseJson();gc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ic.TIMEOUT:gc("Connection",'RPC "'+t+'" timed out'),o(new fc(hc.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:var n=s.getStatus();if(gc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(hc).indexOf(e)>=0?e:hc.UNKNOWN}(r.status);o(new fc(a,r.message))}else o(new fc(hc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new fc(hc.UNAVAILABLE,"Connection failed."));break;default:bc()}}finally{gc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Xu,i=Zs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ac({})),this.Fi(o.initMessageHeaders,e),(0,to.uI)()||(0,to.b$)()||(0,to.d)()||(0,to.w1)()||(0,to.Mn)()||(0,to.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");gc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new lg({Ei:function(t){c?gc("Connection","Not sending because WebChannel is closed:",t):(u||(gc("Connection","Opening WebChannel transport."),a.open(),u=!0),gc("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,uc.EventType.OPEN,function(){c||gc("Connection","WebChannel transport opened.")}),h(a,uc.EventType.CLOSE,function(){c||(c=!0,gc("Connection","WebChannel transport closed"),l.Vi())}),h(a,uc.EventType.ERROR,function(t){c||(c=!0,yc("Connection","WebChannel transport errored:",t),l.Vi(new fc(hc.UNAVAILABLE,"The operation could not be completed")))}),h(a,uc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];wc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){gc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Ih[t];if(void 0!==e)return Oh(e)}(i),s=r.message;void 0===o&&(o=hc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new fc(o,s)),a.close()}else gc("Connection","WebChannel received:",n),l.Si(n)}}),h(i,sc.STAT_EVENT,function(t){10===t.stat?gc("Connection","Detected buffering proxy"):11===t.stat&&gc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);gc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return gc("RestConnection","Received: ",t),t},function(e){throw yc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+cg[t]},t}());function fg(){return"undefined"!=typeof window?window:null}function dg(){return"undefined"!=typeof document?document:null}function pg(t){return new of(t,!0)}var gg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&gc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),mg=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new gg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===hc.RESOURCE_EXHAUSTED?(mc(e.toString()),mc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===hc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new fc(hc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Xi.mG)(t,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return gc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(gc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),yg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Xi.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:bc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(wc(void 0===e||"string"==typeof e),Uc.fromBase64String(e||"")):(wc(void 0===e||e instanceof Uint8Array),Uc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?hc.UNKNOWN:Oh(t.code);return new fc(e,t.message||"")}(a);n=new Jh(r,i,o,s||null)}else if("documentChange"in e){i=df(t,(r=e.documentChange).document.name),o=cf(r.document.updateTime);var a=new cl({mapValue:{fields:r.document.fields}}),u=(s=hl.newFoundDocument(i,o,a),r.targetIds||[]);n=new Wh(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=df(t,(r=e.documentDelete).document),o=r.readTime?cf(r.readTime):Ac.min(),a=hl.newNoDocument(i,o),n=new Wh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=df(t,(r=e.documentRemove).document),n=new Wh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return bc();var c=e.filter;i=new kh(r=c.count||0),n=new Qh(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Ac.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ac.min():e.readTime?cf(e.readTime):Ac.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=mf(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ml(r)?{documents:Sf(t,r)}:{query:Tf(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=af(t,e.resumeToken):e.snapshotVersion.compareTo(Ac.min())>0&&(n.readTime=sf(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return bc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=mf(this.R),e.removeTarget=t,this.cr(e)},e}(mg),vg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Xi.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(wc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(wc(void 0!==e),t.map(function(t){return function(t,e){var n=cf(t.updateTime?t.updateTime:e);return n.isEqual(Ac.min())&&(n=cf(e)),new hh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=cf(t.commitTime);return this.listener.Tr(n,e)}return wc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=mf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return wf(e.R,t)})};this.cr(n)},e}(mg),bg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Xi.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new fc(hc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===hc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new fc(hc.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===hc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new fc(hc.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),wg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(mc(e),this.Vr=!1):gc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),_g=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Xi.mG)(o,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){switch(t.label){case 0:return Rg(this)?(gc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return(e=_c(t)).Or.add(4),[4,Tg(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Sg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new wg(n,r)};function Sg(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e,n;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:if(!Rg(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Tg(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e,n;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Eg(t,e){var n=_c(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),kg(n)?Ag(n):Hg(n).er()&&Cg(n,e))}function Ig(t,e){var n=_c(t),r=Hg(n);n.$r.delete(e),r.er()&&xg(n,e),0===n.$r.size&&(r.er()?r.ir():Rg(n)&&n.Br.set("Unknown"))}function Cg(t,e){t.qr.U(e.targetId),Hg(t).mr(e)}function xg(t,e){t.qr.U(e),Hg(t).yr(e)}function Ag(t){t.qr=new Xh({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Hg(t).start(),t.Br.Sr()}function kg(t){return Rg(t)&&!Hg(t).tr()&&t.$r.size>0}function Rg(t){return 0===_c(t).Or.size}function Og(t){t.qr=void 0}function Ng(t){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){return t.$r.forEach(function(e,n){Cg(t,e)}),[2]})})}function Dg(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(n){return Og(t),kg(t)?(t.Br.Nr(e),Ag(t)):t.Br.set("Unknown"),[2]})})}function Pg(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Xi.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Jh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Xi.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),gc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Lg(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Wh?t.qr.X(e):e instanceof Qh?t.qr.rt(e):t.qr.et(e),n.isEqual(Ac.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ap(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Uc.EMPTY_BYTE_STRING,n.snapshotVersion)),xg(t,e);var r=new wd(n.target,e,1,n.sequenceNumber);Cg(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return gc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Lg(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Lg(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r=this;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:if(!hd(e))throw e;return t.Or.add(1),[4,Tg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ap(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Xi.mG)(r,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return gc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Sg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Fg(t,e){return e().catch(function(n){return Lg(t,n,e)})}function Ug(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Xi.Jh)(this,function(s){switch(s.label){case 0:e=_c(t),n=$g(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Rg(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Op(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=$g(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Lg(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Mg(e)&&jg(e),[2]}})})}function Mg(t){return Rg(t)&&!$g(t).tr()&&t.kr.length>0}function jg(t){$g(t).start()}function Vg(t){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){return $g(t).Ar(),[2]})})}function qg(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Xi.Jh)(this,function(i){for(e=$g(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Gg(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=bd.from(r,e,n),[4,Fg(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Ug(t)];case 2:return o.sent(),[2]}})})}function Bg(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return e&&$g(t).pr?[4,function(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return Rh(r=e.code)&&r!==hc.ABORTED?(n=t.kr.shift(),$g(t).sr(),[4,Fg(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Ug(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Mg(t)&&jg(t),[2]}})})}function zg(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return n=_c(t),e?(n.Or.delete(2),[4,Sg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Tg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Hg(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=_c(t);return r.br(),new yg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ng.bind(null,t),Ri:Dg.bind(null,t),_r:Pg.bind(null,t)}),t.Mr.push(function(n){return(0,Xi.mG)(e,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),kg(t)?Ag(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Og(t),e.label=3;case 3:return[2]}})})})),t.Ur}function $g(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=_c(t);return r.br(),new vg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Vg.bind(null,t),Ri:Bg.bind(null,t),Ir:qg.bind(null,t),Tr:Gg.bind(null,t)}),t.Mr.push(function(n){return(0,Xi.mG)(e,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Ug(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(gc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Zg=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new od,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fc(hc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Kg(t,e){if(mc("AsyncQueue",e+": "+t),hd(t))return new fc(hc.UNAVAILABLE,e+": "+t);throw t}var Wg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Kc.comparator(e.key,n.key)}:function(t,e){return Kc.comparator(t.key,e.key)},this.keyedMap=Vh(),this.sortedSet=new Nh(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Qg=function(){function t(){this.Qr=new Nh(Kc.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):bc():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Jg=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Wg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Yg=function(){this.Wr=void 0,this.listeners=[]},Xg=function(){this.queries=new sp(function(t){return zl(t)},Bl),this.onlineState="Unknown",this.Gr=new Set};function tm(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Xi.Jh)(this,function(c){switch(c.label){case 0:if(n=_c(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Yg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Kg(a,"Initialization of query '"+Hl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&im(n),[2]}})})}function em(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Xi.Jh)(this,function(a){return n=_c(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function nm(t,e){for(var n=_c(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&im(n)}function rm(t,e,n){var r=_c(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function im(t){t.Gr.forEach(function(t){t.next()})}var om=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Jg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Jg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),sm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),am=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return df(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?bf(this.R,t.document,!1):hl.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return cf(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new am(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||zh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return[4,Mp(this.localStore,new am(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,jp(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new wp(Object.assign({},this.progress),t))]}})})}}();var um=function(t){this.key=t},cm=function(t){this.key=t},lm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=zh(),this.mutatedKeys=zh(),this.lo=Zl(t),this.fo=new Wg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Qg,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Ll(this.query)&&i.size===this.query.limit?i.last():null,c=Fl(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=$l(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Ll(this.query)||Fl(this.query))for(;s.size>this.query.limit;){var l=Ll(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bc()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Jg(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Qg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=zh(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new cm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new um(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=zh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Jg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),hm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},fm=function(t){this.key=t,this.bo=!1},dm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new sp(function(t){return zl(t)},Bl),this.Vo=new Map,this.So=new Set,this.Do=new Nh(Kc.comparator),this.Co=new Map,this.No=new qp,this.xo={},this.Fo=new Map,this.ko=Kd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function pm(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Xi.Jh)(this,function(a){switch(a.label){case 0:return n=Bm(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Np(n.localStore,ql(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,gm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Eg(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function gm(t,e,n,r){return(0,Xi.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Xi.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Xi.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Xi.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Pp(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Am(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Pp(t.localStore,e,!0)];case 1:return i=l.sent(),o=new lm(e,i.Bn),s=o._o(i.documents),a=Kh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Am(t,n,u.To),c=new hm(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function mm(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return n=_c(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Bl(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Dp(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Ig(n.remoteStore,r.targetId),Cm(n,r.targetId)}).catch(Xd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Cm(n,r.targetId),[4,Dp(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function ym(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Xi.Jh)(this,function(a){switch(a.label){case 0:r=zm(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=_c(t),i=xc.now(),o=e.reduce(function(t,e){return t.add(e.key)},zh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=yh(c,n.get(c.key));null!=l&&s.push(new _h(c.key,l,ll(l.value.mapValue),fh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Nh(Ec)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Om(r,i.changes)];case 3:return a.sent(),[4,Ug(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Kg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function vm(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:n=_c(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,kp(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(wc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?wc(r.bo):t.removedDocuments.size>0&&(wc(r.bo),r.bo=!1))}),[4,Om(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Xd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function bm(t,e,n){var r=_c(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=_c(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&im(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wm(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Xi.Jh)(this,function(c){switch(c.label){case 0:return(r=_c(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Nh(Kc.comparator)).insert(o,hl.newNoDocument(o,Ac.min())),a=zh().add(o),u=new Zh(Ac.min(),new Map,new Lh(Ec),s,a),[4,vm(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Rm(r),[3,4];case 2:return[4,Dp(r.localStore,e,!1).then(function(){return Cm(r,e,n)}).catch(Xd)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function _m(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:n=_c(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,xp(n.localStore,e)];case 2:return i=o.sent(),Im(n,r,null),Em(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Om(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Xd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Sm(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:r=_c(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=_c(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return wc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Im(r,e,n),Em(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Om(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Xd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Tm(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Xi.Jh)(this,function(a){switch(a.label){case 0:Rg((n=_c(t)).remoteStore)||gc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=_c(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Kg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Em(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Im(t,e,n){var r=_c(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Cm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||xm(t,e)})}function xm(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Ig(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Rm(t))}function Am(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof um?(t.No.addReference(o.key,e),km(t,o)):o instanceof cm?(gc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||xm(t,o.key)):bc()}}function km(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(gc("SyncEngine","New document in limbo: "+n),t.So.add(r),Rm(t))}function Rm(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Kc(Dc.fromString(e)),r=t.ko.next();t.Co.set(r,new fm(n)),t.Do=t.Do.insert(n,r),Eg(t.remoteStore,new wd(ql(Pl(n.path)),r,2,lc.o))}}function Om(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Xi.Jh)(this,function(a){switch(a.label){case 0:return r=_c(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Sp.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Xi.Jh)(this,function(l){switch(l.label){case 0:n=_c(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return sd.forEach(e,function(e){return sd.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return sd.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!hd(r=l.sent()))throw r;return gc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Nm(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return(n=_c(t)).currentUser.isEqual(e)?[3,3]:(gc("SyncEngine","User change. New user:",e.toKey()),[4,Cp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new fc(hc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Om(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Dm(t,e){var n=_c(t),r=n.Co.get(e);if(r&&r.bo)return zh().add(r.key);var i=zh(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Pm(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return[4,Pp((n=_c(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Am(n,e.targetId,i.To),i)]}})})}function Lm(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){return[2,Fp((e=_c(t)).localStore).then(function(t){return Om(e,t)})]})})}function Fm(t,e,n,r){return(0,Xi.mG)(this,void 0,void 0,function(){var i,o;return(0,Xi.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=_c(t),r=_c(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):sd.resolve(null)})})}((i=_c(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ug(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Im(i,e,r||null),Em(i,e),function(t,e){_c(_c(t)._n).Gt(e)}(i.localStore,e)):bc(),s.label=4;case 4:return[4,Om(i,o)];case 5:return s.sent(),[3,7];case 6:gc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Um(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Xi.Jh)(this,function(c){switch(c.label){case 0:return Bm(n=_c(t)),zm(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Mm(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,zg(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Eg(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Cm(n,e),Dp(n.localStore,e,!0)}),Ig(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Mm(n,a)];case 5:return c.sent(),function(t){var e=_c(t);e.Co.forEach(function(t,n){Ig(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Nh(Kc.comparator)}(n),n.$o=!1,[4,zg(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Mm(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return(0,Xi.Jh)(this,function(g){switch(g.label){case 0:n=_c(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Np(n.localStore,ql(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Pm(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Lp(n.localStore,a)];case 8:return p=g.sent(),[4,Np(n.localStore,p)];case 9:return u=g.sent(),[4,gm(n,jm(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function jm(t){return Dl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Vm(t){var e=_c(t);return _c(_c(e.localStore).persistence).fn()}function qm(t,e,n,r){return(0,Xi.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Xi.Jh)(this,function(a){switch(a.label){case 0:return(i=_c(t)).$o?(gc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Fp(i.localStore)];case 3:return o=a.sent(),s=Zh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Om(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Dp(i.localStore,e,!0)];case 6:return a.sent(),Cm(i,e,r),[3,8];case 7:bc(),a.label=8;case 8:return[2]}})})}function Gm(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Xi.Jh)(this,function(f){switch(f.label){case 0:if(!(r=Bm(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(gc("SyncEngine","Adding an already active target "+s),[3,5]):[4,Lp(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Np(r.localStore,a)];case 3:return u=f.sent(),[4,gm(r,jm(a),u.targetId,!1)];case 4:f.sent(),Eg(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Dp(r.localStore,t,!1).then(function(){Ig(r.remoteStore,t),Cm(r,t)}).catch(Xd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Bm(t){var e=_c(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wm.bind(null,e),e.vo._r=nm.bind(null,e.eventManager),e.vo.Mo=rm.bind(null,e.eventManager),e}function zm(t){var e=_c(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_m.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sm.bind(null,e),e}var Hm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return this.R=pg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Ip(this.persistence,new Tp,t.initialUser,this.R)},t.prototype.qo=function(t){return new Zp(Wp.bs,this.R)},t.prototype.Bo=function(t){return new sg},t.prototype.terminate=function(){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),$m=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Xi.ZT)(e,t),e.prototype.initialize=function(e){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Up(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,zm(this.Qo.syncEngine)];case 4:return n.sent(),[4,Ug(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return Ip(this.persistence,new Tp,t.initialUser,this.R)},e.prototype.Uo=function(t){return new np(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=bp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vd.withCacheSize(this.cacheSizeBytes):Vd.DEFAULT;return new mp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,fg(),dg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new sg},e}(Hm),Zm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Xi.ZT)(e,t),e.prototype.initialize=function(e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof og?(this.sharedClientState.syncEngine={ui:Fm.bind(null,n),ai:qm.bind(null,n),hi:Gm.bind(null,n),fn:Vm.bind(null,n),ci:Lm.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Xi.mG)(r,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return[4,Um(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=fg();if(!og.yt(e))throw new fc(hc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new og(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}($m),Km=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n=this;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return bm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Nm.bind(null,this.syncEngine),[4,zg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Xg},t.prototype.createDatastore=function(t){var e=pg(t.databaseInfo.databaseId),n=new hg(t.databaseInfo);return function(t,e,n){return new bg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return bm(s.syncEngine,t,0)},o=ug.yt()?new ug:new ag,new _g(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new dm(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return e=_c(t),gc("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Tg(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Wm=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Qm=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new od,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new sm(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t,e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t,e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new fc(hc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Xi.Jh)(this,function(u){switch(u.label){case 0:return n=_c(t),r=mf(n.R)+"/documents",i={documents:e.map(function(t){return ff(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){wc(!!e.found);var n=df(t,e.found.name),r=cf(e.found.updateTime),i=new cl({mapValue:{fields:e.found.fields}});return hl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){wc(!!e.missing),wc(!!e.readTime);var n=df(t,e.missing),r=cf(e.readTime);return hl.newNoDocument(n,r)}(t,e):bc()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());wc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new xh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Kc.fromPath(n);e.mutations.push(new Ah(r,e.precondition(r)))}),[4,function(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return n=_c(t),r=mf(n.R)+"/documents",i={writes:e.map(function(t){return wf(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw bc();e=Ac.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new fc(hc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?fh.updateTime(e):fh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ac.min()))throw new fc(hc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fh.updateTime(e)}return fh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Jm=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new gg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Xi.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Xi.Jh)(this,function(r){return t=new Qm(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Hc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Rh(e)}return!1},t}(),Ym=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Qp.UNAUTHENTICATED,this.clientId=Tc.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Xi.mG)(r,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return gc("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new fc(hc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new od;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Xi.mG)(t,void 0,void 0,function(){var t,n;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Kg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Xm(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),gc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Xi.mG)(i,void 0,void 0,function(){return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Cp(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function ty(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ey(t)];case 1:return n=i.sent(),gc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return(n=_c(t)).asyncQueue.verifyOperationInProgress(),gc("RemoteStore","RemoteStore received new credentials"),r=Rg(n),n.Or.add(3),[4,Tg(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Sg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function ey(t){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(gc("FirestoreClient","Using default OfflineComponentProvider"),[4,Xm(t,new Hm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function ny(t){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(gc("FirestoreClient","Using default OnlineComponentProvider"),[4,ty(t,new Km)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function ry(t){return ey(t).then(function(t){return t.persistence})}function iy(t){return ey(t).then(function(t){return t.localStore})}function oy(t){return ny(t).then(function(t){return t.remoteStore})}function sy(t){return ny(t).then(function(t){return t.syncEngine})}function ay(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e,n;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return[4,ny(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=pm.bind(null,e.syncEngine),n.onUnlisten=mm.bind(null,e.syncEngine),n)]}})})}function uy(t,e,n){var r=this;void 0===n&&(n={});var i=new od;return t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(r,void 0,void 0,function(){var r;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Wm({next:function(o){e.enqueueAndForget(function(){return em(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new fc(hc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new fc(hc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new om(Pl(n.path),o,{includeMetadataChanges:!0,so:!0});return tm(t,s)},[4,ay(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function cy(t,e,n){var r=this;void 0===n&&(n={});var i=new od;return t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(r,void 0,void 0,function(){var r;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Wm({next:function(n){e.enqueueAndForget(function(){return em(t,s)}),n.fromCache&&"server"===r.source?i.reject(new fc(hc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new om(n,o,{includeMetadataChanges:!0,so:!0});return tm(t,s)},[4,ay(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var ly=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},hy=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),fy=new Map,dy=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},py=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Qp.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),gy=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),my=function(){function t(t){var e=this;this.currentUser=Qp.UNAUTHENTICATED,this.oc=new od,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){gc("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(gc("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(gc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(wc("string"==typeof n.accessToken),new dy(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Xi.mG)(n,void 0,void 0,function(){return(0,Xi.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return wc(null===t||"string"==typeof t),new Qp(t)},t}(),yy=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Qp.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),vy=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new yy(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Qp.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function by(t,e,n){if(!n)throw new fc(hc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function wy(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new fc(hc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function _y(t,e,n,r){if(!0===e&&!0===r)throw new fc(hc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Sy(t){if(!Kc.isDocumentKey(t))throw new fc(hc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ty(t){if(Kc.isDocumentKey(t))throw new fc(hc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ey(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":bc()}function Iy(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fc(hc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ey(t);throw new fc(hc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Cy(t,e){if(e<=0)throw new fc(hc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var xy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new fc(hc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fc(hc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,_y("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Ay=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xy({}),this._settingsFrozen=!1,t instanceof hy?(this._databaseId=t,this._credentials=new py):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new fc(hc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hy(t.options.projectId)}(t),this._credentials=new my(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new fc(hc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new fc(hc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xy(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new py;switch(t.type){case"gapi":var e=t.client;return wc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new vy(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new fc(hc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=fy.get(this))&&(gc("ComponentProvider","Removing Datastore"),fy.delete(this),t.terminate()),Promise.resolve();var t},t}(),ky=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Oy(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Ry=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Oy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Pl(r))||this)._path=r,i.type="collection",i}return(0,Xi.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new ky(this.firestore,null,new Kc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Ry);function Ny(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,to.m9)(t),by("collection","path",e),t instanceof Ay)return Ty(n=Dc.fromString.apply(Dc,(0,Xi.ev)([e],r))),new Oy(t,null,n);if(!(t instanceof ky||t instanceof Oy))throw new fc(hc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ty(n=Dc.fromString.apply(Dc,(0,Xi.ev)([t.path],r)).child(Dc.fromString(e))),new Oy(t.firestore,null,n)}function Dy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,to.m9)(t),1===arguments.length&&(e=Tc.u()),by("doc","path",e),t instanceof Ay)return Sy(n=Dc.fromString.apply(Dc,(0,Xi.ev)([e],r))),new ky(t,null,new Kc(n));if(!(t instanceof ky||t instanceof Oy))throw new fc(hc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Sy(n=t._path.child(Dc.fromString.apply(Dc,(0,Xi.ev)([e],r)))),new ky(t.firestore,t instanceof Oy?t.converter:null,new Kc(n))}function Py(t,e){return t=(0,to.m9)(t),e=(0,to.m9)(e),(t instanceof ky||t instanceof Oy)&&(e instanceof ky||e instanceof Oy)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ly(t,e){return t=(0,to.m9)(t),e=(0,to.m9)(e),t instanceof Ry&&e instanceof Ry&&t.firestore===e.firestore&&Bl(t._query,e._query)&&t.converter===e.converter}var Fy=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new gg(this,"async_queue_retry"),this.Tc=function(){var e=dg();e&&gc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=dg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=dg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!hd(t=n.sent()))throw t;return gc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,mc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=Zg.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&bc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t;return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Uy(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new od,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var My=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Fy,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Xi.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Vy(this),this._firestoreClient.terminate()},e}(Ay);function jy(t){return t._firestoreClient||Vy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Vy(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ly(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Ym(t._credentials,t._queue,r)}function qy(t,e,n){var r=this,i=new od;return t.asyncQueue.enqueue(function(){return(0,Xi.mG)(r,void 0,void 0,function(){var r;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Xm(t,n)];case 1:return o.sent(),[4,ty(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===hc.FAILED_PRECONDITION||t.code===hc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Gy(t){if(t._initialized||t._terminated)throw new fc(hc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var By=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new fc(hc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lc(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),zy=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Uc.fromBase64String(e))}catch(e){throw new fc(hc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Uc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Hy=function(t){this._methodName=t},$y=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new fc(hc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new fc(hc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ec(this._lat,t._lat)||Ec(this._long,t._long)},t}(),Zy=/^__.*__$/,Ky=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new _h(t,this.data,this.fieldMask,e,this.fieldTransforms):new wh(t,this.data,e,this.fieldTransforms)},t}(),Wy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new _h(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Qy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bc()}}var Jy=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return yv(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(Qy(this.Cc)&&Zy.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),Yy=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||pg(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Jy({Cc:t,methodName:e,Bc:n,path:Lc.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Xy(t){var e=t._freezeSettings(),n=pg(t._databaseId);return new Yy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);dv("Data must be an object, but it was:",s,r);var a,u,c=hv(r,s);if(o.merge)a=new Fc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=pv(e,f[h],n);if(!s.contains(d))throw new fc(hc.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");vv(l,d)||l.push(d)}a=new Fc(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Ky(new cl(c),a,u)}var ev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Xi.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Hy);function nv(t,e,n){return new Jy({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Xi.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new lh(t.path,new nh)},e.prototype.isEqual=function(t){return t instanceof e},e}(Hy),iv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Xi.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=nv(this,t,!0),n=this.Uc.map(function(t){return lv(t,e)}),r=new rh(n);return new lh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Hy),ov=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Xi.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=nv(this,t,!0),n=this.Uc.map(function(t){return lv(t,e)}),r=new oh(n);return new lh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Hy),sv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Xi.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new ah(t.R,Jl(t.R,this.Kc));return new lh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Hy);function av(t,e,n,r){var i=t.qc(1,e,n);dv("Data must be an object, but it was:",i,r);var o=[],s=cl.empty();Rc(r,function(t,r){var a=mv(e,t,n);r=(0,to.m9)(r);var u=i.$c(a);if(r instanceof ev)o.push(a);else{var c=lv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Fc(o);return new Wy(s,a,i.fieldTransforms)}function uv(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[pv(e,r,n)],u=[i];if(o.length%2!=0)throw new fc(hc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(pv(e,o[c])),u.push(o[c+1]);for(var l=[],h=cl.empty(),f=a.length-1;f>=0;--f)if(!vv(l,a[f])){var d=a[f],p=u[f];p=(0,to.m9)(p);var g=s.$c(d);if(p instanceof ev)l.push(d);else{var m=lv(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new Fc(l);return new Wy(h,y,s.fieldTransforms)}function cv(t,e,n,r){return void 0===r&&(r=!1),lv(n,t.qc(r?4:3,e))}function lv(t,e){if(fv(t=(0,to.m9)(t)))return dv("Unsupported field value:",e,t),hv(t,e);if(t instanceof Hy)return function(t,e){if(!Qy(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=lv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,to.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Jl(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=xc.fromDate(t);return{timestampValue:sf(e.R,n)}}if(t instanceof xc)return n=new xc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:sf(e.R,n)};if(t instanceof $y)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof zy)return{bytesValue:af(e.R,t._byteString)};if(t instanceof ky){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:lf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Ey(t))}(t,e)}function hv(t,e){var n={};return Oc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rc(t,function(t,r){var i=lv(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function fv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof xc||t instanceof $y||t instanceof zy||t instanceof ky||t instanceof Hy)}function dv(t,e,n){if(!fv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ey(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function pv(t,e,n){if((e=(0,to.m9)(e))instanceof By)return e._internalPath;if("string"==typeof e)return mv(t,e);throw yv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var gv=new RegExp("[~\\*/\\[\\]]");function mv(t,e,n){if(e.search(gv)>=0)throw yv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(By.bind.apply(By,(0,Xi.ev)([void 0],e.split(".")))))._internalPath}catch(yb){throw yv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function yv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new fc(hc.INVALID_ARGUMENT,(a+=". ")+t+u)}function vv(t,e){return t.some(function(t){return t.isEqual(e)})}var bv=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ky(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new wv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(_v("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),wv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Xi.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(bv);function _v(t,e){return"string"==typeof e?mv(t,e):e instanceof By?e._internalPath:e._delegate._internalPath}var Sv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Tv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Xi.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Ev(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(_v("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(bv),Ev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Xi.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Tv),Iv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Sv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Ev(n._firestore,n._userDataWriter,r.key,r,new Sv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fc(hc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Ev(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Sv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Ev(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Sv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Cv(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Cv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bc()}}function xv(t,e){return t instanceof Tv&&e instanceof Tv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Iv&&e instanceof Iv&&t._firestore===e._firestore&&Ly(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Av(t){if(Fl(t)&&0===t.explicitOrderBy.length)throw new fc(hc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kv=function(){};function Rv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Ov=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,Xi.ZT)(e,t),e.prototype._apply=function(t){var e=Xy(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new fc(hc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Mv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Uv(r,t,l[c]));a={arrayValue:{values:u}}}else a=Uv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Mv(s,o),a=cv(n,"where",s,"in"===o||"not-in"===o);var h=yl.create(i,o,a);return function(t,e){if(e.g()){var n=Ml(t);if(null!==n&&!n.isEqual(e.field))throw new fc(hc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ul(t);null!==r&&jv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new fc(hc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new Ry(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(kv),Nv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return(0,Xi.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new fc(hc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new fc(hc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Al(e,n);return function(t,e){if(null===Ul(t)){var n=Ml(t);null!==n&&jv(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new Ry(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Nl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(kv),Dv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,Xi.ZT)(e,t),e.prototype._apply=function(t){return new Ry(t.firestore,t.converter,Gl(t._query,this.zc,this.Hc))},e}(kv),Pv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Xi.ZT)(e,t),e.prototype._apply=function(t){var e=Fv(t,this.type,this.Jc,this.Yc);return new Ry(t.firestore,t.converter,function(t,e){return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(kv),Lv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Xi.ZT)(e,t),e.prototype._apply=function(t){var e=Fv(t,this.type,this.Jc,this.Yc);return new Ry(t.firestore,t.converter,function(t,e){return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(kv);function Fv(t,e,n,r){if(n[0]=(0,to.m9)(n[0]),n[0]instanceof bv)return function(t,e,n,r,i){if(!r)throw new fc(hc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Vl(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(nl(e,r.key));else{var c=r.data.field(u.field);if(Gc(c))throw new fc(hc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new fc(hc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Cl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Xy(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new fc(hc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new fc(hc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!jl(t)&&-1!==c.indexOf("/"))throw new fc(hc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Dc.fromString(c));if(!Kc.isDocumentKey(l))throw new fc(hc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Kc(l);a.push(nl(e,h))}else{var f=cv(n,r,c);a.push(f)}}return new Cl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Uv(t,e,n){if("string"==typeof(n=(0,to.m9)(n))){if(""===n)throw new fc(hc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!jl(e)&&-1!==n.indexOf("/"))throw new fc(hc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Dc.fromString(n));if(!Kc.isDocumentKey(r))throw new fc(hc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return nl(t,new Kc(r))}if(n instanceof ky)return nl(t,n._key);throw new fc(hc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ey(n)+".")}function Mv(t,e){if(!Array.isArray(t)||0===t.length)throw new fc(hc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new fc(hc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function jv(t,e,n){if(!n.isEqual(e))throw new fc(hc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Vv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Wc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(qc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw bc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Rc(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new $y(Vc(t.latitude),Vc(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Bc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(zc(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=jc(t);return new xc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Dc.fromString(t);wc(Lf(n));var r=new hy(n.get(1),n.get(3)),i=new Kc(n.popFirst(5));return r.isEqual(e)||mc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function qv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Gv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Xi.ZT)(e,t),e.prototype.convertBytes=function(t){return new zy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ky(this.firestore,null,e)},e}(Vv),Bv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Xy(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=zv(t,this._firestore),i=qv(r.converter,e,n),o=tv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,fh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=zv(t,this._firestore);return o="string"==typeof(e=(0,to.m9)(e))||e instanceof By?uv(this._dataReader,"WriteBatch.update",s._key,e,n,r):av(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,fh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=zv(t,this._firestore);return this._mutations=this._mutations.concat(new xh(e._key,fh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new fc(hc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function zv(t,e){if((t=(0,to.m9)(t)).firestore!==e)throw new fc(hc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Hv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Xi.ZT)(e,t),e.prototype.convertBytes=function(t){return new zy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ky(this.firestore,null,e)},e}(Vv);function $v(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Iy(t,ky);var o=Iy(t.firestore,My),s=Xy(o);return Kv(o,[("string"==typeof(e=(0,to.m9)(e))||e instanceof By?uv(s,"updateDoc",t._key,e,n,r):av(s,"updateDoc",t._key,e)).toMutation(t._key,fh.exists(!0))])}function Zv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,to.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Uy(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Uy(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof ky)c=Iy(t.firestore,My),l=Pl(t._key.path),u={next:function(e){i[a]&&i[a](Wv(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Iy(t,Ry);c=Iy(d.firestore,My),l=d._query;var p=new Hv(c);u={next:function(t){i[a]&&i[a](new Iv(c,p,d,t))},error:i[a+1],complete:i[a+2]},Av(t._query)}return function(t,e,n,r){var i=this,o=new Wm(r),s=new om(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(i,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return e=tm,[4,ay(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(i,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return e=em,[4,ay(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(jy(c),l,h,u)}function Kv(t,e){return function(t,e){var n=this,r=new od;return t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(n,void 0,void 0,function(){var n;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return n=ym,[4,sy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(jy(t),e)}function Wv(t,e,n){var r=n.docs.get(e._key),i=new Hv(t);return new Tv(t,i,e._key,r,new Sv(n.hasPendingWrites,n.fromCache),e.converter)}var Qv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Xi.ZT)(e,t),e.prototype.get=function(e){var n=this,r=zv(e,this._firestore),i=new Hv(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Tv(n._firestore,i,r._key,t._document,new Sv(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Xy(t)}return t.prototype.get=function(t){var e=this,n=zv(t,this._firestore),r=new Gv(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return bc();var i=t[0];if(i.isFoundDocument())return new bv(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new bv(e._firestore,r,n._key,null,n.converter);throw bc()})},t.prototype.set=function(t,e,n){var r=zv(t,this._firestore),i=qv(r.converter,e,n),o=tv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=zv(t,this._firestore);return o="string"==typeof(e=(0,to.m9)(e))||e instanceof By?uv(this._dataReader,"Transaction.update",s._key,e,n,r):av(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=zv(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Jv(){if("undefined"==typeof Uint8Array)throw new fc(hc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Yv(){if("undefined"==typeof atob)throw new fc(hc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Xv=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Yv(),new t(zy.fromBase64String(e))},t.fromUint8Array=function(e){return Jv(),new t(zy.fromUint8Array(e))},t.prototype.toBase64=function(){return Yv(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Jv(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),tb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Gy(t=Iy(t,My));var n=jy(t),r=t._freezeSettings(),i=new Km;return qy(n,i,new $m(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Gy(t=Iy(t,My));var e=jy(t),n=t._freezeSettings(),r=new Km;return qy(e,r,new Zm(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new fc(hc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new od;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Xi.mG)(e,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Xi.mG)(this,void 0,void 0,function(){return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return ud.yt()?[4,ud.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(bp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),eb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof hy||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||yc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Iy(t,Ay))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&yc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,to.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new fc(hc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new gy(new dy(o,new Qp(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Xi.mG)(e,void 0,void 0,function(){var e,n;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return[4,ry(t)];case 1:return e=r.sent(),[4,oy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=_c(t);return e.Or.delete(0),Sg(e)}(n))]}})})})}(jy(Iy(this._delegate,My)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Xi.mG)(e,void 0,void 0,function(){var e,n;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return[4,ry(t)];case 1:return e=r.sent(),[4,oy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return(e=_c(t)).Or.add(0),[4,Tg(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(jy(Iy(this._delegate,My)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&_y("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new od;return t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(e,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return e=Tm,[4,sy(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(jy(Iy(this._delegate,My)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Wm(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(n,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){_c(t).Gr.add(e),e.next()},[4,ay(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(n,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){_c(t).Gr.delete(e)},[4,ay(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(jy(t=Iy(t,My)),Uy(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new fc(hc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new gb(this,Ny(this._delegate,t))}catch(t){throw ab(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new sb(this,Dy(this._delegate,t))}catch(t){throw ab(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new fb(this,function(t,e){if(t=Iy(t,Ay),by("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new fc(hc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ry(t,null,function(t){return new Nl(Dc.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw ab(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new od;return t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(n,void 0,void 0,function(){var n;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return ny(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Jm(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(jy(t),function(n){return e(new Qv(t,n))})}(this._delegate,function(n){return t(new rb(e,n))})},t.prototype.batch=function(){var t=this;return jy(this._delegate),new ib(new Bv(this._delegate,function(e){return Kv(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new fc(hc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new fc(hc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),nb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Xi.ZT)(e,t),e.prototype.convertBytes=function(t){return new Xv(new zy(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return sb.tu(e,this.firestore,null)},e}(Vv),rb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new nb(t)}return t.prototype.get=function(t){var e=this,n=mb(t);return this._delegate.get(n).then(function(t){return new lb(e._firestore,new Tv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=mb(t);return n?(wy("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=mb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Xi.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=mb(t);return this._delegate.delete(e),this},t}(),ib=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=mb(t);return n?(wy("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=mb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Xi.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=mb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),ob=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Ev(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new hb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new nb(e),n),i.set(n,o)),o},t}();ob.nu=new WeakMap;var sb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new nb(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new fc(hc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new ky(n._delegate,r,new Kc(e)))},t.tu=function(e,n,r){return new t(n,new ky(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new gb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new gb(this.firestore,Ny(this._delegate,t))}catch(t){throw ab(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,to.m9)(t))instanceof ky&&Py(this._delegate,t)},t.prototype.set=function(t,e){e=wy("DocumentReference.set",e);try{return function(t,e,n){t=Iy(t,ky);var r=Iy(t.firestore,My),i=qv(t.converter,e,n);return Kv(r,[tv(Xy(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,fh.none())])}(this._delegate,t,e)}catch(t){throw ab(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?$v(this._delegate,t):$v.apply(void 0,(0,Xi.ev)([this._delegate,t,e],n))}catch(t){throw ab(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Kv(Iy((t=this._delegate).firestore,My),[new xh(t._key,fh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ub(e),i=cb(e,function(e){return new lb(t.firestore,new Tv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Zv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Iy(t,ky);var e=Iy(t.firestore,My),n=jy(e),r=new Hv(e);return function(t,e){var n=this,r=new od;return t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(n,void 0,void 0,function(){var n;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i;return(0,Xi.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=_c(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new fc(hc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Kg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,iy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Tv(e,r,t._key,n,new Sv(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Iy(t,ky);var e=Iy(t.firestore,My);return uy(jy(e),t._key,{source:"server"}).then(function(n){return Wv(e,t,n)})}(this._delegate):function(t){t=Iy(t,ky);var e=Iy(t.firestore,My);return uy(jy(e),t._key).then(function(n){return Wv(e,t,n)})}(this._delegate)).then(function(t){return new lb(e.firestore,new Tv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?ob.eu(this.firestore,e):null))},t}();function ab(t,e,n){return t.message=t.message.replace(e,n),t}function ub(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Uy(r))return r}return{}}function cb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Uy(t[0])?t[0]:Uy(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var lb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new sb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return xv(this._delegate,t._delegate)},t}(),hb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Xi.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(lb),fb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new nb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Rv(this._delegate,function(t,e,n){var r=e,i=_v("where",t);return new Ov(i,r,n)}(e,n,r)))}catch(e){throw ab(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Rv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=_v("orderBy",t);return new Nv(r,n)}(e,n)))}catch(e){throw ab(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Rv(this._delegate,function(t){return Cy("limit",t),new Dv("limit",t,"F")}(e)))}catch(e){throw ab(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Rv(this._delegate,function(t){return Cy("limitToLast",t),new Dv("limitToLast",t,"L")}(e)))}catch(e){throw ab(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pv("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw ab(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pv("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw ab(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lv("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw ab(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lv("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw ab(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ly(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Iy(t,Ry);var e=Iy(t.firestore,My),n=jy(e),r=new Hv(e);return function(t,e){var n=this,r=new od;return t.asyncQueue.enqueueAndForget(function(){return(0,Xi.mG)(n,void 0,void 0,function(){var n;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Xi.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Pp(t,e,!0)];case 1:return a=u.sent(),r=new lm(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Kg(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,iy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Iv(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Iy(t,Ry);var e=Iy(t.firestore,My),n=jy(e),r=new Hv(e);return cy(n,t._query,{source:"server"}).then(function(n){return new Iv(e,r,t,n)})}(this._delegate):function(t){t=Iy(t,Ry);var e=Iy(t.firestore,My),n=jy(e),r=new Hv(e);return Av(t._query),cy(n,t._query).then(function(n){return new Iv(e,r,t,n)})}(this._delegate)).then(function(t){return new pb(e.firestore,new Iv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ub(e),i=cb(e,function(e){return new pb(t.firestore,new Iv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Zv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?ob.eu(this.firestore,e):null))},t}(),db=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new hb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),pb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new fb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new hb(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new db(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new hb(n._firestore,r))})},t.prototype.isEqual=function(t){return xv(this._delegate,t._delegate)},t}(),gb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Xi.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new sb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new sb(this.firestore,void 0===t?Dy(this._delegate):Dy(this._delegate,t))}catch(t){throw ab(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Iy(t.firestore,My),r=Dy(t),i=qv(t.converter,e);return Kv(n,[tv(Xy(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,fh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new sb(e.firestore,t)})},e.prototype.isEqual=function(t){return Py(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?ob.eu(this.firestore,t):null))},e}(fb);function mb(t){return Iy(t,ky)}var yb,vb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(By.bind.apply(By,(0,Xi.ev)([void 0],t)))}return t.documentId=function(){return new t(Lc.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,to.m9)(t))instanceof By&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),bb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new rv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new ev("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ov("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new sv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),wb=n(5119),_b={Firestore:eb,GeoPoint:$y,Timestamp:xc,Blob:Xv,Transaction:rb,WriteBatch:ib,DocumentReference:sb,DocumentSnapshot:lb,Query:fb,QueryDocumentSnapshot:hb,QuerySnapshot:pb,CollectionReference:gb,FieldPath:vb,FieldValue:bb,setLogLevel:function(t){dc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new wb.wA("firestore",function(t){return function(t,e){return new eb(t,new My(t,e),new tb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},_b)))})(yb=Yi.Z),yb.registerVersion("@firebase/firestore","2.3.8");var Sb=n(1906),Tb=n(8489),Eb=n(9291);class Ib extends Pt.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Cb(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Lt.N;if(this.isStopped||this.hasError?o=Fe.w.EMPTY:(this.observers.push(t),o=new Eb.W(this,t)),r&&t.add(t=new Wi.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Tb.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Cb{constructor(t,e){this.time=t,this.value=e}}function xb(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Ib(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Ab(t,e){return e?re(()=>t,e):re(()=>t)}var kb=n(4187);const Rb=new r.OlP("angularfire2.auth.use-emulator"),Ob=new r.OlP("angularfire2.auth.settings"),Nb=new r.OlP("angularfire2.auth.tenant-id"),Db=new r.OlP("angularfire2.auth.langugage-code"),Pb=new r.OlP("angularfire2.auth.use-device-language"),Lb=new r.OlP("angularfire.auth.persistence");let Fb=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Qi.HU(i),f=(0,Qi.ss)(h),d=new Pt.xQ,p=(0,Dt.of)(void 0).pipe((0,Wi.QV)(h.outsideAngular),re(()=>i.runOutsideAngular(()=>n.e(420).then(n.bind(n,7420)))),(0,ee.U)(()=>(0,Qi.on)(t,i,e)),(0,ee.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,Qi.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),xb({bufferSize:1,refCount:!1}));if(Q(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Dt.of)(null);else{p.pipe(De()).subscribe();const t=p.pipe(re(t=>t.getRedirectResult().then(t=>t,()=>null)),f,xb({bufferSize:1,refCount:!1})),e=t=>new Bt.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(re(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(re(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Ab(n),(0,kb.R)(h.outsideAngular),(0,Wi.QV)(h.insideAngular)),this.user=t.pipe(Ab(r),(0,kb.R)(h.outsideAngular),(0,Wi.QV)(h.insideAngular)),this.idToken=this.user.pipe(re(t=>t?(0,Nt.D)(t.getIdToken()):(0,Dt.of)(null))),this.idTokenResult=this.user.pipe(re(t=>t?(0,Nt.D)(t.getIdTokenResult()):(0,Dt.of)(null))),this.credential=(0,Sb.T)(t,d,this.authState.pipe(pe(t=>!t))).pipe((0,ee.U)(t=>(null==t?void 0:t.user)?t:null),(0,kb.R)(h.outsideAngular),(0,Wi.QV)(h.insideAngular))}return(0,Qi.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Qi.Dh),r.LFG(Qi.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Rb,8),r.LFG(Ob,8),r.LFG(Nb,8),r.LFG(Db,8),r.LFG(Pb,8),r.LFG(Lb,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Qi.Dh),r.LFG(Qi.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Rb,8),r.LFG(Ob,8),r.LFG(Nb,8),r.LFG(Db,8),r.LFG(Pb,8),r.LFG(Lb,8))},token:t,providedIn:"any"}),t})();function Ub(t,e){return function(t,e=Gi.z){return new Bt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Mb(t,e){return Ub(t,e).pipe((0,ee.U)(t=>({payload:t,type:"query"})))}function jb(t,e){return Mb(t,e).pipe(le(void 0),Bi(),(0,ee.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Vb(t,e,n){return jb(t,n).pipe(he((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return qb(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return qb(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qb(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),$i(),(0,ee.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function qb(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Gb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(0,Qi.GT)(Fb,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Bb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=jb(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ee.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(le(void 0),Bi(),pe(([t,e])=>e.length>0||!t),(0,ee.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(he((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Gb(t);return Vb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Mb(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Nt.D)(this.query.get(t)).pipe((0,Wi.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new zb(this.ref.doc(t),this.afs)}}class zb{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Qb(n,e);return new Bb(r,i,this.afs)}snapshotChanges(){return function(t,e){return Ub(t,e).pipe(le(void 0),Bi(),(0,ee.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ee.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Nt.D)(this.ref.get(t)).pipe((0,Wi.QV)(this.afs.schedulers.insideAngular))}}class Hb{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?jb(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),pe(t=>t.length>0),this.afs.keepUnstableUntilFirst):jb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(he((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Gb(t);return Vb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Mb(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Nt.D)(this.query.get(t)).pipe((0,Wi.QV)(this.afs.schedulers.insideAngular))}}const $b=new r.OlP("angularfire2.enableFirestorePersistence"),Zb=new r.OlP("angularfire2.firestore.persistenceSettings"),Kb=new r.OlP("angularfire2.firestore.settings"),Wb=new r.OlP("angularfire2.firestore.use-emulator");function Qb(t,e=(t=>t)){return{query:e(t),ref:t}}let Jb=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Qi.HU(o),this.keepUnstableUntilFirst=(0,Qi.ss)(this.schedulers);const c=(0,Qi.on)(t,o,e);!Ji.Z.auth&&u&&(0,Qi.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,Qi.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!Q(i)){const e=()=>{try{return(0,Nt.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(yb){return"undefined"!=typeof console&&console.warn(yb),(0,Dt.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,Dt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Qb(n,e),o=this.schedulers.ngZone.run(()=>r);return new Bb(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Hb(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new zb(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Qi.Dh),r.LFG(Qi.xv,8),r.LFG($b,8),r.LFG(Kb,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Zb,8),r.LFG(Wb,8),r.LFG(Rb,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Qi.Dh),r.LFG(Qi.xv,8),r.LFG($b,8),r.LFG(Kb,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Zb,8),r.LFG(Wb,8),r.LFG(Rb,8))},token:t,providedIn:"any"}),t})(),Yb=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:$b,useValue:!0},{provide:Zb,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Jb]}),t})();function Xb(t,e){if(1&t&&(r.TgZ(0,"div",2),r.TgZ(1,"div",3),r._UZ(2,"img",4),r.TgZ(3,"div",5),r.TgZ(4,"h5",6),r._uU(5),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Q6J("src",t.url,r.LSH),r.xp6(3),r.Oqu(t.nombre)}}let tw=(()=>{class t{constructor(t){this.afs=t,this.itemsCollection=t.collection("img"),this.items=this.itemsCollection.valueChanges()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Jb))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-fotos"]],decls:3,vars:3,consts:[[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.YNc(1,Xb,6,2,"div",1),r.ALo(2,"async"),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngForOf",r.lcZ(2,1,e.items)))},directives:[U],pipes:[H],encapsulation:2}),t})();class ew{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new nw(t,this.dueTime,this.scheduler))}}class nw extends jt.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(rw,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function rw(t){t.debouncedNext()}var iw="firebasestorage.googleapis.com",ow=function(t){function e(n,r){var i=t.call(this,sw(n),"Firebase Storage: "+r+" ("+sw(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,Xi.ZT)(e,t),e.prototype._codeEquals=function(t){return sw(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(to.ZR);function sw(t){return"storage/"+t}function aw(){return new ow("unknown","An unknown error occurred, please check the error payload for server response.")}function uw(){return new ow("canceled","User canceled the upload/download.")}function cw(){return new ow("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function lw(t){return new ow("invalid-argument",t)}function hw(){return new ow("app-deleted","The Firebase app was deleted.")}function fw(t){return new ow("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dw(t,e){return new ow("invalid-format","String does not match format '"+t+"': "+e)}function pw(t){throw new ow("internal-error","Internal error: "+t)}var gw={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},mw=function(t,e){this.data=t,this.contentType=e||null};function yw(t,e){switch(t){case gw.RAW:return new mw(vw(e));case gw.BASE64:case gw.BASE64URL:return new mw(bw(t,e));case gw.DATA_URL:return new mw((n=new ww(e)).base64?bw(gw.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(yb){throw dw(gw.DATA_URL,"Malformed data URL.")}return vw(e)}(n.rest),new ww(e).contentType)}var n;throw aw()}function vw(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function bw(t,e){switch(t){case gw.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw dw(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case gw.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw dw(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(yb){throw dw(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var ww=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw dw(gw.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},_w={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Sw(t){switch(t){case"running":case"pausing":case"canceling":return _w.RUNNING;case"paused":return _w.PAUSED;case"success":return _w.SUCCESS;case"canceled":return _w.CANCELED;case"error":default:return _w.ERROR}}var Tw=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Ew=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Tw.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Tw.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=Tw.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw pw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw pw("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw pw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(yb){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw pw("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Iw=function(){function t(){}return t.prototype.createConnection=function(){return new Ew},t}(),Cw=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(yb){return new t(e,"")}if(""===r.path)return r;throw new ow("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===iw?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new ow("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),xw=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Aw(t){return"string"==typeof t||t instanceof String}function kw(t){return Rw()&&t instanceof Blob}function Rw(){return"undefined"!=typeof Blob}function Ow(t,e,n,r){if(r<e)throw lw("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw lw("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Nw(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Dw(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Pw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!function(t){return void 0!==t}(a)?i():i(a)}catch(yb){o(yb)}else null!==s?((r=aw()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?hw():uw():new ow("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Lw(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Lw(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===Tw.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Lw(s,r))}else{var a=r.getErrorCode()===Tw.ABORT;e(!1,new Lw(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,Xi.ev)([null,t],e));else{var r;u()||s?l.call.apply(l,(0,Xi.ev)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Lw=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function Fw(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Uw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Fw();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Rw())return new Blob(t);throw new ow("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Mw=function(){function t(t,e){var n=0,r="";kw(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(kw(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Rw()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Uw.apply(null,r))}var i=e.map(function(t){return Aw(t)?yw(gw.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function jw(t){var e;try{e=JSON.parse(t)}catch(yb){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Vw(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function qw(t,e){return e}var Gw=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||qw},Bw=null;function zw(){if(Bw)return Bw;var t=[];t.push(new Gw("bucket")),t.push(new Gw("generation")),t.push(new Gw("metageneration")),t.push(new Gw("name","fullPath",!0));var e=new Gw("name");e.xform=function(t,e){return function(t){return!Aw(t)||t.length<2?t:Vw(t)}(e)},t.push(e);var n=new Gw("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Gw("timeCreated")),t.push(new Gw("updated")),t.push(new Gw("md5Hash",null,!0)),t.push(new Gw("cacheControl",null,!0)),t.push(new Gw("contentDisposition",null,!0)),t.push(new Gw("contentEncoding",null,!0)),t.push(new Gw("contentLanguage",null,!0)),t.push(new Gw("contentType",null,!0)),t.push(new Gw("metadata","customMetadata",!0)),Bw=t}function Hw(t,e,n){var r=jw(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Cw(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function $w(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Zw=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Kw(t){if(!t)throw aw()}function Ww(t,e){return function(n,r){var i=Hw(t,r,e);return Kw(null!==i),i}}function Qw(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new ow("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ow("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new ow("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new ow("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Jw(t){var e=Qw(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new ow("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Yw(t,e,n){var r=Nw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Zw(r,"GET",Ww(t,n),i);return o.errorHandler=Jw(e),o}function Xw(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var t_=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function e_(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(yb){Kw(!1)}return Kw(!!n&&-1!==(e||["active"]).indexOf(n)),n}var n_=262144,r_=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function i_(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var o_=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=zw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Xw(e,r,i),a={name:s.fullPath},u=Nw(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=$w(s,n),h=new Zw(u,"POST",function(t){var e;e_(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(yb){Kw(!1)}return Kw(Aw(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Qw(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new Zw(n,"POST",function(t){var e=e_(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(yb){Kw(!1)}n||Kw(!1);var i=Number(n);return Kw(!isNaN(i)),new t_(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Qw(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=n_*this._chunkMultiplier,n=new t_(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new t_(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new ow("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,h+l);if(null===d)throw cw();var p=new Zw(n,"POST",function(t,n){var i,s=e_(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Ww(e,o)(t,n):null,new t_(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=Qw(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(yb){return t._error=yb,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){n_*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=Yw(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Xw(e,r,i),c=$w(u,n),l=Mw.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw cw();var h={name:u.fullPath},f=Nw(o,t.host),d=t.maxUploadRetryTime,p=new Zw(f,"POST",Ww(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=Qw(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=uw(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Sw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new r_(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Sw(this._state)){case _w.SUCCESS:i_(this._resolve.bind(null,this.snapshot))();break;case _w.CANCELED:case _w.ERROR:i_(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Sw(this._state)){case _w.RUNNING:case _w.PAUSED:t.next&&i_(t.next.bind(t,this.snapshot))();break;case _w.SUCCESS:t.complete&&i_(t.complete.bind(t))();break;case _w.CANCELED:case _w.ERROR:t.error&&i_(t.error.bind(t,this._error))();break;default:t.error&&i_(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),s_=function(){function t(t,e){this._service=t,this._location=e instanceof Cw?e:Cw.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Cw(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Vw(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Cw(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw fw(t)},t}();function a_(t){var e={prefixes:[],items:[]};return u_(t,e).then(function(){return e})}function u_(t,e,n){return(0,Xi.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Xi.Jh)(this,function(s){switch(s.label){case 0:return[4,c_(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,u_(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function c_(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n,r;return(0,Xi.Jh)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Ow("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Nw(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new Zw(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=jw(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Cw(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new Cw(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return Kw(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Qw(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function l_(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Cw(t._location.bucket,n);return new s_(t.storage,r)}function h_(t){return/^[A-Za-z]+:\/\//.test(t)}function f_(t,e){if(t instanceof g_){var n=t;if(null==n._bucket)throw new ow("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new s_(n,n._bucket);return null!=e?f_(r,e):r}if(void 0!==e){if(e.includes(".."))throw lw('`path` param cannot contain ".."');return l_(t,e)}return t}function d_(t,e){if(e&&h_(e)){if(t instanceof g_)return new s_(t,e);throw lw("To use ref(service, url), the first argument must be a Storage instance.")}return f_(t,e)}function p_(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Cw.makeFromBucketSpec(n,t)}var g_=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=iw,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Cw.makeFromBucketSpec(i,this._host):p_(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?Cw.makeFromBucketSpec(this._url,t):p_(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Ow("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Ow("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t,e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,Xi.mG)(this,void 0,void 0,function(){var t;return(0,Xi.Jh)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new s_(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new xw(hw());var i=function(t,e,n,r,i,o){var s=Dw(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Pw(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function m_(t,e){return d_(t=(0,to.m9)(t),e)}var y_,v_,b_=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),w_=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new b_(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new b_(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new b_(t,i,i._ref))}:{next:e.next?function(t){return e.next(new b_(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),__=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new S_(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new S_(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),S_=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return l_(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new w_(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new o_(t,new Mw(e),n)}(t=(0,to.m9)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=gw.RAW),this._throwIfRoot("putString");var r=yw(e,t),i=(0,Xi.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new w_(new o_(this._delegate,new Mw(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return a_(t=(0,to.m9)(t))}(this._delegate).then(function(e){return new __(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return c_(t=(0,to.m9)(t),e)}(this._delegate,t||void 0).then(function(t){return new __(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Yw(t.storage,t._location,zw()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,to.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,Xi.mG)(this,void 0,void 0,function(){var n;return(0,Xi.Jh)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Nw(e.fullServerUrl(),t.host),o=$w(n,r),s=t.maxOperationRetryTime,a=new Zw(i,"PATCH",Ww(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Jw(e),a}(t.storage,t._location,e,zw()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,to.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Nw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Zw(r,"GET",function(t,e){return function(n,r){var i=Hw(t,r,e);return Kw(null!==i),function(t,e,n){var r=jw(e);if(null===r)return null;if(!Aw(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return Nw("/b/"+o(t.bucket)+"/o/"+o(r),n)+Dw({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=Jw(e),o}(t.storage,t._location,zw()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new ow("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,to.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,Xi.mG)(this,void 0,void 0,function(){var e;return(0,Xi.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Nw(e.fullServerUrl(),t.host),r=new Zw(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Jw(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,to.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw fw(t)},t}(),T_=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(h_(t))throw lw("ref() expected a child path but got a URL, use refFromURL instead.");return new S_(m_(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!h_(t))throw lw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cw.makeFromUrl(t,this._delegate.host)}catch(yb){throw lw("refFromUrl() expected a valid full URL but got an invalid one.")}return new S_(m_(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function E_(t){const e=function(t){return new Bt.y(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=Gi.P){return n=>n.lift(new ew(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ee.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function I_(t,e,n){return{getDownloadURL:()=>(0,Dt.of)(void 0).pipe((0,Wi.QV)(e.outsideAngular),re(()=>t.getDownloadURL()),n),getMetadata:()=>(0,Dt.of)(void 0).pipe((0,Wi.QV)(e.outsideAngular),re(()=>t.getMetadata()),n),delete:()=>(0,Nt.D)(t.delete()),child:r=>I_(t.child(r),e,n),updateMetadata:e=>(0,Nt.D)(t.updateMetadata(e)),put:(e,n)=>E_(t.put(e,n)),putString:(e,n,r)=>E_(t.putString(e,n,r)),listAll:()=>(0,Nt.D)(t.listAll())}}v_={TaskState:_w,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:gw,Storage:g_,Reference:S_},(y_=Yi.Z).INTERNAL.registerComponent(new wb.wA("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new T_(r,new g_(r,i,o,new Iw,n,Yi.Z.SDK_VERSION))},"PUBLIC").setServiceProps(v_).setMultipleInstances(!0)),y_.registerVersion("@firebase/storage","0.5.6");const C_=new r.OlP("angularfire2.storageBucket"),x_=new r.OlP("angularfire2.storage.maxUploadRetryTime"),A_=new r.OlP("angularfire2.storage.maxOperationRetryTime");let k_=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Qi.HU(i),this.keepUnstableUntilFirst=(0,Qi.ss)(this.schedulers);const a=(0,Qi.on)(t,i,e);this.storage=(0,Qi.sI)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return I_(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return I_(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return I_(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Qi.Dh),r.LFG(Qi.xv,8),r.LFG(C_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(x_,8),r.LFG(A_,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Qi.Dh),r.LFG(Qi.xv,8),r.LFG(C_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(x_,8),r.LFG(A_,8))},token:t,providedIn:"any"}),t})(),R_=(()=>{class t{constructor(t,e){this.db=t,this.storage=e,this.CAPERTA_IMAGENES="img"}cargarImagenesFirebase(t){for(const e of t){if(e.estaSubiendo=!0,e.progreso>=100)continue;const t=e.archivo,n=`${this.CAPERTA_IMAGENES}/${e.nombreArchivo}`,r=this.storage.ref(n),i=this.storage.upload(n,t);i.percentageChanges().subscribe(t=>e.progreso=Number(t)),i.snapshotChanges().pipe(Ue(()=>r.getDownloadURL().subscribe(t=>{console.log("Imagen cargada con exito"),e.url=t,e.estaSubiendo=!1,this.guardarImage({nombre:e.nombreArchivo,url:e.url})}))).subscribe()}}guardarImage(t){this.db.collection(`/${this.CAPERTA_IMAGENES}`).add(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Jb),r.LFG(k_))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class O_{constructor(t){this.archivo=t,this.nombreArchivo=t.name,this.estaSubiendo=!1,this.progreso=0}}let N_=(()=>{class t{constructor(){this.archivos=[],this.mouseSobre=new r.vpe}onDragEnter(t){this.mouseSobre.emit(!0),this._privenirDetener(t)}onDragLeave(t){this.mouseSobre.emit(!1)}onDrop(t){const e=this._getTransferencia(t);e&&(this._extraerArchivos(e.files),this._privenirDetener(t),this.mouseSobre.emit(!1))}_getTransferencia(t){return t.dataTransfer?t.dataTransfer:t.originalEvent.dataTransfer}_extraerArchivos(t){console.log(t);for(const e in Object.getOwnPropertyNames(t)){const n=t[e];if(this._archivoPudeSerCargado(n)){const t=new O_(n);this.archivos.push(t)}}console.log(this.archivos)}_archivoPudeSerCargado(t){return!(this._archivoYaFueDroppeado(t.name)||!this._esImagen(t.type))}_privenirDetener(t){t.preventDefault(),t.stopPropagation()}_archivoYaFueDroppeado(t){for(const e of this.archivos)if(e.nombreArchivo==t)return console.log("El archivo "+t+" ya esta agregado"),!0;return!1}_esImagen(t){return""!==t&&void 0!==t&&t.startsWith("image")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","appNgDropFiles",""]],hostBindings:function(t,e){1&t&&r.NdJ("dragover",function(t){return e.onDragEnter(t)})("dragleave",function(t){return e.onDragLeave(t)})("drop",function(t){return e.onDrop(t)})},inputs:{archivos:"archivos"},outputs:{mouseSobre:"mouseSobre"}}),t})();const D_=function(t){return{"text-green":t}},P_=function(t){return{width:t}};function L_(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td",11),r._uU(2),r.ALo(3,"slice"),r.qZA(),r.TgZ(4,"td"),r._uU(5),r.ALo(6,"number"),r.qZA(),r.TgZ(7,"td"),r.TgZ(8,"div",12),r._UZ(9,"div",13),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Q6J("ngClass",r.VKq(11,D_,t.progreso>=100)),r.xp6(1),r.hij(" ",r.Dn7(3,4,t.nombreArchivo,0,10),""),r.xp6(3),r.hij(" ",r.xi3(6,8,t.archivo.size/1024/1024,".2-2"),"MB "),r.xp6(4),r.Q6J("ngStyle",r.VKq(13,P_,t.progreso+"%"))}}const F_=function(t){return{"file-over":t}},U_=[{path:"fotos",component:tw},{path:"carga",component:(()=>{class t{constructor(t){this.cargaImagenesService=t,this.estaSobreElemento=!1,this.archivos=[]}ngOnInit(){}cargarImagenes(){this.cargaImagenesService.cargarImagenesFirebase(this.archivos)}pruebaSobreElemento(t){console.log(t)}limpiarArchivos(){this.archivos=[]}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(R_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-carga"]],decls:28,vars:6,consts:[[1,"row"],[1,"col-md-4"],[1,"mb-3"],["appNgDropFiles","",1,"well","drop-zone",3,"archivos","ngClass","mouseSobre"],["src","assets/img/drop-images.png","alt",""],[1,"col-md-8","mt-4"],[1,"btn","btn-success","mrb-5",3,"disabled","click"],[1,"btn","btn-danger",3,"click"],[1,"table"],[1,"table-dark"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngStyle"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"h4",2),r._uU(3,"Seleccione sus im\xe1genes"),r.qZA(),r.TgZ(4,"div",3),r.NdJ("mouseSobre",function(t){return e.estaSobreElemento=t}),r.TgZ(5,"h4"),r._uU(6,"Arrastre aqu\xed sus im\xe1genes"),r.qZA(),r._UZ(7,"img",4),r.qZA(),r.qZA(),r.TgZ(8,"div",5),r.TgZ(9,"h4"),r._uU(10,"Cargar sus im\xe1genes"),r.qZA(),r._UZ(11,"hr"),r._UZ(12,"br"),r.TgZ(13,"button",6),r.NdJ("click",function(){return e.cargarImagenes()}),r._uU(14,"Cargar a Firebase"),r.qZA(),r.TgZ(15,"button",7),r.NdJ("click",function(){return e.limpiarArchivos()}),r._uU(16,"Limpiar"),r.qZA(),r.TgZ(17,"table",8),r.TgZ(18,"thead",9),r.TgZ(19,"tr"),r.TgZ(20,"th"),r._uU(21,"Nombre archivo"),r.qZA(),r.TgZ(22,"th"),r._uU(23,"Tama\xf1o"),r.qZA(),r.TgZ(24,"th"),r._uU(25,"Progreso"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"tbody"),r.YNc(27,L_,10,15,"tr",10),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(4),r.Q6J("archivos",e.archivos)("ngClass",r.VKq(4,F_,e.estaSobreElemento)),r.xp6(9),r.Q6J("disabled",0===e.archivos.length),r.xp6(14),r.Q6J("ngForOf",e.archivos))},directives:[N_,L,U,j],pipes:[Z,$],encapsulation:2}),t})()},{path:"**",pathMatch:"full",redirectTo:"fotos"}];let M_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Oi.forRoot(U_)],Oi]}),t})();const j_={apiKey:"AIzaSyCkhZ2_dkkzUzRrM38e-dnlVva1nt2y5q8",authDomain:"fir-fotos-5d7ea.firebaseapp.com",projectId:"fir-fotos-5d7ea",storageBucket:"fir-fotos-5d7ea.appspot.com",messagingSenderId:"969239939514",appId:"1:969239939514:web:7bc73e7b8487515e89f583",measurementId:"G-M15F5GTNSF"};class V_{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new q_(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class q_ extends jt.L{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(o){this.error(o)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new Pt.xQ,n.set(e,i);const t=new B_(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new B_(e,i))}catch(o){return void this.error(o)}this.add(t.subscribe(new G_(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class G_ extends jt.L{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class B_ extends Bt.y{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new Fe.w,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new z_(n)),e.add(r.subscribe(t)),e}}class z_ extends Fe.w{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const H_=new r.OlP("angularfire2.analytics.analyticsCollectionEnabled"),$_=new r.OlP("angularfire2.analytics.appVersion"),Z_=new r.OlP("angularfire2.analytics.appName"),K_=new r.OlP("angularfire2.analytics.debugMode"),W_=new r.OlP("angularfire2.analytics.config");let Q_=(()=>{class t{constructor(t,e,r,i,o,s,a,u){if(this.analyticsInitialized=new Promise(()=>{}),W(a)){window.dataLayer=window.dataLayer||[];const t=(...t)=>"config"===t[0]&&"firebase"===t[2].origin&&(this.measurementId=t[1],!0),e=t=>{window.gtag=(...e)=>{t&&t(...e),"event"===e[0]&&e[2].send_to===this.measurementId&&(i&&(e[2].app_name=i),r&&(e[2].app_version=r)),o&&"undefined"!=typeof console&&console.info(...e),function(...t){window.dataLayer.push(arguments)}(...e)}};window.dataLayer.some(t)?(this.analyticsInitialized=Promise.resolve(),e()):this.analyticsInitialized=new Promise(n=>{e((...e)=>{t(...e)&&n()})}),s&&this.updateConfig(s),o&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const c=(0,Dt.of)(void 0).pipe((0,Wi.QV)(new Qi.HU(u).outsideAngular),re(()=>W(a)?u.runOutsideAngular(()=>n.e(497).then(n.bind(n,2497))):Yt.E),(0,ee.U)(()=>(0,Qi.sI)("analytics","AngularFireAnalytics",t,()=>{const n=t.analytics();return!1===e&&n.setAnalyticsCollectionEnabled(!1),n},[t,e,s,o])),xb({bufferSize:1,refCount:!1}));return(0,Qi.pX)(this,c,u)}updateConfig(t){return(0,Xi.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Qi.Ot),r.LFG(H_,8),r.LFG($_,8),r.LFG(Z_,8),r.LFG(K_,8),r.LFG(W_,8),r.LFG(r.Lbi),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Qi.Ot),r.LFG(H_,8),r.LFG($_,8),r.LFG(Z_,8),r.LFG(K_,8),r.LFG(W_,8),r.LFG(r.Lbi),r.LFG(r.R0b))},token:t,providedIn:"any"}),t})();(0,Qi.GT)(Q_,[{app:null,logEvent:null,setCurrentScreen:null,setUserId:null,setUserProperties:null,setAnalyticsCollectionEnabled:null}]);let J_=(()=>{class t{constructor(t,e,n,r){if(this.disposables=[],Q(e))this.initialized=Promise.resolve();else{let e;this.initialized=r.runOutsideAngular(()=>new Promise(t=>e=t)),this.disposables=[n.authState.subscribe(n=>{t.setUserId(null==n?void 0:n.uid),e()}),n.credential.subscribe(e=>{if(e){const n=e.user.isAnonymous?"anonymous":e.additionalUserInfo.providerId;e.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:n}),t.logEvent("login",{method:n})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Q_),r.LFG(r.Lbi),r.LFG(Fb),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Y_="screen_class";let X_=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const tS={},eS=t=>{const e=[t.screen_class,t.outlet].join("#");if(tS.hasOwnProperty(e))return tS[e];{const t=X_++;return tS[e]=t,t}};let nS=(()=>{class t{constructor(t,e,n,r,i,o,s){if(!e||!W(i))return this;o.runOutsideAngular(()=>{const i=e.events.pipe(pe(t=>t instanceof en));var o;this.disposable=i.pipe(re(t=>{var i;const o=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[t.snapshot.outlet])||void 0===i?void 0:i.toString())||"",s=e.routerState.root.children.map(t=>t).find(e=>e.outlet===t.snapshot.outlet);if(!s)return(0,Dt.of)(null);let a=s;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${o}`,firebase_event_origin:"auto",firebase_screen:u,outlet:t.snapshot.outlet};n&&(c.page_title=n.getTitle());let l=s.component;if(l){if(l===Tr){let e=t.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=t.snapshot.component;if("string"==typeof l)return(0,Dt.of)(Object.assign(Object.assign({},c),{[Y_]:l}));if(l){const t=r.resolveComponentFactory(l);return(0,Dt.of)(Object.assign(Object.assign({},c),{[Y_]:t.selector}))}return(0,Dt.of)(null)}),pe(t=>t),(0,ee.U)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:eS(t)},t)),(o=t=>t.outlet,t=>t.lift(new V_(o,void 0,void 0,void 0))),(0,we.zg)(e=>e.pipe($i((t,e)=>JSON.stringify(t)===JSON.stringify(e)),le(void 0),Bi(),(0,ee.U)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),re(e=>(0,Xi.mG)(this,void 0,void 0,function*(){return s&&(yield s.initialized),yield t.logEvent("screen_view",e)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Q_),r.LFG(mi,8),r.LFG(Ot,8),r.LFG(r._Vd),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(J_,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),rS=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Q_),r.LFG(nS,8),r.LFG(J_,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Q_]}),t})(),iS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[qi]}),t.\u0275inj=r.cJS({providers:[],imports:[[kt,M_,Qi.hO.initializeApp(j_),rS,Yb]]}),t})();(0,r.G48)(),xt().bootstrapModule(iS).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=7212)}]);